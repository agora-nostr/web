import{d as ft,f as p,a as n,s as A,c as re,j as Pr,t as vt,i as Pe}from"../chunks/rzUyzf2y.js";import{p as Ae,f as S,d as o,s as k,b as oe,g as e,a as D,c as ze,e as a,y as ne,r,t as E,u as Qe,aJ as Cr,aO as Mr,B as jt,x as er,z as jr}from"../chunks/AsQG98fS.js";import{i as M}from"../chunks/DZKExFZC.js";import{e as dt}from"../chunks/Cztbr3Ea.js";import{c as X}from"../chunks/Dt3q2Svx.js";import{c as Xe,b as zt,a as Oe,e as pt,d as Lt,r as st}from"../chunks/CS0aOiUg.js";import{s as Nt,a as Mt}from"../chunks/DfBYFC16.js";import{p as Sr}from"../chunks/BcDbBYPM.js";import{n as H,y as Wt,f as tr,h as Ur,A as Ar,N as Yt,d as zr}from"../chunks/tv6-RHC_.js";import{g as Lr,c as Nr,N as Gt}from"../chunks/Cxhu68Im.js";import{U as Ke,c as tt}from"../chunks/C-S0GgRw.js";import{E as Br}from"../chunks/cqXEgdME.js";import{F as Er}from"../chunks/Cp2_visM.js";import{g as At}from"../chunks/s53o-P2j.js";import{t as it}from"../chunks/D7cSTCXZ.js";import{$ as Bt}from"../chunks/DrbR318x.js";import{c as lt,L as ut}from"../chunks/iWJgxq80.js";import{R as Or}from"../chunks/CCwRoHwR.js";import{I as wt}from"../chunks/DjOI8lew.js";import{f as Rr}from"../chunks/CR7Fa_Et.js";import{g as Dr}from"../chunks/DdUskozk.js";import{p as fe}from"../chunks/w-gpJwMz.js";import{M as rr,D as ar,a as or,R as nr,b as sr,d as ir,e as lr,ac as Et}from"../chunks/CVV5LOp_.js";import{Q as Qt}from"../chunks/DrqcFPa-.js";import{D as dr}from"../chunks/D1QSAoU9.js";import{D as cr,a as ur}from"../chunks/CKdpi0zW.js";import{B as Te}from"../chunks/DMKx7da8.js";import{M as Hr}from"../chunks/DSSpNA08.js";import{g as Fr}from"../chunks/BgxlgyeA.js";import{s as Ir}from"../chunks/DNVUPZsi.js";import{E as vr}from"../chunks/BnPF26WP.js";import{H as Tr}from"../chunks/DZFlx0fg.js";import{g as Vr}from"../chunks/JxP1QK8w.js";import{g as $r}from"../chunks/HXYFdwja.js";import{C as Kr}from"../chunks/C8nOEIkG.js";import{b as rt}from"../chunks/DF8Bk5Sh.js";import{b as Xt}from"../chunks/CkKAtl6l.js";import{c as Jt,N as Wr}from"../chunks/BpHW1rOk.js";import{D as Yr,a as Gr}from"../chunks/BlLlwFDc.js";import{l as Zt}from"../chunks/DOQj-LTZ.js";var Qr=p('<button class="w-full px-4 py-2.5 text-left text-sm text-muted-foreground hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between gap-2"><span class="truncate"> </span> <!></button>'),Xr=p('<div class="border-t border-border mt-1 pt-1"><div class="px-4 py-2 text-xs text-muted-foreground font-medium"> </div> <!></div>'),Jr=p('<div class="absolute right-0 mt-2 w-64 bg-popover border border-border rounded-lg shadow-xl overflow-hidden z-50"><div class="py-1"><button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> Send Message</button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-3 text-left text-sm text-muted-foreground hover:bg-muted transition-colors flex items-center gap-3"><!> </button> <!></div></div>'),Zr=p("<!> <!>",1);function qr($,t){Ae(t,!0);const P=()=>Mt(Bt,"$t",g),[g,u]=Nt(),y=D(()=>new Wt({pubkey:t.pubkey})),_=lt(H,()=>H.$currentUser?.pubkey?{filters:[{kinds:[39089,39092],authors:[H.$currentUser.pubkey],limit:100}]}:void 0,{initialLimit:100,pageSize:100}),w=H.$subscribe(()=>H.$currentUser?.pubkey?{filters:[{kinds:[1e4],authors:[H.$currentUser.pubkey],limit:1}],bufferMs:100}:void 0),h=D(()=>_.events.map(l=>({id:l.id||"",title:l.tagValue("title")||"Untitled Pack",pubkeys:l.tags.filter(b=>b[0]==="p").map(b=>b[1])}))),f=D(()=>{const l=w.events[0];return l?l.tags.some(b=>b[0]==="p"&&b[1]===t.pubkey):!1});let m=oe(!1);async function N(l){if(!t.pubkey)return;const b=_.events.find(R=>R.id===l);if(b)try{if(b.tags.filter(U=>U[0]==="p").map(U=>U[1]).includes(t.pubkey))return;if(b.tags.push(["p",t.pubkey]),await b.sign(),await b.publishReplaceable(),b.publishStatus==="error"){const F=b.publishError?.relayErrors||{},G=Object.entries(F).map(([Z,ue])=>`${Z}: ${ue}`).join(`
`);it.error(`Failed to publish:
${G||"Unknown error"}`);return}it.success("Added to pack"),t.onClose()}catch(R){console.error("Failed to add to pack:",R),it.error(`Failed to add to pack: ${R instanceof Error?R.message:"Unknown error"}`)}}async function s(){if(H.$currentUser?.pubkey)try{let l=w.events[0];if(l||(l=new tr(H),l.kind=1e4,l.content="",l.tags=[]),e(f)?(l.tags=l.tags.filter(b=>!(b[0]==="p"&&b[1]===t.pubkey)),it.success("User unmuted")):(l.tags.push(["p",t.pubkey]),it.success("User muted")),await l.sign(),await l.publishReplaceable(),l.publishStatus==="error"){const R=l.publishError?.relayErrors||{},U=Object.entries(R).map(([F,G])=>`${F}: ${G}`).join(`
`);it.error(`Failed to publish:
${U||"Unknown error"}`);return}t.onClose()}catch(l){console.error("Failed to toggle mute:",l),it.error(`Failed to ${e(f)?"unmute":"mute"} user: ${l instanceof Error?l.message:"Unknown error"}`)}}function I(){t.onClose(),t.onOpenCreatePack()}function z(){k(m,!0),t.onClose()}function ee(){const l=new Wt({pubkey:t.pubkey});At(`/messages/${l.npub}`),t.onClose()}var O=Zr(),V=S(O);{var Q=l=>{var b=Jr(),R=a(b),U=a(R);U.__click=ee;var F=a(U);wt(F,{name:"message",size:"md",class:"text-primary"}),ne(),r(U);var G=o(U,4);G.__click=s;var Z=a(G);{let q=D(()=>e(f)?"speaker":"speaker-muted");wt(Z,{get name(){return e(q)},size:"md",class:"text-red-500"})}var ue=o(Z);r(G);var Ce=o(G,2);Ce.__click=z;var me=a(Ce);wt(me,{name:"alert",size:"md",class:"text-yellow-500"});var Me=o(me);r(Ce);var ae=o(Ce,4);ae.__click=I;var se=a(ae);wt(se,{name:"plus",size:"md",class:"text-primary"});var je=o(se);r(ae);var ie=o(ae,2);{var Re=q=>{var le=Xr(),ke=a(le),He=a(ke,!0);r(ke);var he=o(ke,2);dt(he,17,()=>e(h),ve=>ve.id,(ve,de)=>{const Se=D(()=>e(de).pubkeys.includes(t.pubkey));var we=Qr();we.__click=()=>N(e(de).id);var be=a(we),_e=a(be,!0);r(be);var Ue=o(be,2);{var Le=Ne=>{wt(Ne,{name:"check",size:"sm",class:"text-green-500 flex-shrink-0"})};M(Ue,Ne=>{e(Se)&&Ne(Le)})}r(we),E(()=>{we.disabled=e(Se),A(_e,e(de).title)}),n(ve,we)}),r(le),E(ve=>A(He,ve),[()=>P()("followPacks.addToExisting")]),n(q,le)};M(ie,q=>{e(h).length>0&&q(Re)})}r(R),r(b),E((q,le,ke)=>{A(ue,` ${q??""}`),A(Me,` ${le??""}`),A(je,` ${ke??""}`)},[()=>e(f)?P()("userDropdown.unmute"):P()("userDropdown.mute"),()=>P()("userDropdown.report"),()=>P()("followPacks.createNew")]),n(l,b)};M(V,l=>{t.isOpen&&l(Q)})}var K=o(V,2);Or(K,{get target(){return e(y)},get open(){return e(m)},onClose:()=>k(m,!1)}),n($,O),ze(),u()}ft(["click"]);var ea=p('<a class="inline-flex items-center gap-2.5 px-3 py-2 rounded-lg bg-card border border-border hover:bg-muted/50 transition-colors text-sm group"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <!></div> <span class="text-gray-400 group-hover:text-gray-300 transition-colors">Invited by <span class="font-medium text-gray-200"> </span></span></a>');function ta($,t){Ae(t,!0);const P=H.$subscribe(()=>t.pubkey?{filters:[{kinds:[Rr],authors:[t.pubkey],limit:1}],bufferMs:100}:void 0),g=D(()=>P.events[0]),u=D(()=>{if(e(g))return e(g).tags.find(m=>m[0]==="p")?.[1]});let y=oe(void 0),_=oe(null);Qe(()=>{if(!e(u)){k(y,void 0),k(_,null);return}H.fetchUser(e(u)).then(m=>{k(y,m,!0),m?.fetchProfile().then(N=>{k(_,N,!0)})})});var w=re(),h=S(w);{var f=m=>{var N=ea(),s=a(N),I=o(a(s),2);X(I,()=>Ke.Root,(V,Q)=>{Q(V,{get ndk(){return H},get pubkey(){return e(u)},children:(K,l)=>{var b=re(),R=S(b);X(R,()=>Ke.Avatar,(U,F)=>{F(U,{class:"w-6 h-6 rounded-full"})}),n(K,b)},$$slots:{default:!0}})}),r(s);var z=o(s,2),ee=o(a(z)),O=a(ee,!0);r(ee),r(z),r(N),E(()=>{Xe(N,"href",`/p/${e(y).npub}`),A(O,e(_)?.name||e(_)?.displayName||"Anonymous")}),n(m,N)};M(h,m=>{e(u)&&e(y)?.pubkey&&m(f)})}n($,w),ze()}var ra=p('<img alt="Banner" class="w-full h-full object-cover"/>'),aa=p('<button class="p-1 text-muted-foreground hover:text-muted-foreground transition-colors" aria-label="Share profile"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg></button>'),oa=p('<button class="px-4 py-2 rounded-full font-medium transition-colors bg-primary text-foreground hover:bg-primary-700 text-sm"><svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> </button>'),na=p('<div class="relative" data-user-dropdown=""><button class="p-2 rounded-full border border text-muted-foreground hover:bg-muted transition-colors" aria-label="More options"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),sa=p('<div class="mb-4"><!></div>'),ia=p('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 hover:text-primary"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg> <span> </span></a>'),la=p('<div class="bg-background border-b border-border"><div class="h-48 sm:h-64 relative"><!></div> <div class="px-4 sm:px-6 pb-4 relative z-10"><div class="flex gap-4 items-start -mt-12 sm:-mt-20 mb-4"><div class="shrink-0"><!></div> <div class="flex-1 mt-13 sm:mt-20 min-w-0"><div class="flex items-start justify-between gap-4 flex-wrap"><div class="flex-1 min-w-0"><h1 class="text-xl sm:text-2xl font-bold text-foreground"> </h1> <div class="flex items-center gap-2 mt-1"><p class="text-muted-foreground"> </p> <!></div> <div class="mt-2"><!></div></div> <div class="flex items-center gap-2"><!> <!></div></div></div></div> <!> <div class="flex flex-wrap gap-4 text-sm text-muted-foreground"><!></div> <div class="flex gap-6 mt-4"><div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div> <div><span class="font-semibold text-foreground"> </span> <span class="text-muted-foreground ml-1"> </span></div></div></div></div>');function da($,t){Ae(t,!0);const P=()=>Mt(Bt,"$t",g),[g,u]=Nt();let y=oe(null),_=oe(null);Qe(()=>{if(!t.pubkey){k(y,null),k(_,null);return}H.fetchUser(t.pubkey).then(s=>{k(y,s,!0),s?.fetchProfile().then(I=>{k(_,I,!0)})})});let w=oe(!1);function h(s){s.target.closest("[data-user-dropdown]")||k(w,!1)}var f=re();Pr("click",Cr,h);var m=S(f);{var N=s=>{var I=la(),z=a(I),ee=a(z);{var O=c=>{var v=ra();E(()=>Xe(v,"src",e(_).banner)),n(c,v)};M(ee,c=>{e(_)?.banner&&c(O)})}r(z);var V=o(z,2),Q=a(V),K=a(Q),l=a(K);X(l,()=>Ke.Root,(c,v)=>{v(c,{get ndk(){return H},get pubkey(){return t.pubkey},children:(L,W)=>{var Y=re(),i=S(Y);X(i,()=>Ke.Avatar,(x,C)=>{C(x,{class:"w-24 h-24 sm:w-48 sm:h-48 rounded-full border-4 border-black"})}),n(L,Y)},$$slots:{default:!0}})}),r(K);var b=o(K,2),R=a(b),U=a(R),F=a(U),G=a(F,!0);r(F);var Z=o(F,2),ue=a(Z),Ce=a(ue,!0);r(ue);var me=o(ue,2);{var Me=c=>{var v=aa();v.__click=function(...L){t.onShareProfile?.apply(this,L)},n(c,v)};M(me,c=>{t.onShareProfile&&c(Me)})}r(Z);var ae=o(Z,2),se=a(ae);ta(se,{get pubkey(){return t.pubkey}}),r(ae),r(U);var je=o(U,2),ie=a(je);{var Re=c=>{var v=oa();v.__click=function(...W){t.onEditProfile?.apply(this,W)};var L=o(a(v));r(v),E(W=>A(L,` ${W??""}`),[()=>P()("profile.editProfile")]),n(c,v)},q=c=>{Er(c,{get ndk(){return H},get target(){return t.pubkey},showIcon:!1,class:"px-4 py-2 rounded-full font-medium transition-colors bg-accent text-accent-foreground hover:bg-accent/90 text-sm"})};M(ie,c=>{t.isOwnProfile&&t.onEditProfile?c(Re):c(q,!1)})}var le=o(ie,2);{var ke=c=>{var v=na(),L=a(v);L.__click=Y=>{Y.stopPropagation(),k(w,!e(w))};var W=o(L,2);qr(W,{get pubkey(){return t.pubkey},get isOpen(){return e(w)},onClose:()=>k(w,!1),get onOpenCreatePack(){return t.onOpenCreatePack}}),r(v),n(c,v)};M(le,c=>{!t.isOwnProfile&&H.$currentUser&&t.onOpenCreatePack&&c(ke)})}r(je),r(R),r(b),r(Q);var He=o(Q,2);{var he=c=>{var v=sa(),L=a(v);Br(L,{get ndk(){return H},get content(){return e(_).about},class:"text-muted-foreground"}),r(v),n(c,v)};M(He,c=>{e(_)?.about&&c(he)})}var ve=o(He,2),de=a(ve);{var Se=c=>{var v=ia(),L=o(a(v),2),W=a(L,!0);r(L),r(v),E(Y=>{Xe(v,"href",e(_).website),A(W,Y)},[()=>e(_).website.replace(/^https?:\/\//,"")]),n(c,v)};M(de,c=>{e(_)?.website&&c(Se)})}r(ve);var we=o(ve,2),be=a(we),_e=a(be),Ue=a(_e,!0);r(_e);var Le=o(_e,2),Ne=a(Le,!0);r(Le),r(be);var Be=o(be,2),Ve=a(Be),We=a(Ve,!0);r(Ve);var T=o(Ve,2),j=a(T,!0);r(T),r(Be),r(we),r(V),r(I),E((c,v,L,W)=>{zt(z,c),A(G,e(_)?.name||"Anonymous"),A(Ce,v),A(Ue,t.notesCount),A(Ne,L),A(We,t.followingCount),A(j,W)},[()=>e(_)?.banner?"":`background: ${Dr(t.pubkey)}`,()=>e(_)?.nip05?`@${e(_).nip05.split("@")[0]}`:`${t.pubkey.slice(0,12)}...`,()=>P()("profile.tabs.notes"),()=>P()("profile.following")]),n(s,I)};M(m,s=>{t.pubkey&&s(N)})}n($,f),ze(),u()}ft(["click"]);var ca=p('<p class="text-foreground/80 text-sm"> </p>'),ua=Pe('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),va=Pe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),fa=p('<span class="text-sm font-medium"> </span> <!>',1),pa=Pe('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),ga=Pe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),ma=p('<span class="text-sm font-medium">Copy npub</span> <!>',1),ha=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path></svg> WhatsApp',1),ba=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg> X',1),_a=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg> Telegram',1),xa=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg> Facebook',1),ka=Pe('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> More Options',1),wa=p('<!> <div class="space-y-4"><div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl p-6 mb-6"><div class="flex flex-col items-center text-foreground"><div class="relative mb-4"><!></div> <h3 class="text-xl font-bold mb-1"> </h3> <!></div></div> <div class="flex justify-center mb-6"><!></div> <div class="space-y-3"><!> <!></div> <div class="space-y-2"><p class="text-sm text-muted-foreground">Share on:</p> <div class="grid grid-cols-2 gap-3"><!> <!> <!> <!></div> <!></div></div>',1),ya=p('<p class="text-foreground/80 text-sm"> </p>'),Pa=Pe('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Ca=Pe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Ma=p('<span class="text-sm font-medium"> </span> <!>',1),ja=Pe('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Sa=Pe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Ua=p('<span class="text-sm font-medium">Copy npub</span> <!>',1),Aa=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path></svg> WhatsApp',1),za=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg> X',1),La=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg> Telegram',1),Na=Pe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg> Facebook',1),Ba=Pe('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> More Options',1),Ea=p('<button type="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background shadow-xs hover:bg-accent hover:text-accent-foreground border h-9 px-4 py-2 w-full">Close</button>'),Oa=p('<!> <div class="space-y-4 px-4"><div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl p-6 mb-6"><div class="flex flex-col items-center text-foreground"><div class="relative mb-4"><!></div> <h3 class="text-xl font-bold mb-1"> </h3> <!></div></div> <div class="flex justify-center mb-6"><!></div> <div class="space-y-3"><!> <!></div> <div class="space-y-2"><p class="text-sm text-muted-foreground">Share on:</p> <div class="grid grid-cols-2 gap-3"><!> <!> <!> <!></div> <!></div></div> <!>',1);function Ra($,t){Ae(t,!0);let P=fe(t,"isOpen",15);const g=new rr("(min-width: 768px)");let u=oe(null);Qe(()=>{H.fetchUser(t.pubkey).then(O=>{O?.fetchProfile().then(V=>{k(u,V,!0)})})});let y=oe(!1),_=oe(!1);const w=`https://njump.me/${t.npub}`,h=D(()=>`Find me on Nostr: ${w}`);async function f(O,V){await navigator.clipboard.writeText(O),V==="url"?(k(y,!0),setTimeout(()=>k(y,!1),2e3)):(k(_,!0),setTimeout(()=>k(_,!1),2e3))}function m(O){const V=encodeURIComponent(e(h)),Q=encodeURIComponent(w),K={whatsapp:`https://wa.me/?text=${V}`,twitter:`https://twitter.com/intent/tweet?text=${V}`,telegram:`https://t.me/share/url?url=${Q}&text=${encodeURIComponent("Find me on Nostr")}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${Q}`};window.open(K[O],"_blank")}async function N(){if(navigator.share)try{await navigator.share({title:`${e(u)?.name||"Anonymous"} on Nostr`,text:"Find me on Nostr",url:w})}catch(O){console.error("Error sharing:",O)}}var s=re(),I=S(s);{var z=O=>{var V=re(),Q=S(V);X(Q,()=>nr,(K,l)=>{l(K,{get open(){return P()},onOpenChange:b=>{P(b),b||t.onClose()},children:(b,R)=>{var U=re(),F=S(U);X(F,()=>ar,(G,Z)=>{Z(G,{class:"max-w-md",children:(ue,Ce)=>{var me=wa(),Me=S(me);X(Me,()=>cr,(T,j)=>{j(T,{children:(c,v)=>{var L=re(),W=S(L);X(W,()=>or,(Y,i)=>{i(Y,{children:(x,C)=>{ne();var J=vt("Share Profile");n(x,J)},$$slots:{default:!0}})}),n(c,L)},$$slots:{default:!0}})});var ae=o(Me,2),se=a(ae),je=a(se),ie=a(je),Re=a(ie);X(Re,()=>Ke.Root,(T,j)=>{j(T,{get ndk(){return H},get pubkey(){return t.pubkey},children:(c,v)=>{var L=re(),W=S(L);X(W,()=>Ke.Avatar,(Y,i)=>{i(Y,{class:"w-20 h-20 ring-4 ring-white/20"})}),n(c,L)},$$slots:{default:!0}})}),r(ie);var q=o(ie,2),le=a(q,!0);r(q);var ke=o(q,2);{var He=T=>{var j=ca(),c=a(j);r(j),E(v=>A(c,`@${v??""}`),[()=>e(u).nip05.split("@")[0]]),n(T,j)};M(ke,T=>{e(u)?.nip05&&T(He)})}r(je),r(se);var he=o(se,2),ve=a(he);Qt(ve,{get value(){return w},size:200}),r(he);var de=o(he,2),Se=a(de);Te(Se,{variant:"outline",onclick:()=>f(w,"url"),class:"w-full justify-between",children:(T,j)=>{var c=fa(),v=S(c),L=a(v);r(v);var W=o(v,2);{var Y=x=>{var C=ua();n(x,C)},i=x=>{var C=va();n(x,C)};M(W,x=>{e(y)?x(Y):x(i,!1)})}E(x=>A(L,`njump.me/${x??""}...`),[()=>t.npub.slice(0,8)]),n(T,c)},$$slots:{default:!0}});var we=o(Se,2);Te(we,{variant:"outline",onclick:()=>f(t.npub,"npub"),class:"w-full justify-between",children:(T,j)=>{var c=ma(),v=o(S(c),2);{var L=Y=>{var i=pa();n(Y,i)},W=Y=>{var i=ga();n(Y,i)};M(v,Y=>{e(_)?Y(L):Y(W,!1)})}n(T,c)},$$slots:{default:!0}}),r(de);var be=o(de,2),_e=o(a(be),2),Ue=a(_e);Te(Ue,{onclick:()=>m("whatsapp"),class:"bg-green-500 hover:bg-green-600 text-white dark:text-white",children:(T,j)=>{var c=ha();ne(),n(T,c)},$$slots:{default:!0}});var Le=o(Ue,2);Te(Le,{variant:"outline",onclick:()=>m("twitter"),children:(T,j)=>{var c=ba();ne(),n(T,c)},$$slots:{default:!0}});var Ne=o(Le,2);Te(Ne,{onclick:()=>m("telegram"),class:"bg-blue-500 hover:bg-blue-600 text-white dark:text-white",children:(T,j)=>{var c=_a();ne(),n(T,c)},$$slots:{default:!0}});var Be=o(Ne,2);Te(Be,{onclick:()=>m("facebook"),class:"bg-blue-600 hover:bg-blue-700 text-white dark:text-white",children:(T,j)=>{var c=xa();ne(),n(T,c)},$$slots:{default:!0}}),r(_e);var Ve=o(_e,2);{var We=T=>{Te(T,{onclick:N,class:"w-full mt-3",children:(j,c)=>{var v=ka();ne(),n(j,v)},$$slots:{default:!0}})};M(Ve,T=>{typeof navigator<"u"&&navigator.share&&T(We)})}r(be),r(ae),E(()=>A(le,e(u)?.name||"Anonymous")),n(ue,me)},$$slots:{default:!0}})}),n(b,U)},$$slots:{default:!0}})}),n(O,V)},ee=O=>{var V=re(),Q=S(V);X(Q,()=>lr,(K,l)=>{l(K,{get open(){return P()},onOpenChange:b=>{P(b),b||t.onClose()},children:(b,R)=>{var U=re(),F=S(U);X(F,()=>sr,(G,Z)=>{Z(G,{children:(ue,Ce)=>{var me=Oa(),Me=S(me);X(Me,()=>ur,(j,c)=>{c(j,{class:"text-left",children:(v,L)=>{var W=re(),Y=S(W);X(Y,()=>ir,(i,x)=>{x(i,{children:(C,J)=>{ne();var gt=vt("Share Profile");n(C,gt)},$$slots:{default:!0}})}),n(v,W)},$$slots:{default:!0}})});var ae=o(Me,2),se=a(ae),je=a(se),ie=a(je),Re=a(ie);X(Re,()=>Ke.Root,(j,c)=>{c(j,{get ndk(){return H},get pubkey(){return t.pubkey},children:(v,L)=>{var W=re(),Y=S(W);X(Y,()=>Ke.Avatar,(i,x)=>{x(i,{class:"w-20 h-20 ring-4 ring-white/20"})}),n(v,W)},$$slots:{default:!0}})}),r(ie);var q=o(ie,2),le=a(q,!0);r(q);var ke=o(q,2);{var He=j=>{var c=ya(),v=a(c);r(c),E(L=>A(v,`@${L??""}`),[()=>e(u).nip05.split("@")[0]]),n(j,c)};M(ke,j=>{e(u)?.nip05&&j(He)})}r(je),r(se);var he=o(se,2),ve=a(he);Qt(ve,{get value(){return w},size:200}),r(he);var de=o(he,2),Se=a(de);Te(Se,{variant:"outline",onclick:()=>f(w,"url"),class:"w-full justify-between",children:(j,c)=>{var v=Ma(),L=S(v),W=a(L);r(L);var Y=o(L,2);{var i=C=>{var J=Pa();n(C,J)},x=C=>{var J=Ca();n(C,J)};M(Y,C=>{e(y)?C(i):C(x,!1)})}E(C=>A(W,`njump.me/${C??""}...`),[()=>t.npub.slice(0,8)]),n(j,v)},$$slots:{default:!0}});var we=o(Se,2);Te(we,{variant:"outline",onclick:()=>f(t.npub,"npub"),class:"w-full justify-between",children:(j,c)=>{var v=Ua(),L=o(S(v),2);{var W=i=>{var x=ja();n(i,x)},Y=i=>{var x=Sa();n(i,x)};M(L,i=>{e(_)?i(W):i(Y,!1)})}n(j,v)},$$slots:{default:!0}}),r(de);var be=o(de,2),_e=o(a(be),2),Ue=a(_e);Te(Ue,{onclick:()=>m("whatsapp"),class:"bg-green-500 hover:bg-green-600 text-white dark:text-white",children:(j,c)=>{var v=Aa();ne(),n(j,v)},$$slots:{default:!0}});var Le=o(Ue,2);Te(Le,{variant:"outline",onclick:()=>m("twitter"),children:(j,c)=>{var v=za();ne(),n(j,v)},$$slots:{default:!0}});var Ne=o(Le,2);Te(Ne,{onclick:()=>m("telegram"),class:"bg-blue-500 hover:bg-blue-600 text-white dark:text-white",children:(j,c)=>{var v=La();ne(),n(j,v)},$$slots:{default:!0}});var Be=o(Ne,2);Te(Be,{onclick:()=>m("facebook"),class:"bg-blue-600 hover:bg-blue-700 text-white dark:text-white",children:(j,c)=>{var v=Na();ne(),n(j,v)},$$slots:{default:!0}}),r(_e);var Ve=o(_e,2);{var We=j=>{Te(j,{onclick:N,class:"w-full mt-3",children:(c,v)=>{var L=Ba();ne(),n(c,L)},$$slots:{default:!0}})};M(Ve,j=>{typeof navigator<"u"&&navigator.share&&j(We)})}r(be),r(ae);var T=o(ae,2);X(T,()=>dr,(j,c)=>{c(j,{class:"pt-2",children:(v,L)=>{var W=Ea();W.__click=()=>{P(!1),t.onClose()},n(v,W)},$$slots:{default:!0}})}),E(()=>A(le,e(u)?.name||"Anonymous")),n(ue,me)},$$slots:{default:!0}})}),n(b,U)},$$slots:{default:!0}})}),n(O,V)};M(I,O=>{g.current?O(z):O(ee,!1)})}n($,s),ze()}ft(["click"]);const yt=Symbol("article");var Da=p("<div><!></div>");function Ot($,t){Ae(t,!0);let P=fe(t,"class",3,"");const g=Lr(t.ndk);Mr(yt,{get ndk(){return g},get article(){return t.article},get onclick(){return t.onclick}});var y=Da(),_=a(y);Ir(_,()=>t.children),r(y),E(()=>Oe(y,1,`contents ${P()??""}`)),n($,y),ze()}var Ha=p('<img loading="lazy"/>');function fr($,t){Ae(t,!0);let P=fe(t,"class",3,"");const g=jt(yt);if(!g)throw new Error("Article.Image must be used within Article.Root");const u=D(()=>g.article.image);var y=re(),_=S(y);{var w=h=>{var f=Ha();E(m=>{Xe(f,"src",e(u)),Xe(f,"alt",g.article.title||"Article cover"),Oe(f,1,m)},[()=>pt(tt(P(),"object-cover"))]),n(h,f)};M(_,h=>{e(u)&&h(w)})}n($,y),ze()}var Fa=p("<h3> </h3>");function Rt($,t){Ae(t,!0);let P=fe(t,"class",3,"");const g=jt(yt);if(!g)throw new Error("Article.Title must be used within Article.Root");const u=D(()=>g.article.title||"Untitled");var y=Fa(),_=a(y,!0);r(y),E(()=>{Oe(y,1,pt(P())),A(_,e(u))}),n($,y),ze()}var Ia=p("<p> </p>");function Dt($,t){Ae(t,!0);let P=fe(t,"maxLength",3,150),g=fe(t,"class",3,"");const u=jt(yt);if(!u)throw new Error("Article.Summary must be used within Article.Root");const y=D(()=>{const h=u.article.summary||u.article.content||"";return h.length<=P()?h:h.slice(0,P())+"..."});var _=Ia(),w=a(_,!0);r(_),E(()=>{Oe(_,1,pt(g())),A(w,e(y))}),n($,_),ze()}var Ta=p("<span> </span>");function Ht($,t){Ae(t,!0);let P=fe(t,"wordsPerMinute",3,200),g=fe(t,"showSuffix",3,!0),u=fe(t,"class",3,"");const y=jt(yt);if(!y)throw new Error("Article.ReadingTime must be used within Article.Root");const _=D(()=>{const N=(y.article.content||"").split(/\s+/).filter(I=>I.length>0).length,s=Math.ceil(N/P());return s===0?"":g()?`${s} min read`:`${s}`});var w=re(),h=S(w);{var f=m=>{var N=Ta(),s=a(N,!0);r(N),E(()=>{Oe(N,1,pt(u())),A(s,e(_))}),n(m,N)};M(h,m=>{e(_)&&m(f)})}n($,w),ze()}var Va=p('<div class="flex items-start gap-4 sm:gap-6"><div class="flex-1 min-w-0"><!> <!> <!></div> <div><!></div></div>');function $a($,t){Ae(t,!0);let P=fe(t,"imageSize",3,"medium"),g=fe(t,"class",3,"");const u=D(()=>{switch(P()){case"small":return"w-32 h-24 sm:w-36 sm:h-28";case"large":return"w-48 h-36 sm:w-56 sm:h-40";default:return"w-40 h-32 sm:w-48 sm:h-36"}}),y=tt("bg-background","group block w-full","p-4 sm:p-6","transition-colors","border-b border-border last:border-b-0","text-left",g()),_=t.onclick?"hover:bg-card/30 cursor-pointer":"";Ot($,{get ndk(){return t.ndk},get article(){return t.article},children:(w,h)=>{var f=re(),m=S(f);Et(m,()=>t.onclick?"button":"div",!1,(N,s)=>{Lt(N,l=>({"data-article-card-medium":"","data-image-size":P(),type:t.onclick?"button":void 0,role:t.onclick?"button":void 0,onclick:t.onclick,class:l}),[()=>tt(y,_)]);var I=Va(),z=a(I),ee=a(z);Rt(ee,{class:"text-xl sm:text-2xl mb-2 font-serif line-clamp-2"});var O=o(ee,2);Dt(O,{class:"text-sm text-foreground/80 mb-4 leading-relaxed line-clamp-3",maxLength:150});var V=o(O,2);Ht(V,{class:"text-xs sm:text-sm"}),r(z);var Q=o(z,2),K=a(Q);fr(K,{class:"w-full h-full object-cover"}),r(Q),r(I),E(l=>Oe(Q,1,l),[()=>pt(tt("flex-shrink-0 rounded-lg overflow-hidden",e(u)))]),n(s,I)}),n(w,f)},$$slots:{default:!0}}),ze()}var Ka=p('<div class="absolute inset-0"><img class="w-full h-full object-cover"/></div>'),Wa=p('<div class="mb-4"><span class="inline-block px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-sm text-white text-xs font-semibold tracking-wider uppercase"> </span></div>'),Ya=p("<time> </time> <span>â€¢</span>",1),Ga=p('<div class="flex items-center gap-3 text-white/80"><!> <div class="flex flex-col"><!> <div class="flex items-center gap-2 text-sm"><!> <!></div></div></div>'),Qa=p('<!> <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/20"></div> <div class="relative h-full flex flex-col justify-end p-4 md:p-6 lg:p-8"><!> <!> <!> <!></div>',1);function Xa($,t){Ae(t,!0);let P=fe(t,"height",3,"h-[500px]"),g=fe(t,"class",3,"");const u=D(()=>t.article.published_at),y=D(()=>t.article.image),_=D(()=>e(u)?Nr(e(u)):null),w=tt("article-card-hero","group relative w-full rounded-3xl overflow-hidden","bg-gradient-to-br from-purple-500 via-purple-600 to-blue-600","transition-all duration-300","text-left",P(),g()),h=t.onclick?"hover:shadow-2xl hover:shadow-purple-500/20 cursor-pointer":"";Ot($,{get ndk(){return t.ndk},get article(){return t.article},children:(f,m)=>{var N=re(),s=S(N);Et(s,()=>t.onclick?"button":"div",!1,(I,z)=>{Lt(I,F=>({"data-article-card-hero":"",type:t.onclick?"button":void 0,role:t.onclick?"button":void 0,onclick:t.onclick,class:F}),[()=>tt(w,h)]);var ee=Qa(),O=S(ee);{var V=F=>{var G=Ka(),Z=a(G);r(G),E(()=>{Xe(Z,"src",e(y)),Xe(Z,"alt",t.article.title||"Article")}),n(F,G)};M(O,F=>{e(y)&&F(V)})}var Q=o(O,4),K=a(Q);{var l=F=>{var G=Wa(),Z=a(G),ue=a(Z,!0);r(Z),r(G),E(()=>A(ue,t.badgeText)),n(F,G)};M(K,F=>{t.badgeText&&F(l)})}var b=o(K,2);Rt(b,{class:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 leading-tight line-clamp-1"});var R=o(b,2);Dt(R,{class:"text-base md:text-lg text-white/90 mb-6 leading-relaxed max-w-3xl line-clamp-2",maxLength:200});var U=o(R,2);X(U,()=>Ke.Root,(F,G)=>{G(F,{get ndk(){return t.ndk},get user(){return t.article.author},children:(Z,ue)=>{var Ce=Ga(),me=a(Ce);X(me,()=>Ke.Avatar,(q,le)=>{le(q,{class:"w-10 h-10"})});var Me=o(me,2),ae=a(Me);X(ae,()=>Ke.Name,(q,le)=>{le(q,{class:"font-semibold text-white",field:"displayName"})});var se=o(ae,2),je=a(se);{var ie=q=>{var le=Ya(),ke=S(le),He=a(ke);r(ke),ne(2),E(()=>A(He,`Published ${e(_)??""}`)),n(q,le)};M(je,q=>{e(_)&&q(ie)})}var Re=o(je,2);Ht(Re,{}),r(se),r(Me),r(Ce),n(Z,Ce)},$$slots:{default:!0}})}),r(Q),n(z,ee)}),n(f,N)},$$slots:{default:!0}}),ze()}var Ja=p('<div><!> <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div></div> <div class="p-4 flex flex-col flex-1 min-h-0 text-left"><!> <!> <div class="mt-auto pt-2 border-t border-border"><div class="flex items-center justify-between"><!> <svg width="16" height="16" class="text-primary opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div></div>',1);function Za($,t){Ae(t,!0);let P=fe(t,"width",3,"w-[320px]"),g=fe(t,"height",3,"h-[420px]"),u=fe(t,"imageHeight",3,"h-56"),y=fe(t,"class",3,"");const _=tt("article-card-portrait","group flex flex-col flex-shrink-0","rounded-2xl overflow-hidden","bg-card","transition-all duration-300","text-left",P(),g(),y()),w=t.onclick?"hover:bg-muted hover:scale-[1.02] hover:shadow-2xl hover:shadow-primary/10 cursor-pointer":"";Ot($,{get ndk(){return t.ndk},get article(){return t.article},children:(h,f)=>{var m=re(),N=S(m);Et(N,()=>t.onclick?"button":"div",!1,(s,I)=>{Lt(s,U=>({"data-article-card-portrait":"",type:t.onclick?"button":void 0,role:t.onclick?"button":void 0,onclick:t.onclick,class:U}),[()=>tt(_,w)]);var z=Ja(),ee=S(z),O=a(ee);fr(O,{class:"w-full h-full object-cover"}),ne(2),r(ee);var V=o(ee,2),Q=a(V);Rt(Q,{class:"text-base mb-2 leading-snug font-serif text-left line-clamp-2"});var K=o(Q,2);Dt(K,{class:"text-xs mb-3 leading-relaxed flex-1 text-left line-clamp-3",maxLength:100});var l=o(K,2),b=a(l),R=a(b);Ht(R,{class:"text-xs"}),ne(2),r(b),r(l),r(V),E(U=>Oe(ee,1,U),[()=>pt(tt("relative overflow-hidden",u()))]),n(I,z)}),n(h,m)},$$slots:{default:!0}}),ze()}function qa($,t){Ae(t,!0);let P=fe(t,"variant",3,"default");function g(h){h.preventDefault();const f=t.article.author,m=Fr(t.article,f);window.location.href=m}var u=re(),y=S(u);{var _=h=>{Xa(h,{get ndk(){return H},get article(){return t.article},onclick:g,height:"h-96",class:"mb-6"})},w=h=>{var f=re(),m=S(f);{var N=I=>{Za(I,{get ndk(){return H},get article(){return t.article},onclick:g,class:"hover:shadow-lg transition-shadow"})},s=I=>{{let z=D(()=>P()==="compact"?"small":"medium");$a(I,{get ndk(){return H},get article(){return t.article},get imageSize(){return e(z)},onclick:g,class:"hover:bg-accent/50 transition-colors"})}};M(m,I=>{P()==="portrait"?I(N):I(s,!1)},!0)}n(h,f)};M(y,h=>{P()==="hero"?h(_):h(w,!1)})}n($,u),ze()}var eo=p('<div class="divide-y divide-neutral-800/50"></div>');function to($,t){Ae(t,!0);const P=fe(t,"emptyMessage",3,"No articles yet");var g=re(),u=S(g);{var y=w=>{vr(w,{icon:"article",get title(){return P()}})},_=w=>{var h=eo();dt(h,21,()=>t.articles,f=>f.id,(f,m)=>{qa(f,{get article(){return e(m)}})}),r(h),n(w,h)};M(u,w=>{t.articles.length===0?w(y):w(_,!1)})}n($,g),ze()}var ro=p('<div class="divide-y divide-neutral-800/50"></div>');function ao($,t){Ae(t,!0);const P=fe(t,"emptyMessage",3,"No highlights yet");var g=re(),u=S(g);{var y=w=>{vr(w,{icon:"highlight",get title(){return P()}})},_=w=>{var h=ro();dt(h,21,()=>t.highlights,f=>f.id,(f,m)=>{Tr(f,{get event(){return e(m)}})}),r(h),n(w,h)};M(u,w=>{t.highlights.length===0?w(y):w(_,!1)})}n($,g),ze()}var oo=p('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),no=p('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),so=p('<button type="button" class="relative cursor-pointer"><!></button>'),io=p('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),lo=p('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>');function co($,t){Ae(t,!0),fe(t,"variant",3,"default");let P=oe(void 0);Qe(()=>{t.pack.author?k(P,t.pack.author,!0):H.fetchUser(t.pack.pubkey).then(l=>{k(P,l,!0)})});const g=D(()=>Vr(t.pack,e(P)));function u(){At(e(g))}var y=lo();y.__click=u,y.__keydown=l=>l.key==="Enter"&&u();var _=a(y);{var w=l=>{var b=oo(),R=a(b);r(b),E(()=>{Xe(R,"src",t.pack.image),Xe(R,"alt",t.pack.title)}),n(l,b)};M(_,l=>{t.pack.image&&l(w)})}var h=o(_,2),f=a(h),m=a(f),N=a(m,!0);r(m);var s=o(m,2),I=a(s);r(s),r(f);var z=o(f,2);{var ee=l=>{var b=no(),R=a(b,!0);r(b),E(()=>A(R,t.pack.description)),n(l,b)};M(z,l=>{t.pack.description&&l(ee)})}var O=o(z,2),V=a(O);dt(V,18,()=>t.pack.pubkeys.slice(0,4),l=>l,(l,b,R)=>{var U=so();U.__click=G=>{G.stopPropagation(),At($r(b))};var F=a(U);X(F,()=>Ke.Root,(G,Z)=>{Z(G,{get ndk(){return H},get pubkey(){return b},children:(ue,Ce)=>{var me=re(),Me=S(me);X(Me,()=>Ke.Avatar,(ae,se)=>{se(ae,{class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"})}),n(ue,me)},$$slots:{default:!0}})}),r(U),E(()=>zt(U,`z-index: ${4-e(R)}`)),n(l,U)});var Q=o(V,2);{var K=l=>{var b=io(),R=a(b),U=a(R);r(R),r(b),E(()=>A(U,`+${t.pack.pubkeys.length-4}`)),n(l,b)};M(Q,l=>{t.pack.pubkeys.length>4&&l(K)})}r(O),r(h),r(y),E(()=>{A(N,t.pack.title),A(I,`${t.pack.pubkeys.length??""} members`)}),n($,y),ze()}ft(["click","keydown"]);var uo=p('<div class="bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium text-green-800 dark:text-green-200">Profile updated successfully!</span></div>'),vo=p('<div class="bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3"><svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-medium text-red-800 dark:text-red-200"> </span></div>'),fo=p('<div class="w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),po=p('<svg class="w-10 h-10 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-foreground text-sm font-medium">Click to upload banner</span>',1),go=p('<img alt="Profile" class="w-full h-full object-cover"/>'),mo=p('<span class="text-foreground text-2xl font-bold"> </span>'),ho=p('<div class="flex flex-col items-center gap-1"><div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-xs"> </span></div>'),bo=Pe('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),_o=p('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Saving...</span>',1),xo=p("<span>Save Profile</span>"),ko=p('<div class="flex justify-end pt-4"><button type="button" class="px-6 py-3 bg-primary hover:bg-accent-dark text-foreground font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!></button></div>'),wo=p('<div class="max-w-2xl mx-auto space-y-8"><!> <!> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Banner Image</label> <input type="file" accept="image/*" class="hidden"/> <button type="button" class="w-full h-48 rounded-xl overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:opacity-90 transition-opacity"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button></div> <div class="space-y-2"><label class="block text-sm font-medium text-foreground">Profile Picture</label> <input type="file" accept="image/*" class="hidden"/> <div class="flex items-center gap-4"><button type="button" class="w-24 h-24 rounded-full overflow-hidden relative group bg-gradient-to-br from-primary-500 to-primary-600 hover:ring-4 hover:ring-orange-500/20 transition-all flex items-center justify-center"><!> <div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><!></div></button> <div class="flex-1"><input type="url" placeholder="Or paste image URL" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div></div></div> <div class="space-y-2"><label for="name" class="block text-sm font-medium text-foreground">Name</label> <input id="name" type="text" placeholder="Satoshi Nakamoto" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="displayName" class="block text-sm font-medium text-foreground">Display Name <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="displayName" type="text" placeholder="satoshi" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="about-textarea" class="block text-sm font-medium text-foreground">About</label> <textarea id="about-textarea" placeholder="Tell the world about yourself..." rows="5" class="w-full px-4 py-3 rounded-lg border border bg-card text-foreground placeholder-neutral-500 resize-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"></textarea></div> <div class="space-y-2"><label for="nip05" class="block text-sm font-medium text-foreground">NIP-05 Verification <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="nip05" type="text" placeholder="name@domain.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="lud16" class="block text-sm font-medium text-foreground">Lightning Address <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="lud16" type="text" placeholder="name@getalby.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="website" class="block text-sm font-medium text-foreground">Website <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="website" type="url" placeholder="https://example.com" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/></div> <div class="space-y-2"><label for="hashtags" class="block text-sm font-medium text-foreground">Interest Hashtags <span class="text-muted-foreground text-xs font-normal">(optional)</span></label> <input id="hashtags" type="text" placeholder="bitcoin, nostr, freedom (comma-separated)" class="w-full px-4 py-2 rounded-lg border border bg-card text-foreground placeholder-neutral-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"/> <p class="text-xs text-muted-foreground">Add hashtags that describe your interests. Separate multiple tags with commas.</p></div> <!></div>');function qt($,t){Ae(t,!0);let P=fe(t,"hideSubmitButton",3,!1),g=D(()=>H.$currentUser),u=oe(null);Qe(()=>{const i=e(g)?.pubkey;if(!i){k(u,null);return}H.fetchUser(i).then(x=>{x?.fetchProfile().then(C=>{k(u,C,!0)})})});let y=oe(null);Qe(()=>{if(!e(g)?.pubkey){k(y,null);return}H.fetchEvent({kinds:[0],authors:[e(g).pubkey]}).then(i=>{k(y,i||null,!0)})});let _=oe(!1),w=oe(!1),h=oe(null),f=D(()=>e(g)?new Wr(H):null),m=D(()=>e(f)?Jt(e(f)):null),N=D(()=>e(f)?Jt(e(f)):null),s=oe(er({name:e(u)?.name||"",displayName:e(u)?.displayName||"",about:e(u)?.about||"",picture:e(u)?.image||"",banner:e(u)?.banner||"",nip05:e(u)?.nip05||"",lud16:e(u)?.lud16||"",website:e(u)?.website||"",hashtags:""}));Qe(()=>{if(e(u).name||e(u).displayName||e(u).about||e(u).image||e(u).banner){const i=e(y)?.tags?.filter(x=>x[0]==="t")?.map(x=>x[1])?.join(", ")||"";k(s,{name:e(u).name||"",displayName:e(u).displayName||"",about:e(u).about||"",picture:e(u).image||"",banner:e(u).banner||"",nip05:e(u).nip05||"",lud16:e(u).lud16||"",website:e(u).website||"",hashtags:i},!0)}}),Qe(()=>{t.onSubmit&&t.onSubmit(V)}),Qe(()=>{if(t.onFormStateChange){const i=e(m)?.status==="uploading"||e(N)?.status==="uploading";t.onFormStateChange({isSubmitting:e(_),isUploading:i})}});let I,z;async function ee(i){const C=i.target.files?.[0];if(C){if(!e(m)){k(h,"Upload not available. Please ensure you are logged in.");return}if(!C.type.startsWith("image/")){k(h,"Please select an image file");return}k(h,null);try{const J={fallbackServer:"https://blossom.primal.net"};console.log("Calling pictureUpload.upload with options:",J),await e(m).upload(C,J),e(m).result?.url&&(e(s).picture=e(m).result.url)}catch(J){console.error("Upload failed:",J),k(h,"Failed to upload image. Please try again.")}}}async function O(i){const C=i.target.files?.[0];if(C){if(!e(N)){k(h,"Upload not available. Please ensure you are logged in.");return}if(!C.type.startsWith("image/")){k(h,"Please select an image file");return}if(C.size>5*1024*1024){k(h,"Image size must be less than 5MB");return}k(h,null);try{await e(N).upload(C,{fallbackServer:"https://blossom.primal.net"}),e(N).result?.url&&(e(s).banner=e(N).result.url)}catch(J){console.error("Upload failed:",J),k(h,"Failed to upload banner. Please try again.")}}}async function V(){if(!H.signer){k(h,"No signer available");return}k(_,!0),k(h,null),k(w,!1);try{const i=new tr(H);if(i.kind=0,i.content=JSON.stringify({name:e(s).name,display_name:e(s).displayName,about:e(s).about,picture:e(s).picture,banner:e(s).banner,nip05:e(s).nip05,lud16:e(s).lud16,website:e(s).website}),e(s).hashtags.trim()){const C=e(s).hashtags.split(",").map(J=>J.trim().toLowerCase()).filter(J=>J.length>0);i.tags=C.map(J=>["t",J])}await i.publishReplaceable();const x=Ur.fromRelayUrls(["wss://purplepag.es/",...Ar],H);i.publishReplaceable(x),k(w,!0),setTimeout(()=>k(w,!1),3e3)}catch(i){console.error("Failed to save profile:",i),k(h,"Failed to save profile. Please try again.")}finally{k(_,!1)}}function Q(i){return i?i.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"?"}var K=wo(),l=a(K);{var b=i=>{var x=uo();n(i,x)};M(l,i=>{e(w)&&i(b)})}var R=o(l,2);{var U=i=>{var x=vo(),C=o(a(x),2),J=a(C,!0);r(C),r(x),E(()=>A(J,e(h))),n(i,x)};M(R,i=>{e(h)&&i(U)})}var F=o(R,2),G=o(a(F),2);G.__change=O,Xt(G,i=>z=i,()=>z);var Z=o(G,2);Z.__click=()=>z?.click();var ue=a(Z),Ce=a(ue);{var me=i=>{var x=fo(),C=o(S(x),2),J=a(C);r(C),E(()=>A(J,`${e(N).progress?.percentage??""}%`)),n(i,x)},Me=i=>{var x=po();ne(2),n(i,x)};M(Ce,i=>{e(N)?.status==="uploading"?i(me):i(Me,!1)})}r(ue),r(Z),r(F);var ae=o(F,2),se=o(a(ae),2);se.__change=ee,Xt(se,i=>I=i,()=>I);var je=o(se,2),ie=a(je);ie.__click=()=>I?.click();var Re=a(ie);{var q=i=>{var x=go();E(()=>Xe(x,"src",e(s).picture)),n(i,x)},le=i=>{var x=mo(),C=a(x,!0);r(x),E(J=>A(C,J),[()=>Q(e(s).name)]),n(i,x)};M(Re,i=>{e(s).picture?i(q):i(le,!1)})}var ke=o(Re,2),He=a(ke);{var he=i=>{var x=ho(),C=o(a(x),2),J=a(C);r(C),r(x),E(()=>A(J,`${e(m).progress?.percentage??""}%`)),n(i,x)},ve=i=>{var x=bo();n(i,x)};M(He,i=>{e(m)?.status==="uploading"?i(he):i(ve,!1)})}r(ke),r(ie);var de=o(ie,2),Se=a(de);st(Se),r(de),r(je),r(ae);var we=o(ae,2),be=o(a(we),2);st(be),r(we);var _e=o(we,2),Ue=o(a(_e),2);st(Ue),r(_e);var Le=o(_e,2),Ne=o(a(Le),2);jr(Ne),r(Le);var Be=o(Le,2),Ve=o(a(Be),2);st(Ve),r(Be);var We=o(Be,2),T=o(a(We),2);st(T),r(We);var j=o(We,2),c=o(a(j),2);st(c),r(j);var v=o(j,2),L=o(a(v),2);st(L),ne(2),r(v);var W=o(v,2);{var Y=i=>{var x=ko(),C=a(x);C.__click=V;var J=a(C);{var gt=Je=>{var ht=_o();ne(2),n(Je,ht)},mt=Je=>{var ht=xo();n(Je,ht)};M(J,Je=>{e(_)?Je(gt):Je(mt,!1)})}r(C),r(x),E(()=>C.disabled=e(_)||e(m)?.status==="uploading"||e(N)?.status==="uploading"),n(i,x)};M(W,i=>{P()||i(Y)})}r(K),E(()=>{Z.disabled=e(N)?.status==="uploading",zt(Z,e(s).banner?`background-image: url(${e(s).banner}); background-size: cover; background-position: center;`:""),ie.disabled=e(m)?.status==="uploading",Se.disabled=e(m)?.status==="uploading"}),rt(Se,()=>e(s).picture,i=>e(s).picture=i),rt(be,()=>e(s).name,i=>e(s).name=i),rt(Ue,()=>e(s).displayName,i=>e(s).displayName=i),rt(Ne,()=>e(s).about,i=>e(s).about=i),rt(Ve,()=>e(s).nip05,i=>e(s).nip05=i),rt(T,()=>e(s).lud16,i=>e(s).lud16=i),rt(c,()=>e(s).website,i=>e(s).website=i),rt(L,()=>e(s).hashtags,i=>e(s).hashtags=i),n($,K),ze()}ft(["change","click"]);var yo=p('<div class="text-center py-8 text-muted-foreground"> </div>'),Po=p('<div class="divide-y divide-neutral-800/50"></div>'),Co=p("<!> <!>",1),Mo=p('<div class="text-center py-8 text-muted-foreground"> </div>'),jo=p('<div class="divide-y divide-neutral-800/50"></div>'),So=p("<!> <!>",1),Uo=p('<div class="sm:p-4"><!></div> <!>',1),Ao=p("<!> <!>",1),zo=p("<!> <!>",1),Lo=p('<div class="grid gap-4 md:grid-cols-2"></div>'),No=p('<div class="text-center py-8 text-muted-foreground"> </div>'),Bo=p('<div class="p-4 space-y-4"><div class="flex gap-2 mb-4"><button> </button> <button> </button> <button> </button></div> <!></div> <!>',1),Eo=p("<!> <!>",1),Oo=p('<!> <div class="py-4"><!></div>',1),Ro=p("<!> <!>",1),Do=p('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Saving...</span>',1),Ho=p("<span>Save Profile</span>"),Fo=p('<button type="button" class="w-full px-6 py-3 bg-primary hover:bg-accent-dark text-foreground font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button>'),Io=p('<!> <div class="overflow-y-auto px-4 pb-4"><!></div> <!>',1),To=p('<div class="w-full"><!> <div class="sticky top-0 z-30 bg-background/80 backdrop-blur-sm border-b border-border"><div class="flex justify-around lg:justify-start px-2 lg:px-4 overflow-x-auto"><button aria-label="Notes"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Replies"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Media"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Articles"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Highlights"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> <span class="hidden lg:inline"> </span></button> <button aria-label="Follow Packs"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <span class="hidden lg:inline"> </span></button></div></div> <div><!> <!> <!> <!> <!> <!></div> <!> <!> <!></div>');function An($,t){Ae(t,!0);const P=()=>Mt(Sr,"$page",u),g=()=>Mt(Bt,"$t",u),[u,y]=Nt(),_=D(()=>P().params.identifier);let w=oe(void 0),h=oe(null);Qe(()=>{H.fetchUser(e(_)).then(d=>{k(w,d,!0),d?.pubkey&&H.fetchUser(d.pubkey).then(B=>{B?.fetchProfile().then(te=>{k(h,te,!0)})})})});const f=D(()=>e(w)?.pubkey),m=D(()=>H.$currentPubkey===e(f)),N=new rr("(min-width: 768px)");let s=oe("notes"),I=oe(!1),z=oe("all"),ee=oe(!1),O=oe(!1),V=oe(null),Q=oe(er({isSubmitting:!1,isUploading:!1}));const K=lt(H,()=>e(f)?{filters:[{kinds:[Yt.Text],authors:[e(f)],limit:200}]}:void 0,{initialLimit:20,pageSize:20}),l=lt(H,()=>e(s)==="media"&&e(f)?{filters:[{kinds:[20,21,22],authors:[e(f)],limit:200}]}:void 0,{initialLimit:30,pageSize:30}),b=lt(H,()=>e(s)==="articles"&&e(f)?{filters:[{kinds:[Yt.Article],authors:[e(f)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),R=lt(H,()=>e(s)==="highlights"&&e(f)?{filters:[{kinds:[9802],authors:[e(f)],limit:100}]}:void 0,{initialLimit:10,pageSize:10}),U=lt(H,()=>e(s)==="packs"&&e(f)?{filters:[{kinds:[39089,39092],authors:[e(f)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),F=lt(H,()=>e(s)==="packs"&&e(f)?{filters:[{kinds:[39089,39092],"#p":[e(f)],limit:100}]}:void 0,{initialLimit:20,pageSize:20}),G=H.$subscribe(()=>e(f)?{filters:[{kinds:[3],authors:[e(f)],limit:1}],bufferMs:100}:void 0),Z=D(()=>{const d=G.events[0];return d?d.tags.filter(B=>B[0]==="p").length:0}),ue=D(()=>K.events.filter(d=>!d.tags.some(B=>B[0]==="e"))),Ce=D(()=>K.events.filter(d=>d.tags.some(B=>B[0]==="e")));function me(d){return/(https?:\/\/[^\s]+\.(jpg|jpeg|png|gif|webp|svg|avif|mp4|webm|mov|avi|mkv))/gi.test(d)}const Me=D(()=>K.allEvents.filter(d=>me(d.content))),ae=D(()=>[...l.events,...e(Me)]),se=D(()=>b.events.map(d=>zr.from(d))),je=D(()=>R.events),ie=D(()=>U.events.map(d=>({id:d.id||"",title:d.tagValue("title")||"Untitled Pack",description:d.tagValue("description"),image:d.tagValue("image"),pubkeys:d.tags.filter(B=>B[0]==="p").map(B=>B[1]),encode:()=>d.encode(),kind:d.kind||39089,pubkey:d.pubkey,created_at:d.created_at||0}))),Re=D(()=>F.events.map(d=>({id:d.id||"",title:d.tagValue("title")||"Untitled Pack",description:d.tagValue("description"),image:d.tagValue("image"),pubkeys:d.tags.filter(B=>B[0]==="p").map(B=>B[1]),encode:()=>d.encode(),kind:d.kind||39089,pubkey:d.pubkey,created_at:d.created_at||0}))),q=D(()=>[...e(ie),...e(Re)]),le=D(()=>e(z)==="created"?e(ie):e(z)==="appears"?e(Re):e(q)),ke=D(()=>e(w)?.npub||"");function He(){k(ee,!0)}function he(){e(s)==="notes"||e(s)==="replies"?K.loadMore():e(s)==="media"?l.loadMore():e(s)==="articles"?b.loadMore():e(s)==="highlights"?R.loadMore():e(s)==="packs"&&(e(z)==="created"?U.loadMore():(e(z)==="appears"||U.loadMore(),F.loadMore()))}const ve=D(()=>e(s)==="notes"||e(s)==="replies"?K.hasMore:e(s)==="media"?l.hasMore:e(s)==="articles"?b.hasMore:e(s)==="highlights"?R.hasMore:e(s)==="packs"?e(z)==="created"?U.hasMore:e(z)==="appears"?F.hasMore:U.hasMore||F.hasMore:!1),de=D(()=>e(s)==="notes"||e(s)==="replies"?K.isLoading:e(s)==="media"?l.isLoading:e(s)==="articles"?b.isLoading:e(s)==="highlights"?R.isLoading:e(s)==="packs"?U.isLoading||F.isLoading:!1);Qe(()=>(Zt.setProfileMode(),()=>{Zt.reset()}));var Se=To(),we=a(Se);da(we,{get pubkey(){return e(f)},get isOwnProfile(){return e(m)},get notesCount(){return K.allEvents.length},get followingCount(){return e(Z)},onEditProfile:()=>k(O,!0),onShareProfile:()=>k(I,!0),onOpenCreatePack:He});var be=o(we,2),_e=a(be),Ue=a(_e);Ue.__click=()=>k(s,"notes");var Le=o(a(Ue),2),Ne=a(Le,!0);r(Le),r(Ue);var Be=o(Ue,2);Be.__click=()=>k(s,"replies");var Ve=o(a(Be),2),We=a(Ve,!0);r(Ve),r(Be);var T=o(Be,2);T.__click=()=>k(s,"media");var j=o(a(T),2),c=a(j,!0);r(j),r(T);var v=o(T,2);v.__click=()=>k(s,"articles");var L=o(a(v),2),W=a(L,!0);r(L),r(v);var Y=o(v,2);Y.__click=()=>k(s,"highlights");var i=o(a(Y),2),x=a(i,!0);r(i),r(Y);var C=o(Y,2);C.__click=()=>k(s,"packs");var J=o(a(C),2),gt=a(J,!0);r(J),r(C),r(_e),r(be);var mt=o(be,2),Je=a(mt);{var ht=d=>{var B=Co(),te=S(B);{var ye=ge=>{var ce=yo(),xe=a(ce,!0);r(ce),E($e=>A(xe,$e),[()=>g()("profile.emptyStates.noNotes")]),n(ge,ce)},pe=ge=>{var ce=Po();dt(ce,21,()=>e(ue),xe=>xe.id,(xe,$e)=>{Gt(xe,{get event(){return e($e)}})}),r(ce),n(ge,ce)};M(te,ge=>{e(ue).length===0?ge(ye):ge(pe,!1)})}var De=o(te,2);ut(De,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),n(d,B)};M(Je,d=>{e(s)==="notes"&&d(ht)})}var Ft=o(Je,2);{var pr=d=>{var B=So(),te=S(B);{var ye=ge=>{var ce=Mo(),xe=a(ce,!0);r(ce),E($e=>A(xe,$e),[()=>g()("profile.emptyStates.noReplies")]),n(ge,ce)},pe=ge=>{var ce=jo();dt(ce,21,()=>e(Ce),xe=>xe.id,(xe,$e)=>{Gt(xe,{get event(){return e($e)}})}),r(ce),n(ge,ce)};M(te,ge=>{e(Ce).length===0?ge(ye):ge(pe,!1)})}var De=o(te,2);ut(De,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),n(d,B)};M(Ft,d=>{e(s)==="replies"&&d(pr)})}var It=o(Ft,2);{var gr=d=>{var B=Uo(),te=S(B),ye=a(te);Hr(ye,{get events(){return e(ae)}}),r(te);var pe=o(te,2);ut(pe,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),n(d,B)};M(It,d=>{e(s)==="media"&&d(gr)})}var Tt=o(It,2);{var mr=d=>{var B=Ao(),te=S(B);{let pe=D(()=>e(m)?g()("profile.emptyStates.noArticlesOwn"):g()("profile.emptyStates.noArticlesUser"));to(te,{get articles(){return e(se)},get emptyMessage(){return e(pe)}})}var ye=o(te,2);ut(ye,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),n(d,B)};M(Tt,d=>{e(s)==="articles"&&d(mr)})}var Vt=o(Tt,2);{var hr=d=>{var B=zo(),te=S(B);{let pe=D(()=>e(m)?g()("profile.emptyStates.noHighlightsOwn"):g()("profile.emptyStates.noHighlightsUser"));ao(te,{get highlights(){return e(je)},get emptyMessage(){return e(pe)}})}var ye=o(te,2);ut(ye,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),n(d,B)};M(Vt,d=>{e(s)==="highlights"&&d(hr)})}var br=o(Vt,2);{var _r=d=>{var B=Bo(),te=S(B),ye=a(te),pe=a(ye);pe.__click=()=>k(z,"all");var De=a(pe,!0);r(pe);var ge=o(pe,2);ge.__click=()=>k(z,"created");var ce=a(ge,!0);r(ge);var xe=o(ge,2);xe.__click=()=>k(z,"appears");var $e=a(xe,!0);r(xe),r(ye);var bt=o(ye,2);{var _t=Fe=>{var Ee=Lo();dt(Ee,21,()=>e(le),Ye=>Ye.id,(Ye,ot)=>{co(Ye,{get pack(){return e(ot)},variant:"compact"})}),r(Ee),n(Fe,Ee)},St=Fe=>{var Ee=No(),Ye=a(Ee,!0);r(Ee),E(ot=>A(Ye,ot),[()=>e(z)==="created"?e(m)?g()("profile.emptyStates.noPacksCreatedOwn"):g()("profile.emptyStates.noPacksCreatedUser",{username:e(h)?.name||"user"}):e(z)==="appears"?e(m)?g()("profile.emptyStates.noPacksAppearsOwn"):g()("profile.emptyStates.noPacksAppearsUser",{username:e(h)?.name||"user"}):g()("profile.emptyStates.noPacksFound")]),n(Fe,Ee)};M(bt,Fe=>{e(le).length>0?Fe(_t):Fe(St,!1)})}r(te);var at=o(te,2);ut(at,{onIntersect:he,get hasMore(){return e(ve)},get isLoading(){return e(de)}}),E((Fe,Ee,Ye)=>{Oe(pe,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(z)==="all"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),A(De,Fe),Oe(ge,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(z)==="created"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),A(ce,Ee),Oe(xe,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e(z)==="appears"?"bg-primary text-foreground":"bg-background text-muted-foreground hover:bg-card"}`),A($e,Ye)},[()=>g()("profile.tabs.all"),()=>e(m)?g()("profile.tabs.byYou"):g()("profile.tabs.byUser",{username:e(h)?.name||e(h)?.displayName||e(f).slice(0,8)}),()=>e(m)?g()("profile.tabs.withYou"):g()("profile.tabs.withUser",{username:e(h)?.name||e(h)?.displayName||e(f).slice(0,8)})]),n(d,B)};M(br,d=>{e(s)==="packs"&&d(_r)})}r(mt);var $t=o(mt,2);{var xr=d=>{Ra(d,{get isOpen(){return e(I)},onClose:()=>k(I,!1),get pubkey(){return e(f)},get npub(){return e(ke)}})};M($t,d=>{e(f)&&d(xr)})}var Kt=o($t,2);Kr(Kt,{get initialPubkey(){return e(f)},get open(){return e(ee)},set open(d){k(ee,d,!0)}});var kr=o(Kt,2);{var wr=d=>{var B=re(),te=S(B);X(te,()=>nr,(ye,pe)=>{pe(ye,{get open(){return e(O)},set open(De){k(O,De,!0)},children:(De,ge)=>{var ce=re(),xe=S(ce);X(xe,()=>ar,($e,bt)=>{bt($e,{class:"max-w-2xl max-h-[90vh] overflow-y-auto",onClose:()=>k(O,!1),children:(_t,St)=>{var at=Oo(),Fe=S(at);X(Fe,()=>cr,(ot,Ze)=>{Ze(ot,{children:(xt,Pt)=>{var Ct=Eo(),Ge=S(Ct);X(Ge,()=>or,(nt,qe)=>{qe(nt,{children:(Ie,et)=>{ne();var kt=vt("Edit Profile");n(Ie,kt)},$$slots:{default:!0}})});var ct=o(Ge,2);X(ct,()=>Yr,(nt,qe)=>{qe(nt,{children:(Ie,et)=>{ne();var kt=vt("Update your profile information and settings");n(Ie,kt)},$$slots:{default:!0}})}),n(xt,Ct)},$$slots:{default:!0}})});var Ee=o(Fe,2),Ye=a(Ee);qt(Ye,{}),r(Ee),n(_t,at)},$$slots:{default:!0}})}),n(De,ce)},$$slots:{default:!0}})}),n(d,B)},yr=d=>{var B=re(),te=S(B);X(te,()=>lr,(ye,pe)=>{pe(ye,{get open(){return e(O)},set open(De){k(O,De,!0)},children:(De,ge)=>{var ce=re(),xe=S(ce);X(xe,()=>sr,($e,bt)=>{bt($e,{children:(_t,St)=>{var at=Io(),Fe=S(at);X(Fe,()=>ur,(Ze,xt)=>{xt(Ze,{class:"text-left",children:(Pt,Ct)=>{var Ge=Ro(),ct=S(Ge);X(ct,()=>ir,(qe,Ie)=>{Ie(qe,{children:(et,kt)=>{ne();var Ut=vt("Edit Profile");n(et,Ut)},$$slots:{default:!0}})});var nt=o(ct,2);X(nt,()=>Gr,(qe,Ie)=>{Ie(qe,{children:(et,kt)=>{ne();var Ut=vt("Update your profile information and settings");n(et,Ut)},$$slots:{default:!0}})}),n(Pt,Ge)},$$slots:{default:!0}})});var Ee=o(Fe,2),Ye=a(Ee);qt(Ye,{hideSubmitButton:!0,onSubmit:Ze=>k(V,Ze,!0),onFormStateChange:Ze=>k(Q,Ze,!0)}),r(Ee);var ot=o(Ee,2);X(ot,()=>dr,(Ze,xt)=>{xt(Ze,{class:"pt-2",children:(Pt,Ct)=>{var Ge=Fo();Ge.__click=()=>e(V)?.();var ct=a(Ge);{var nt=Ie=>{var et=Do();ne(2),n(Ie,et)},qe=Ie=>{var et=Ho();n(Ie,et)};M(ct,Ie=>{e(Q).isSubmitting?Ie(nt):Ie(qe,!1)})}r(Ge),E(()=>Ge.disabled=e(Q).isSubmitting||e(Q).isUploading),n(Pt,Ge)},$$slots:{default:!0}})}),n(_t,at)},$$slots:{default:!0}})}),n(De,ce)},$$slots:{default:!0}})}),n(d,B)};M(kr,d=>{N.current?d(wr):d(yr,!1)})}r(Se),E((d,B,te,ye,pe,De)=>{Oe(Ue,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="notes"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(Ne,d),Oe(Be,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="replies"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(We,B),Oe(T,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="media"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(c,te),Oe(v,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="articles"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(W,ye),Oe(Y,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="highlights"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(x,pe),Oe(C,1,`flex items-center justify-center lg:justify-start gap-1.5 px-3 lg:px-4 py-3 font-medium whitespace-nowrap ${e(s)==="packs"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-muted-foreground"}`),A(gt,De)},[()=>g()("profile.tabs.notes"),()=>g()("profile.tabs.replies"),()=>g()("profile.tabs.media"),()=>g()("profile.tabs.articles"),()=>g()("profile.tabs.highlights"),()=>g()("profile.tabs.followPacks")]),n($,Se),ze(),y()}ft(["click"]);export{An as component};
