import"../chunks/DsnmJJEf.js";import{d as ye,p as Pe,u as G,g as e,b as H,s as w,i as m,e as c,h as Me,j as i,k as s,a as P,M as Le,r as o,t as y,l as E,f as Fe}from"../chunks/Bq750rDx.js";import{i as $}from"../chunks/BcjopvHb.js";import{e as oe}from"../chunks/Cjcfrngr.js";import{r as Ce,a as V,b as $e,c as se}from"../chunks/uSFILAY7.js";import{b as je}from"../chunks/BTSVJW8r.js";import{n as M}from"../chunks/CdRP5_sk.js";import{g as ae}from"../chunks/C88829DE.js";import{h as le}from"../chunks/jsJqZDHS.js";import{c as J}from"../chunks/DLXKwEVI.js";import{m as Ue}from"../chunks/C6SIxCTZ.js";import{A as Ae}from"../chunks/Bt6DpIqu.js";import{C as ze}from"../chunks/DS87H1fr.js";import{c as Be,L as Ee}from"../chunks/DseJecSJ.js";import{g as Ve}from"../chunks/Bmh-1GHY.js";import{g as Ie}from"../chunks/DAOE6Nme.js";import{P as De}from"../chunks/BzopvNlH.js";const He=b=>{{let g=P(()=>M.$currentUser?Ne:void 0);De(b,{title:"Follow Packs",subtitle:"Discover curated lists of accounts to follow",get icon(){return Se},get actions(){return e(g)}})}},Se=b=>{var g=Oe();c(b,g)},Ne=b=>{var g=Qe();g.__click=()=>J.open(),c(b,g)};var Oe=Le('<svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>'),Qe=m('<button class="px-4 py-2.5 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-medium text-sm flex items-center gap-2 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Follow Pack</button>'),Te=m('<div class="absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-xl z-10"><div class="py-1"><button>All Packs</button> <button>My Packs</button> <button>From Follows</button> <button>Include Me</button></div></div>'),qe=m('<div class="relative flex-shrink-0 filter-dropdown"><button class="px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <span class="text-sm font-medium"> </span></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Ge=m('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),Je=m('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),Ke=m('<button type="button" class="relative cursor-pointer"><!></button>'),Re=m('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),We=m('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>'),Xe=m('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),Ye=m('<div class="text-center py-12"><svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-muted-foreground">No follow packs found</p></div>'),Ze=m('<div class="w-full lg:max-w-6xl mx-auto px-4 py-8"><div class="mb-6"><div class="flex gap-3 flex-col sm:flex-row"><div class="relative flex-1"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="search" placeholder="Search follow packs..." class="w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"/></div> <!></div></div> <div><h2 class="text-xl font-semibold text-foreground mb-4">Popular Packs</h2> <!></div> <!></div>');function bt(b,g){Pe(g,!0);let j=H(""),u=H("all"),_=H(!1);const ie={all:"All Packs",mine:"My Packs",follows:"From Follows","include-me":"Include Me"};function I(t){w(u,t,!0),w(_,!1)}function K(t){t.target.closest(".filter-dropdown")||w(_,!1)}G(()=>{if(e(_))return document.addEventListener("click",K),()=>document.removeEventListener("click",K)});const R=Be(M,()=>({filters:[{kinds:[39089,39092]}],bufferMs:100}),{initialLimit:12,pageSize:12}),ne=P(()=>R.allEvents);let de=P(()=>{const t=e(ne).map(r=>({id:r.id||"",title:r.tagValue("title")||"Untitled Pack",description:r.tagValue("description"),image:r.tagValue("image"),pubkeys:r.tags.filter(a=>a[0]==="p").map(a=>a[1]),encode:()=>r.encode(),kind:r.kind||39089,pubkey:r.pubkey,created_at:r.created_at||0,author:r.author}));return t.length>0?t:Ue}),S=P(()=>{let t=e(de);if(e(u)!=="all"){const r=M.$currentUser?.pubkey,a=M.$currentUser?.follows;if(e(u)==="mine"&&r)t=t.filter(v=>v.pubkey===r);else if(e(u)==="follows"&&a){const v=Array.from(a).map(f=>f.pubkey);t=t.filter(f=>v.includes(f.pubkey))}else e(u)==="include-me"&&r&&(t=t.filter(v=>v.pubkeys.includes(r)))}if(e(j)){const r=e(j).toLowerCase();t=t.filter(a=>a.title.toLowerCase().includes(r)||a.description&&a.description.toLowerCase().includes(r))}return t}),U=H(12);const W=P(()=>e(S).slice(0,e(U))),X=P(()=>e(U)<e(S).length),ce=P(()=>R.isLoading);function ue(){e(X)&&w(U,Math.min(e(U)+12,e(S).length),!0)}G(()=>{e(u),e(j),w(U,12)});function Y(t){const r=M.getUser({pubkey:t.pubkey}),a=Ve(t,r);ae(a)}G(()=>(le.header=He,()=>{le.clear()}));var N=Ze(),O=s(N),Z=s(O),Q=s(Z),ee=i(s(Q),2);Ce(ee),o(Q);var ve=i(Q,2);{var me=t=>{var r=qe(),a=s(r);a.__click=()=>w(_,!e(_));var v=s(a),f=i(s(v),2),n=s(f,!0);o(f),o(v);var x=i(v,2);o(a);var D=i(a,2);{var q=L=>{var h=Te(),F=s(h),A=s(F);A.__click=()=>I("all");var C=i(A,2);C.__click=()=>I("mine");var z=i(C,2);z.__click=()=>I("follows");var B=i(z,2);B.__click=()=>I("include-me"),o(F),o(h),y(()=>{V(A,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="all"?"text-primary font-medium":"text-muted-foreground"}`),V(C,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="mine"?"text-primary font-medium":"text-muted-foreground"}`),V(z,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="follows"?"text-primary font-medium":"text-muted-foreground"}`),V(B,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="include-me"?"text-primary font-medium":"text-muted-foreground"}`)}),c(L,h)};$(D,L=>{e(_)&&L(q)})}o(r),y(()=>{E(n,ie[e(u)]),V(x,0,`w-4 h-4 text-muted-foreground transition-transform ${e(_)?"rotate-180":""}`)}),c(t,r)};$(ve,t=>{M.$currentUser&&t(me)})}o(Z),o(O);var T=i(O,2),fe=i(s(T),2);{var pe=t=>{var r=Xe(),a=Fe(r);oe(a,21,()=>e(W),f=>f.id,(f,n)=>{var x=We();x.__click=()=>Y(e(n)),x.__keydown=l=>l.key==="Enter"&&Y(e(n));var D=s(x);{var q=l=>{var d=Ge(),p=s(d);o(d),y(()=>{se(p,"src",e(n).image),se(p,"alt",e(n).title)}),c(l,d)};$(D,l=>{e(n).image&&l(q)})}var L=i(D,2),h=s(L),F=s(h),A=s(F,!0);o(F);var C=i(F,2),z=s(C);o(C),o(h);var B=i(h,2);{var _e=l=>{var d=Je(),p=s(d,!0);o(d),y(()=>E(p,e(n).description)),c(l,d)};$(B,l=>{e(n).description&&l(_e)})}var te=i(B,2),re=s(te);oe(re,18,()=>e(n).pubkeys.slice(0,4),l=>l,(l,d,p)=>{var k=Ke();k.__click=we=>{we.stopPropagation(),ae(Ie(d))};var ke=s(k);Ae(ke,{get ndk(){return M},get pubkey(){return d},class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"}),o(k),y(()=>$e(k,`z-index: ${4-e(p)}`)),c(l,k)});var xe=i(re,2);{var he=l=>{var d=Re(),p=s(d),k=s(p);o(p),o(d),y(()=>E(k,`+${e(n).pubkeys.length-4}`)),c(l,d)};$(xe,l=>{e(n).pubkeys.length>4&&l(he)})}o(te),o(L),o(x),y(()=>{E(A,e(n).title),E(z,`${e(n).pubkeys.length??""} members`)}),c(f,x)}),o(a);var v=i(a,2);Ee(v,{onIntersect:ue,get hasMore(){return e(X)},get isLoading(){return e(ce)}}),c(t,r)},ge=t=>{var r=Ye();c(t,r)};$(fe,t=>{e(W).length>0?t(pe):t(ge,!1)})}o(T);var be=i(T,2);ze(be,{get open(){return J.show},set open(t){J.show=t}}),o(N),je(ee,()=>e(j),t=>w(j,t)),c(b,N),Me()}ye(["click","keydown"]);export{bt as component};
