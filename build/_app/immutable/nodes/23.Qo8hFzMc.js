import{c as he,a as n,f as v,t as L,s as h,d as Qt,i as It}from"../chunks/rzUyzf2y.js";import{p as Mt,u as zt,s as p,b as oe,f as j,c as Bt,g as e,d as r,y as P,e as a,r as t,a as M,t as S,x as er}from"../chunks/AsQG98fS.js";import{i as A}from"../chunks/DZKExFZC.js";import{s as kr,a as wr}from"../chunks/DfBYFC16.js";import{p as Pr}from"../chunks/BcDbBYPM.js";import{g as Cr}from"../chunks/s53o-P2j.js";import{f as qt,n as it,s as Ct,h as Mr}from"../chunks/tv6-RHC_.js";import{s as Jt}from"../chunks/CxDZk1z_.js";import{h as tr}from"../chunks/BVrYKRgp.js";import{c as Ut}from"../chunks/C6HRQ1O8.js";import{e as at,i as lt}from"../chunks/Cztbr3Ea.js";import{r as Ft,a as rr,c as Pt,e as Br,f as Lt,b as ar,i as Wt,h as Xt,s as or}from"../chunks/CS0aOiUg.js";import{c as de}from"../chunks/Dt3q2Svx.js";import{c as nr}from"../chunks/DF8Bk5Sh.js";import{p as vr}from"../chunks/w-gpJwMz.js";import{M as cr,D as ur,a as mr,R as fr,b as gr,d as pr,e as hr}from"../chunks/CVV5LOp_.js";import{D as _r}from"../chunks/D1QSAoU9.js";import{D as xr,a as yr}from"../chunks/CKdpi0zW.js";import{B as xe,I as et}from"../chunks/DMKx7da8.js";import{D as br}from"../chunks/Dw5jWGaA.js";import{T as Ar}from"../chunks/2VdFane9.js";import{E as $r}from"../chunks/CCwRoHwR.js";import{a as jt}from"../chunks/CO-nanZk.js";import{u as sr}from"../chunks/DHRuQT7d.js";import{c as lr}from"../chunks/a7XEC-kH.js";import{p as ir}from"../chunks/DkZQAMY8.js";import{t as wt}from"../chunks/D7cSTCXZ.js";import{L as Me}from"../chunks/Cqd1tifG.js";import{R as dr}from"../chunks/DnC2iOoX.js";var Rr=v('<span class="text-yellow-500 text-sm"> </span>'),Sr=v("<!> <!>",1),Dr=v('<!> <div class="space-y-4"><div class="bg-neutral-50 dark:bg-background rounded-lg p-4 space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-muted-foreground"> </span> <div class="flex items-center gap-1"><svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold"> </span></div></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">For</span> <span class="font-semibold"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Via</span> <span class="font-medium"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Trading with</span> <div class="flex items-center gap-2"><span class="font-medium"> </span> <!></div></div></div> <div class="flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-yellow-800 dark:text-yellow-300"><p class="font-medium mb-1">Trade Safely</p> <ul class="space-y-1 text-xs"><li>â€¢ Never release funds before confirming payment</li> <li>â€¢ Use escrow when available</li> <li>â€¢ Communicate only through secure channels</li> <li>â€¢ Report suspicious behavior immediately</li></ul></div></div> <label class="flex items-start gap-3 cursor-pointer"><input type="checkbox" class="mt-1 w-4 h-4 text-primary border rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">I understand the risks and agree to proceed with this P2P trade</span></label></div> <!>',1),Tr=v('<div class="py-12 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div> <p class="text-foreground font-medium">Processing Trade...</p> <p class="text-sm text-muted-foreground mt-2">Connecting with trader</p></div>'),zr=v('<div class="py-12 text-center"><div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <p class="text-foreground font-medium">Trade Initiated!</p> <p class="text-sm text-muted-foreground mt-2">Check your messages for next steps</p></div>'),Lr=v("<!> <!> <!>",1),jr=v('<span class="text-yellow-500 text-sm"> </span>'),Ur=v('<div class="flex gap-2 w-full"><!> <!></div>'),Fr=v('<!> <div class="space-y-4 px-4 overflow-y-auto pb-4"><div class="bg-neutral-50 dark:bg-background rounded-lg p-4 space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-muted-foreground"> </span> <div class="flex items-center gap-1"><svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold"> </span></div></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">For</span> <span class="font-semibold"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Via</span> <span class="font-medium"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-muted-foreground">Trading with</span> <div class="flex items-center gap-2"><span class="font-medium"> </span> <!></div></div></div> <div class="flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-yellow-800 dark:text-yellow-300"><p class="font-medium mb-1">Trade Safely</p> <ul class="space-y-1 text-xs"><li>â€¢ Never release funds before confirming payment</li> <li>â€¢ Use escrow when available</li> <li>â€¢ Communicate only through secure channels</li> <li>â€¢ Report suspicious behavior immediately</li></ul></div></div> <label class="flex items-start gap-3 cursor-pointer"><input type="checkbox" class="mt-1 w-4 h-4 text-primary border rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">I understand the risks and agree to proceed with this P2P trade</span></label></div> <!>',1),Ir=v('<div class="py-12 text-center px-4"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div> <p class="text-foreground font-medium">Processing Trade...</p> <p class="text-sm text-muted-foreground mt-2">Connecting with trader</p></div>'),Or=v('<div class="py-12 text-center px-4"><div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <p class="text-foreground font-medium">Trade Initiated!</p> <p class="text-sm text-muted-foreground mt-2">Check your messages for next steps</p></div>'),Kr=v("<!> <!> <!>",1);function Nr(ve,o){Mt(o,!0);const O=new cr("(min-width: 768px)");let x=vr(o,"open",15,!1),X=oe(null);zt(()=>{o.order.event.author.fetchProfile().then(u=>{p(X,u,!0)})});let b=oe("confirm"),g=oe(!1);async function k(){p(b,"processing");try{const u=new qt(it);u.kind=38383,u.tags=[["d",`take-${o.order.id}-${Date.now()}`],["e",o.order.event.id],["p",o.order.pubkey],["k",o.order.type==="buy"?"sell":"buy"],["f",o.order.currency],["s","in-progress"],["amt",o.order.satsAmount.toString()],["fa",o.order.fiatAmount.toString()],["pm",o.order.paymentMethod],["y","Agora"],["z","take-order"]],u.content=`Taking order ${o.order.id}`,await u.publish();const f=new qt(it);f.kind=38383,f.tags=[...o.order.event.tags.filter(J=>J[0]!=="s"),["s","in-progress"]],f.content="",await f.publish(),p(b,"complete"),setTimeout(()=>{x(!1),o.onClose()},2e3)}catch(u){console.error("Failed to take order:",u),p(b,"confirm")}}const K=M(()=>({USD:"$",EUR:"â‚¬",GBP:"Â£",BRL:"R$"})[o.order.currency]||o.order.currency);var D=he(),$=j(D);{var H=u=>{var f=he(),J=j(f);de(J,()=>fr,(ne,q)=>{q(ne,{get open(){return x()},onOpenChange:y=>{x(y),y||o.onClose()},children:(y,Pe)=>{var ee=he(),F=j(ee);de(F,()=>ur,(N,Y)=>{Y(N,{class:"max-w-md",children:(Ce,Te)=>{var Ge=Lr(),Fe=j(Ge);{var B=I=>{var ce=Dr(),Je=j(ce);de(Je,()=>xr,(z,U)=>{U(z,{children:(ke,Ae)=>{var _e=he(),d=j(_e);de(d,()=>mr,(m,C)=>{C(m,{children:(E,Q)=>{P();var me=L("Confirm Trade");n(E,me)},$$slots:{default:!0}})}),n(ke,_e)},$$slots:{default:!0}})});var Ie=r(Je,2),_=a(Ie),T=a(_),se=a(T),le=a(se);t(se);var ie=r(se,2),V=r(a(ie),2),Oe=a(V);t(V),t(ie),t(T);var ue=r(T,2),ye=r(a(ue),2),ze=a(ye);t(ye),t(ue);var te=r(ue,2),We=r(a(te),2),st=a(We,!0);t(We),t(te);var Le=r(te,2),Be=r(a(Le),2),be=a(Be),je=a(be,!0);t(be);var Ke=r(be,2);{var Xe=z=>{var U=Rr(),ke=a(U);t(U),S(Ae=>h(ke,`â˜… ${Ae??""}`),[()=>o.order.rating.toFixed(1)]),n(z,U)};A(Ke,z=>{o.order.rating&&z(Xe)})}t(Be),t(Le),t(_);var Ne=r(_,4),qe=a(Ne);Ft(qe),P(2),t(Ne),t(Ie);var Ue=r(Ie,2);de(Ue,()=>br,(z,U)=>{U(z,{children:(ke,Ae)=>{var _e=Sr(),d=j(_e);xe(d,{variant:"outline",onclick:()=>{x(!1),o.onClose()},children:(C,E)=>{P();var Q=L("Cancel");n(C,Q)},$$slots:{default:!0}});var m=r(d,2);{let C=M(()=>!e(g));xe(m,{onclick:k,get disabled(){return e(C)},children:(E,Q)=>{P();var me=L("Take Order");n(E,me)},$$slots:{default:!0}})}n(ke,_e)},$$slots:{default:!0}})}),S((z,U)=>{h(le,`You will ${o.order.type==="buy"?"sell":"buy"}`),h(Oe,`${z??""} BTC`),h(ze,`${e(K)??""}${U??""}`),h(st,o.order.paymentMethod),h(je,e(X)?.name||"Anonymous")},[()=>(o.order.satsAmount/1e8).toFixed(8),()=>o.order.fiatAmount.toFixed(2)]),nr(qe,()=>e(g),z=>p(g,z)),n(I,ce)};A(Fe,I=>{e(b)==="confirm"&&I(B)})}var Ze=r(Fe,2);{var ot=I=>{var ce=Tr();n(I,ce)};A(Ze,I=>{e(b)==="processing"&&I(ot)})}var Ye=r(Ze,2);{var nt=I=>{var ce=zr();n(I,ce)};A(Ye,I=>{e(b)==="complete"&&I(nt)})}n(Ce,Ge)},$$slots:{default:!0}})}),n(y,ee)},$$slots:{default:!0}})}),n(u,f)},c=u=>{var f=he(),J=j(f);de(J,()=>hr,(ne,q)=>{q(ne,{get open(){return x()},onOpenChange:y=>{x(y),y||o.onClose()},children:(y,Pe)=>{var ee=he(),F=j(ee);de(F,()=>gr,(N,Y)=>{Y(N,{children:(Ce,Te)=>{var Ge=Kr(),Fe=j(Ge);{var B=I=>{var ce=Fr(),Je=j(ce);de(Je,()=>yr,(z,U)=>{U(z,{class:"text-left",children:(ke,Ae)=>{var _e=he(),d=j(_e);de(d,()=>pr,(m,C)=>{C(m,{children:(E,Q)=>{P();var me=L("Confirm Trade");n(E,me)},$$slots:{default:!0}})}),n(ke,_e)},$$slots:{default:!0}})});var Ie=r(Je,2),_=a(Ie),T=a(_),se=a(T),le=a(se);t(se);var ie=r(se,2),V=r(a(ie),2),Oe=a(V);t(V),t(ie),t(T);var ue=r(T,2),ye=r(a(ue),2),ze=a(ye);t(ye),t(ue);var te=r(ue,2),We=r(a(te),2),st=a(We,!0);t(We),t(te);var Le=r(te,2),Be=r(a(Le),2),be=a(Be),je=a(be,!0);t(be);var Ke=r(be,2);{var Xe=z=>{var U=jr(),ke=a(U);t(U),S(Ae=>h(ke,`â˜… ${Ae??""}`),[()=>o.order.rating.toFixed(1)]),n(z,U)};A(Ke,z=>{o.order.rating&&z(Xe)})}t(Be),t(Le),t(_);var Ne=r(_,4),qe=a(Ne);Ft(qe),P(2),t(Ne),t(Ie);var Ue=r(Ie,2);de(Ue,()=>_r,(z,U)=>{U(z,{class:"pt-2",children:(ke,Ae)=>{var _e=Ur(),d=a(_e);xe(d,{variant:"outline",onclick:()=>{x(!1),o.onClose()},class:"flex-1",children:(C,E)=>{P();var Q=L("Cancel");n(C,Q)},$$slots:{default:!0}});var m=r(d,2);{let C=M(()=>!e(g));xe(m,{onclick:k,get disabled(){return e(C)},class:"flex-1",children:(E,Q)=>{P();var me=L("Take Order");n(E,me)},$$slots:{default:!0}})}t(_e),n(ke,_e)},$$slots:{default:!0}})}),S((z,U)=>{h(le,`You will ${o.order.type==="buy"?"sell":"buy"}`),h(Oe,`${z??""} BTC`),h(ze,`${e(K)??""}${U??""}`),h(st,o.order.paymentMethod),h(je,e(X)?.name||"Anonymous")},[()=>(o.order.satsAmount/1e8).toFixed(8),()=>o.order.fiatAmount.toFixed(2)]),nr(qe,()=>e(g),z=>p(g,z)),n(I,ce)};A(Fe,I=>{e(b)==="confirm"&&I(B)})}var Ze=r(Fe,2);{var ot=I=>{var ce=Ir();n(I,ce)};A(Ze,I=>{e(b)==="processing"&&I(ot)})}var Ye=r(Ze,2);{var nt=I=>{var ce=Or();n(I,ce)};A(Ye,I=>{e(b)==="complete"&&I(nt)})}n(Ce,Ge)},$$slots:{default:!0}})}),n(y,ee)},$$slots:{default:!0}})}),n(u,f)};A($,u=>{O.current?u(H):u(c,!1)})}n(ve,D),Bt()}var Er=v('<img class="w-10 h-10 md:w-12 md:h-12 rounded-full object-cover"/>'),Hr=v('<div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br bg-primary rounded-full"></div>'),Vr=v('<div class="flex items-center gap-1 text-yellow-500"><svg class="w-4 h-4 fill-current" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> <span class="text-sm"> </span></div>'),Gr=v('<span class="inline-flex items-center gap-1 ml-2"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></span>'),Zr=v("<span> </span>"),Yr=v('<p class="text-xs text-muted-foreground mt-1"> <!></p>'),Jr=v('<span class="text-xs text-muted-foreground hidden md:inline"> </span>'),Wr=v('<a target="_blank" rel="noopener noreferrer" class="flex-1 flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden">View</span></a>'),Xr=v('<button class="flex-1 flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm md:text-base"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg> <span class="hidden md:inline"> </span> <span class="md:hidden"> </span></button>'),qr=v('<div class="bg-card rounded-lg md:rounded-xl border border p-3 md:p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between mb-2 md:mb-3"><div class="flex items-center gap-3"><!> <div><div class="flex items-center gap-2"><h3 class="font-semibold text-sm md:text-base text-foreground"> </h3> <!></div> <p class="text-xs text-muted-foreground"><!> <!> <!></p></div></div> <div class="flex items-center gap-1 md:gap-2"><span class="text-lg md:text-2xl"> </span> <div> </div> <!></div></div> <div class="grid grid-cols-3 gap-2 md:gap-4 mb-3 md:mb-4"><div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Amount</p> <div class="flex items-center gap-1 md:gap-2"><svg class="w-3 h-3 md:w-4 md:h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <span class="font-mono font-semibold text-xs md:text-base text-foreground"> </span></div> <p class="text-xs text-muted-foreground mt-0.5 md:mt-1 hidden md:block"> </p></div> <div><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Price</p> <div class="flex items-center gap-1"><span class="text-sm md:text-base hidden md:inline"> </span> <p class="text-sm md:text-lg font-semibold text-foreground"> </p></div> <!></div> <div class="min-w-0"><p class="text-xs text-muted-foreground mb-0.5 md:mb-1">Payment</p> <div class="flex items-center gap-1 md:gap-2"><span class="text-sm md:text-lg flex-shrink-0"> </span> <div class="flex flex-col min-w-0"><span class="font-medium text-xs md:text-base text-foreground truncate max-w-[80px] md:max-w-none"> </span> <!></div></div></div></div> <div class="flex items-center gap-2"><!> <button class="p-1.5 md:p-2 border border rounded-lg hover:bg-accent transition-colors"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></button> <button class="p-1.5 md:p-2 border border rounded-lg hover:bg-accent transition-colors hidden md:block"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></button></div></div> <!>',1);function Qr(ve,o){Mt(o,!0);let O=oe(null);zt(()=>{o.order.event.author.fetchProfile().then(d=>{p(O,d,!0)})});let x=oe(!1);const X={USD:{symbol:"$",flag:"ğŸ‡ºğŸ‡¸"},EUR:{symbol:"â‚¬",flag:"ğŸ‡ªğŸ‡º"},GBP:{symbol:"Â£",flag:"ğŸ‡¬ğŸ‡§"},BRL:{symbol:"R$",flag:"ğŸ‡§ğŸ‡·"},ARS:{symbol:"$",flag:"ğŸ‡¦ğŸ‡·"},PLN:{symbol:"zÅ‚",flag:"ğŸ‡µğŸ‡±"},JPY:{symbol:"Â¥",flag:"ğŸ‡¯ğŸ‡µ"},CHF:{symbol:"Fr",flag:"ğŸ‡¨ğŸ‡­"},PEN:{symbol:"S/",flag:"ğŸ‡µğŸ‡ª"},UYU:{symbol:"$",flag:"ğŸ‡ºğŸ‡¾"},VES:{symbol:"Bs",flag:"ğŸ‡»ğŸ‡ª"},RUB:{symbol:"â‚½",flag:"ğŸ‡·ğŸ‡º"},SEK:{symbol:"kr",flag:"ğŸ‡¸ğŸ‡ª"},NOK:{symbol:"kr",flag:"ğŸ‡³ğŸ‡´"},AUD:{symbol:"$",flag:"ğŸ‡¦ğŸ‡º"},CUP:{symbol:"$",flag:"ğŸ‡¨ğŸ‡º"}},b={Cash:{icon:"ğŸ’µ",region:"Universal"},"Cash (F2F)":{icon:"ğŸ’µ",region:"Local"},PIX:{icon:"ğŸ”„",region:"Brazil"},BLIK:{icon:"ğŸ“±",region:"Poland"},Revolut:{icon:"ğŸ’³",region:"Europe"},Zelle:{icon:"ğŸ¦",region:"USA"},CashApp:{icon:"ğŸ“²",region:"USA"},CVU:{icon:"ğŸ§",region:"Argentina"},MP:{icon:"ğŸ“²",region:"Argentina"},f2f:{icon:"ğŸ¤",region:"Local"},Ğ¡Ğ‘ĞŸ:{icon:"ğŸ¦",region:"Russia"}},g=M(()=>X[o.order.currency]||{symbol:o.order.currency,flag:"ğŸŒ"}),k=M(()=>b[o.order.paymentMethod]||{icon:"ğŸ’°",region:""}),K=M(()=>o.order.fiatAmount>0&&o.order.satsAmount>0?o.order.fiatAmount/o.order.satsAmount*1e8:0);var D=qr(),$=j(D),H=a($),c=a(H),u=a(c);{var f=d=>{var m=Er();S(()=>{Pt(m,"src",e(O).picture),Pt(m,"alt",e(O).name||"User")}),n(d,m)},J=d=>{var m=Hr();n(d,m)};A(u,d=>{e(O)?.picture?d(f):d(J,!1)})}var ne=r(u,2),q=a(ne),y=a(q),Pe=a(y,!0);t(y);var ee=r(y,2);{var F=d=>{var m=Vr(),C=r(a(m),2),E=a(C,!0);t(C),t(m),S(Q=>h(E,Q),[()=>o.order.rating.toFixed(1)]),n(d,m)};A(ee,d=>{o.order.rating&&o.order.rating>0&&d(F)})}t(q);var N=r(q,2),Y=a(N);Ar(Y,{get timestamp(){return o.order.createdAt}});var Ce=r(Y,2);{var Te=d=>{var m=L();S(()=>h(m,`â€¢ ${o.order.platform??""}`)),n(d,m)};A(Ce,d=>{o.order.platform&&d(Te)})}var Ge=r(Ce,2);{var Fe=d=>{var m=Gr(),C=r(a(m),2),E=a(C);t(C),t(m),S(Q=>h(E,`Near ${Q??""}`),[()=>o.order.geohash.substring(0,4)]),n(d,m)};A(Ge,d=>{o.order.geohash&&o.order.paymentMethod.includes("F2F")&&d(Fe)})}t(N),t(ne),t(c);var B=r(c,2),Ze=a(B),ot=a(Ze,!0);t(Ze);var Ye=r(Ze,2),nt=a(Ye,!0);t(Ye);var I=r(Ye,2);$r(I,{get event(){return o.order.event}}),t(B),t(H);var ce=r(H,2),Je=a(ce),Ie=r(a(Je),2),_=r(a(Ie),2),T=a(_,!0);t(_),t(Ie);var se=r(Ie,2),le=a(se);t(se),t(Je);var ie=r(Je,2),V=r(a(ie),2),Oe=a(V),ue=a(Oe,!0);t(Oe);var ye=r(Oe,2),ze=a(ye);t(ye),t(V);var te=r(V,2);{var We=d=>{var m=Yr(),C=a(m),E=r(C);{var Q=me=>{var Qe=Zr(),dt=a(Qe);t(Qe),S(()=>{rr(Qe,1,Br(o.order.premium>0?"text-red-500":"text-green-500")),h(dt,`(${o.order.premium>0?"+":""}${o.order.premium??""}%)`)}),n(me,Qe)};A(E,me=>{o.order.premium&&o.order.premium!==0&&me(Q)})}t(m),S(me=>h(C,`${e(g).symbol??""}${me??""}/BTC `),[()=>e(K).toFixed(2)]),n(d,m)};A(te,d=>{e(K)>0&&d(We)})}t(ie);var st=r(ie,2),Le=r(a(st),2),Be=a(Le),be=a(Be,!0);t(Be);var je=r(Be,2),Ke=a(je),Xe=a(Ke,!0);t(Ke);var Ne=r(Ke,2);{var qe=d=>{var m=Jr(),C=a(m,!0);t(m),S(()=>h(C,e(k).region)),n(d,m)};A(Ne,d=>{e(k).region&&d(qe)})}t(je),t(Le),t(st),t(ce);var Ue=r(ce,2),z=a(Ue);{var U=d=>{var m=Wr(),C=r(a(m),2),E=a(C);t(C),P(2),t(m),S(()=>{Pt(m,"href",o.order.source),Pt(m,"title",`View on ${(o.order.platform||"external site")??""}`),h(E,`View on ${(o.order.platform||"Site")??""}`)}),n(d,m)},ke=d=>{var m=Xr();m.__click=()=>p(x,!0);var C=r(a(m),2),E=a(C,!0);t(C);var Q=r(C,2),me=a(Q,!0);t(Q),t(m),S(()=>{h(E,o.order.type==="buy"?"Sell to User":"Buy from User"),h(me,o.order.type==="buy"?"Sell":"Buy")}),n(d,m)};A(z,d=>{o.order.source?d(U):d(ke,!1)})}P(4),t(Ue),t($);var Ae=r($,2);{var _e=d=>{Nr(d,{get order(){return o.order},onClose:()=>p(x,!1)})};A(Ae,d=>{e(x)&&d(_e)})}S((d,m,C,E)=>{h(Pe,d),h(ot,e(g).flag),rr(Ye,1,`px-2 md:px-3 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-medium ${o.order.type==="buy"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`),h(nt,o.order.type==="buy"?"Buying":"Selling"),h(T,m),h(le,`${C??""} sats`),h(ue,e(g).flag),h(ze,`${e(g).symbol??""}${E??""}`),h(be,e(k).icon),h(Xe,o.order.paymentMethod)},[()=>e(O)?.name||`@${o.order.pubkey.slice(0,6)}...`,()=>(o.order.satsAmount/1e8).toFixed(4),()=>o.order.satsAmount.toLocaleString(),()=>o.order.fiatAmount.toFixed(0)]),n(ve,D),Bt()}Qt(["click"]);var ea=v('<div class="text-center py-12 text-muted-foreground">No orders available matching your filters</div>'),ta=v('<div class="w-full"><div class="grid gap-3 md:gap-4"><!></div></div>');function ra(ve,o){Mt(o,!0);const O=M(()=>Ct.selectedRelay),x=it.$subscribe(()=>{const c={filters:[{kinds:[38383],limit:100}],closeOnEose:!1,subId:"p2p"};return e(O)&&(c.relayUrls=[e(O)],c.exclusiveRelay=!0),c}),X=M(()=>x.events),b=M(()=>{const c=[];return e(X).forEach(u=>{const f=u.tags,J=f.find(B=>B[0]==="z");if(J&&J[1]==="info")return;const ne=f.find(B=>B[0]==="k")?.[1],q=f.find(B=>B[0]==="f")?.[1],y=f.find(B=>B[0]==="s")?.[1],Pe=f.find(B=>B[0]==="pm")?.[1],ee=parseInt(f.find(B=>B[0]==="amt")?.[1]||"0"),F=parseFloat(f.find(B=>B[0]==="fa")?.[1]||"0"),N=parseFloat(f.find(B=>B[0]==="premium")?.[1]||"0"),Y=parseFloat(f.find(B=>B[0]==="rating")?.[1]||"0"),Ce=f.find(B=>B[0]==="y")?.[1],Te=f.find(B=>B[0]==="g")?.[1],Ge=f.find(B=>B[0]==="source")?.[1],Fe=f.find(B=>B[0]==="d")?.[1];y==="pending"&&ne&&q&&Fe&&c.push({id:Fe,pubkey:u.pubkey,type:ne,currency:q,status:y,paymentMethod:Pe||"Unknown",satsAmount:ee,fiatAmount:F,premium:N,rating:Y,platform:Ce,geohash:Te,source:Ge,createdAt:u.created_at||Date.now()/1e3,event:u})}),c.sort((u,f)=>f.createdAt-u.createdAt),c}),g=M(()=>e(b).filter(c=>!(o.filters.currency!=="all"&&c.currency!==o.filters.currency||o.filters.paymentMethod!=="all"&&c.paymentMethod!==o.filters.paymentMethod||o.filters.orderType!=="all"&&c.type!==o.filters.orderType||c.satsAmount<o.filters.minAmount||c.satsAmount>o.filters.maxAmount)));var k=ta(),K=a(k),D=a(K);{var $=c=>{var u=ea();n(c,u)},H=c=>{var u=he(),f=j(u);at(f,17,()=>e(g),J=>J.id,(J,ne)=>{Qr(J,{get order(){return e(ne)}})}),n(c,u)};A(D,c=>{e(g).length===0?c($):c(H,!1)})}t(K),t(k),n(ve,k),Bt()}var aa=v("<option> </option>"),oa=v('<span class="text-lg mr-2"> </span> <span class="text-sm"> </span>',1),na=v('<div class="mt-3"><!></div>'),sa=It('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Location (Required for F2F)',1),la=It('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),ia=v('<p class="text-xs text-muted-foreground"> </p>'),da=v('<div><!> <div class="space-y-2 mt-2"><div class="flex gap-2"><!> <!></div> <!></div></div>'),va=v('<img alt="" class="w-5 h-5 rounded border border-background"/>'),ca=v('<div class="w-5 h-5 rounded bg-muted flex items-center justify-center border border-background"><svg class="w-3 h-3 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div>'),ua=v('<div class="flex items-center -space-x-1"></div>'),ma=v('<span class="absolute -top-1 -right-1 bg-primary text-primary-foreground text-[10px] font-medium rounded-full min-w-[14px] h-[14px] flex items-center justify-center px-0.5"> </span>'),fa=v('<div class="relative"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg> <!></div>'),ga=v('<div class="bg-popover border border-border rounded-lg shadow-xl z-50 w-80 max-h-[400px] overflow-y-auto"><!></div>'),pa=v('<div class="relative"><!> <!></div> <div class="flex gap-2"><!> <!></div>',1),ha=v('<!> <div class="space-y-6"><div><!> <div class="grid grid-cols-2 gap-3"><!> <!></div></div> <div><!> <div class="relative mt-2"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <!></div> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div class="grid grid-cols-2 gap-4"><div><!> <!> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div><!> <select id="currency" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"></select></div></div> <div><!> <div class="grid grid-cols-2 gap-3"></div> <!></div> <!> <div><!> <!> <p class="mt-1 text-xs text-muted-foreground">Positive for above market, negative for below</p></div> <div><!> <select id="expiration" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"><option>1 hour</option><option>6 hours</option><option>12 hours</option><option>24 hours</option><option>48 hours</option><option>72 hours</option></select></div></div> <!>',1),_a=v("<option> </option>"),xa=v('<span class="text-lg mr-2"> </span> <span class="text-sm"> </span>',1),ya=v('<div class="mt-3"><!></div>'),ba=It('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Location (Required for F2F)',1),ka=It('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),wa=v('<p class="text-xs text-muted-foreground"> </p>'),Pa=v('<div><!> <div class="space-y-2 mt-2"><div class="flex gap-2"><!> <!></div> <!></div></div>'),Ca=v('<img alt="" class="w-5 h-5 rounded border border-background"/>'),Ma=v('<div class="w-5 h-5 rounded bg-muted flex items-center justify-center border border-background"><svg class="w-3 h-3 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div>'),Ba=v('<div class="flex items-center -space-x-1"></div>'),Aa=v('<span class="absolute -top-1 -right-1 bg-primary text-primary-foreground text-[10px] font-medium rounded-full min-w-[14px] h-[14px] flex items-center justify-center px-0.5"> </span>'),$a=v('<div class="relative"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg> <!></div>'),Ra=v('<div class="bg-popover border border-border rounded-lg shadow-xl z-50 w-80 max-h-[400px] overflow-y-auto"><!></div>'),Sa=v('<div class="flex items-center justify-between gap-4 w-full"><div class="relative"><!> <!></div> <div class="flex gap-2"><!> <!></div></div>'),Da=v('<!> <div class="space-y-6 px-4 overflow-y-auto pb-4"><div><!> <div class="grid grid-cols-2 gap-3"><!> <!></div></div> <div><!> <div class="relative mt-2"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"></path></svg> <!></div> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div class="grid grid-cols-2 gap-4"><div><!> <!> <p class="mt-1 text-xs text-muted-foreground"> </p></div> <div><!> <select id="currency" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"></select></div></div> <div><!> <div class="grid grid-cols-2 gap-3"></div> <!></div> <!> <div><!> <!> <p class="mt-1 text-xs text-muted-foreground">Positive for above market, negative for below</p></div> <div><!> <select id="expiration" class="mt-2 w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"><option>1 hour</option><option>6 hours</option><option>12 hours</option><option>24 hours</option><option>48 hours</option><option>72 hours</option></select></div></div> <!>',1);function Ta(ve,o){Mt(o,!0);const O=new cr("(min-width: 768px)");let x=vr(o,"open",15,!1);const X=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"â‚¬",name:"Euro"},{code:"GBP",symbol:"Â£",name:"British Pound"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"ARS",symbol:"$",name:"Argentine Peso"},{code:"PLN",symbol:"zÅ‚",name:"Polish ZÅ‚oty"}],b=[{id:"Cash (F2F)",name:"Cash (F2F)",icon:"ğŸ’µ",requiresLocation:!0},{id:"Revolut",name:"Revolut",icon:"ğŸ’³"},{id:"PIX",name:"PIX (Brazil)",icon:"ğŸ”„"},{id:"BLIK",name:"BLIK (Poland)",icon:"ğŸ“±"},{id:"Zelle",name:"Zelle",icon:"ğŸ¦"},{id:"CashApp",name:"Cash App",icon:"ğŸ“²"},{id:"custom",name:"Other...",icon:"âœï¸"}];function g(_,T,se=5){const le="0123456789bcdefghjkmnpqrstuvwxyz";let ie=0,V=0,Oe=!0,ue="",ye=[-90,90],ze=[-180,180];for(;ue.length<se;){if(Oe){const te=(ze[0]+ze[1])/2;T>=te?(ie|=1<<4-V,ze[0]=te):ze[1]=te}else{const te=(ye[0]+ye[1])/2;_>=te?(ie|=1<<4-V,ye[0]=te):ye[1]=te}Oe=!Oe,V++,V===5&&(ue+=le[ie],V=0,ie=0)}return ue}let k=oe("buy"),K=oe("USD"),D=oe("100000"),$=oe("50"),H=oe("Cash (F2F)"),c=oe(""),u=oe(""),f=oe(""),J=oe("0"),ne=oe("24"),q=oe(!1),y=oe(er([])),Pe=oe(!1),ee=oe(!1),F=oe(null),N=oe(er({top:0,left:0}));const Y=M(()=>Ct.relays.filter(_=>_.enabled));zt(()=>{x()&&(Ct.selectedRelay?p(y,[Ct.selectedRelay],!0):e(y).length===0&&p(y,e(Y).filter(_=>_.write).map(_=>_.url),!0))});const Ce=M(()=>b.find(_=>_.id===e(H))?.requiresLocation||!1);zt(()=>{e(Ce)||(p(u,""),p(f,""))});function Te(){navigator.geolocation?navigator.geolocation.getCurrentPosition(_=>{const T=_.coords.latitude,se=_.coords.longitude,le=g(T,se,5);p(f,le,!0),p(u,`Near ${le} (auto-detected)`),wt.success("Location detected")},_=>{console.error("Error getting location:",_),wt.error("Could not get your location. Please enter city/area manually.")}):wt.error("Geolocation is not supported by your browser")}function Ge(_){e(y).includes(_)?p(y,e(y).filter(T=>T!==_),!0):p(y,[...e(y),_],!0)}function Fe(_){p(y,[_],!0),p(ee,!1)}function B(){p(ee,!1)}function Ze(){if(!e(ee)&&e(F)){const _=e(F).getBoundingClientRect(),T=400,le=window.innerHeight-_.bottom<T&&_.top>T;p(N,{top:le?_.top-T-8:_.bottom+8,left:_.left},!0)}p(ee,!e(ee))}async function ot(){const _=e(H)==="custom"?e(c):e(H);if(!_){wt.error("Please specify a payment method");return}if(e(H)==="Cash (F2F)"&&!e(u)&&!e(f)){wt.error("Please provide a location for face-to-face trades");return}p(q,!0);try{const T=new qt(it);T.kind=38383;const le=[["d",`${Date.now()}-${Math.random().toString(36).substr(2,9)}`],["k",e(k)],["f",e(K)],["s","pending"],["amt",e(D)],["fa",e($)],["pm",_],["premium",e(J)],["y","Agora"],["z","order"],["network","mainnet"],["layer","lightning"],["expiration",(Math.floor(Date.now()/1e3)+Number.parseInt(e(ne))*3600).toString()]];e(f)&&le.push(["g",e(f)]),e(Pe)&&le.push(["-"]),T.tags=le,T.content="";const ie=Mr.fromRelayUrls(e(y),it);await T.publish(ie),wt.success("Order created successfully"),x(!1),o.onClose()}catch(T){console.error("Failed to create order:",T),wt.error("Failed to create order")}finally{p(q,!1)}}const Ye=M(()=>parseInt(e(D))/1e8),nt=M(()=>parseFloat(e($))/e(Ye));var I=he(),ce=j(I);{var Je=_=>{var T=he(),se=j(T);de(se,()=>fr,(le,ie)=>{ie(le,{get open(){return x()},onOpenChange:V=>{x(V),V||o.onClose()},children:(V,Oe)=>{var ue=he(),ye=j(ue);de(ye,()=>ur,(ze,te)=>{te(ze,{class:"max-w-lg max-h-[90vh] overflow-y-auto",children:(We,st)=>{var Le=ha(),Be=j(Le);de(Be,()=>xr,(s,l)=>{l(s,{children:(i,G)=>{var w=he(),fe=j(w);de(fe,()=>mr,(ge,pe)=>{pe(ge,{children:($e,R)=>{P();var Z=L("Create P2P Order");n($e,Z)},$$slots:{default:!0}})}),n(i,w)},$$slots:{default:!0}})});var be=r(Be,2),je=a(be),Ke=a(je);Me(Ke,{class:"block mb-2",children:(s,l)=>{P();var i=L("Order Type");n(s,i)},$$slots:{default:!0}});var Xe=r(Ke,2),Ne=a(Xe);{let s=M(()=>e(k)==="buy"?"default":"outline"),l=M(()=>e(k)==="buy"?"border-green-500 bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"");xe(Ne,{get variant(){return e(s)},onclick:()=>p(k,"buy"),get class(){return e(l)},children:(i,G)=>{P();var w=L("I want to buy Bitcoin");n(i,w)},$$slots:{default:!0}})}var qe=r(Ne,2);{let s=M(()=>e(k)==="sell"?"default":"outline"),l=M(()=>e(k)==="sell"?"border-red-500 bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40":"");xe(qe,{get variant(){return e(s)},onclick:()=>p(k,"sell"),get class(){return e(l)},children:(i,G)=>{P();var w=L("I want to sell Bitcoin");n(i,w)},$$slots:{default:!0}})}t(Xe),t(je);var Ue=r(je,2),z=a(Ue);Me(z,{for:"sats-amount",children:(s,l)=>{P();var i=L("Bitcoin Amount (sats)");n(s,i)},$$slots:{default:!0}});var U=r(z,2),ke=r(a(U),2);et(ke,{id:"sats-amount",type:"number",class:"pl-10",placeholder:"100000",get value(){return e(D)},set value(s){p(D,s,!0)}}),t(U);var Ae=r(U,2),_e=a(Ae);t(Ae),t(Ue);var d=r(Ue,2),m=a(d),C=a(m);Me(C,{for:"fiat-amount",children:(s,l)=>{P();var i=L("Fiat Amount");n(s,i)},$$slots:{default:!0}});var E=r(C,2);et(E,{id:"fiat-amount",type:"number",placeholder:"50",class:"mt-2",get value(){return e($)},set value(s){p($,s,!0)}});var Q=r(E,2),me=a(Q);t(Q),t(m);var Qe=r(m,2),dt=a(Qe);Me(dt,{for:"currency",children:(s,l)=>{P();var i=L("Currency");n(s,i)},$$slots:{default:!0}});var vt=r(dt,2);at(vt,21,()=>X,lt,(s,l)=>{var i=aa(),G=a(i);t(i);var w={};S(()=>{h(G,`${e(l).symbol??""} ${e(l).code??""}`),w!==(w=e(l).code)&&(i.value=(i.__value=e(l).code)??"")}),n(s,i)}),t(vt),t(Qe),t(d);var ct=r(d,2),At=a(ct);Me(At,{class:"block mb-2",children:(s,l)=>{P();var i=L("Payment Method");n(s,i)},$$slots:{default:!0}});var ut=r(At,2);at(ut,21,()=>b,lt,(s,l)=>{{let i=M(()=>e(H)===e(l).id?"default":"outline"),G=M(()=>e(H)===e(l).id?"border-primary":"");xe(s,{get variant(){return e(i)},onclick:()=>p(H,e(l).id,!0),get class(){return`justify-start h-auto py-2 ${e(G)??""}`},children:(w,fe)=>{var ge=oa(),pe=j(ge),$e=a(pe,!0);t(pe);var R=r(pe,2),Z=a(R,!0);t(R),S(()=>{h($e,e(l).icon),h(Z,e(l).name)}),n(w,ge)},$$slots:{default:!0}})}}),t(ut);var Ot=r(ut,2);{var Kt=s=>{var l=na(),i=a(l);et(i,{placeholder:"Enter payment method (e.g., Bank Transfer, PayPal, etc.)",autofocus:!0,get value(){return e(c)},set value(G){p(c,G,!0)}}),t(l),n(s,l)};A(Ot,s=>{e(H)==="custom"&&s(Kt)})}t(ct);var $t=r(ct,2);{var Nt=s=>{var l=da(),i=a(l);Me(i,{for:"location",class:"flex items-center gap-1",children:(R,Z)=>{var Re=sa();P(),n(R,Re)},$$slots:{default:!0}});var G=r(i,2),w=a(G),fe=a(w);et(fe,{id:"location",placeholder:"City, neighborhood, or area",class:"flex-1",get value(){return e(u)},set value(R){p(u,R,!0)}});var ge=r(fe,2);xe(ge,{variant:"outline",size:"icon",onclick:Te,title:"Use current location",children:(R,Z)=>{var Re=la();n(R,Re)},$$slots:{default:!0}}),t(w);var pe=r(w,2);{var $e=R=>{var Z=ia(),Re=a(Z);t(Z),S(()=>h(Re,`Geohash: ${e(f)??""} (approximate location)`)),n(R,Z)};A(pe,R=>{e(f)&&R($e)})}t(G),t(l),n(s,l)};A($t,s=>{e(Ce)&&s(Nt)})}var mt=r($t,2),Rt=a(mt);Me(Rt,{for:"premium",children:(s,l)=>{P();var i=L("Premium (%)");n(s,i)},$$slots:{default:!0}});var Et=r(Rt,2);et(Et,{id:"premium",type:"number",placeholder:"0",class:"mt-2",get value(){return e(J)},set value(s){p(J,s,!0)}}),P(2),t(mt);var St=r(mt,2),Dt=a(St);Me(Dt,{for:"expiration",children:(s,l)=>{P();var i=L("Expiration (hours)");n(s,i)},$$slots:{default:!0}});var ft=r(Dt,2),gt=a(ft);gt.value=gt.__value="1";var pt=r(gt);pt.value=pt.__value="6";var ht=r(pt);ht.value=ht.__value="12";var _t=r(ht);_t.value=_t.__value="24";var xt=r(_t);xt.value=xt.__value="48";var Tt=r(xt);Tt.value=Tt.__value="72",t(ft),t(St),t(be);var Ht=r(be,2);de(Ht,()=>br,(s,l)=>{l(s,{class:"mt-6 flex items-center justify-between gap-4",children:(i,G)=>{var w=pa(),fe=j(w),ge=a(fe);xe(ge,{type:"button",variant:"outline",size:"icon",onclick:Ze,get disabled(){return e(q)},class:"h-10 w-10",title:"Select relays",get ref(){return e(F)},set ref(W){p(F,W,!0)},children:(W,re)=>{var Se=he(),ae=j(Se);{var yt=Ee=>{var De=ua();at(De,21,()=>e(y),lt,(bt,kt)=>{const He=M(()=>e(Y).find(we=>we.url===e(kt))),Ve=M(()=>e(He)?sr(e(He).url):null);var tt=he(),Gt=j(tt);{var Zt=we=>{var rt=va();S(()=>Pt(rt,"src",e(Ve).info.icon)),n(we,rt)},Yt=we=>{var rt=ca();n(we,rt)};A(Gt,we=>{e(Ve)?.info?.icon?we(Zt):we(Yt,!1)})}n(bt,tt)}),t(De),n(Ee,De)},Vt=Ee=>{var De=fa(),bt=r(a(De),2);{var kt=He=>{var Ve=ma(),tt=a(Ve,!0);t(Ve),S(()=>h(tt,e(y).length)),n(He,Ve)};A(bt,He=>{e(y).length>2&&He(kt)})}t(De),n(Ee,De)};A(ae,Ee=>{e(y).length<=2&&e(y).length>0?Ee(yt):Ee(Vt,!1)})}n(W,Se)},$$slots:{default:!0}});var pe=r(ge,2);{var $e=W=>{var re=ga(),Se=a(re);dr(Se,{get selectedRelayUrls(){return e(y)},onToggleRelay:Ge,onSelectOnly:Fe,get isProtected(){return e(Pe)},set isProtected(ae){p(Pe,ae,!0)}}),t(re),jt(re,ae=>ir?.(ae)),jt(re,(ae,yt)=>lr?.(ae,yt),()=>B),S(()=>ar(re,`position: fixed; top: ${e(N).top??""}px; left: ${e(N).left??""}px;`)),n(W,re)};A(pe,W=>{e(ee)&&W($e)})}t(fe);var R=r(fe,2),Z=a(R);xe(Z,{variant:"outline",onclick:()=>{x(!1),o.onClose()},children:(W,re)=>{P();var Se=L("Cancel");n(W,Se)},$$slots:{default:!0}});var Re=r(Z,2);{let W=M(()=>e(q)||!e(D)||!e($));xe(Re,{onclick:ot,get disabled(){return e(W)},children:(re,Se)=>{P();var ae=L();S(()=>h(ae,e(q)?"Creating...":"Create Order")),n(re,ae)},$$slots:{default:!0}})}t(R),n(i,w)},$$slots:{default:!0}})}),S((s,l)=>{h(_e,`= ${s??""} BTC`),h(me,`â‰ˆ $${l??""}/BTC`)},[()=>e(Ye).toFixed(8),()=>e(nt).toFixed(2)]),Lt(vt,()=>e(K),s=>p(K,s)),Lt(ft,()=>e(ne),s=>p(ne,s)),n(We,Le)},$$slots:{default:!0}})}),n(V,ue)},$$slots:{default:!0}})}),n(_,T)},Ie=_=>{var T=he(),se=j(T);de(se,()=>hr,(le,ie)=>{ie(le,{get open(){return x()},onOpenChange:V=>{x(V),V||o.onClose()},children:(V,Oe)=>{var ue=he(),ye=j(ue);de(ye,()=>gr,(ze,te)=>{te(ze,{children:(We,st)=>{var Le=Da(),Be=j(Le);de(Be,()=>yr,(s,l)=>{l(s,{class:"text-left",children:(i,G)=>{var w=he(),fe=j(w);de(fe,()=>pr,(ge,pe)=>{pe(ge,{children:($e,R)=>{P();var Z=L("Create P2P Order");n($e,Z)},$$slots:{default:!0}})}),n(i,w)},$$slots:{default:!0}})});var be=r(Be,2),je=a(be),Ke=a(je);Me(Ke,{class:"block mb-2",children:(s,l)=>{P();var i=L("Order Type");n(s,i)},$$slots:{default:!0}});var Xe=r(Ke,2),Ne=a(Xe);{let s=M(()=>e(k)==="buy"?"default":"outline"),l=M(()=>e(k)==="buy"?"border-green-500 bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"");xe(Ne,{get variant(){return e(s)},onclick:()=>p(k,"buy"),get class(){return e(l)},children:(i,G)=>{P();var w=L("I want to buy Bitcoin");n(i,w)},$$slots:{default:!0}})}var qe=r(Ne,2);{let s=M(()=>e(k)==="sell"?"default":"outline"),l=M(()=>e(k)==="sell"?"border-red-500 bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40":"");xe(qe,{get variant(){return e(s)},onclick:()=>p(k,"sell"),get class(){return e(l)},children:(i,G)=>{P();var w=L("I want to sell Bitcoin");n(i,w)},$$slots:{default:!0}})}t(Xe),t(je);var Ue=r(je,2),z=a(Ue);Me(z,{for:"sats-amount",children:(s,l)=>{P();var i=L("Bitcoin Amount (sats)");n(s,i)},$$slots:{default:!0}});var U=r(z,2),ke=r(a(U),2);et(ke,{id:"sats-amount",type:"number",class:"pl-10",placeholder:"100000",get value(){return e(D)},set value(s){p(D,s,!0)}}),t(U);var Ae=r(U,2),_e=a(Ae);t(Ae),t(Ue);var d=r(Ue,2),m=a(d),C=a(m);Me(C,{for:"fiat-amount",children:(s,l)=>{P();var i=L("Fiat Amount");n(s,i)},$$slots:{default:!0}});var E=r(C,2);et(E,{id:"fiat-amount",type:"number",placeholder:"50",class:"mt-2",get value(){return e($)},set value(s){p($,s,!0)}});var Q=r(E,2),me=a(Q);t(Q),t(m);var Qe=r(m,2),dt=a(Qe);Me(dt,{for:"currency",children:(s,l)=>{P();var i=L("Currency");n(s,i)},$$slots:{default:!0}});var vt=r(dt,2);at(vt,21,()=>X,lt,(s,l)=>{var i=_a(),G=a(i);t(i);var w={};S(()=>{h(G,`${e(l).symbol??""} ${e(l).code??""}`),w!==(w=e(l).code)&&(i.value=(i.__value=e(l).code)??"")}),n(s,i)}),t(vt),t(Qe),t(d);var ct=r(d,2),At=a(ct);Me(At,{class:"block mb-2",children:(s,l)=>{P();var i=L("Payment Method");n(s,i)},$$slots:{default:!0}});var ut=r(At,2);at(ut,21,()=>b,lt,(s,l)=>{{let i=M(()=>e(H)===e(l).id?"default":"outline"),G=M(()=>e(H)===e(l).id?"border-primary":"");xe(s,{get variant(){return e(i)},onclick:()=>p(H,e(l).id,!0),get class(){return`justify-start h-auto py-2 ${e(G)??""}`},children:(w,fe)=>{var ge=xa(),pe=j(ge),$e=a(pe,!0);t(pe);var R=r(pe,2),Z=a(R,!0);t(R),S(()=>{h($e,e(l).icon),h(Z,e(l).name)}),n(w,ge)},$$slots:{default:!0}})}}),t(ut);var Ot=r(ut,2);{var Kt=s=>{var l=ya(),i=a(l);et(i,{placeholder:"Enter payment method (e.g., Bank Transfer, PayPal, etc.)",autofocus:!0,get value(){return e(c)},set value(G){p(c,G,!0)}}),t(l),n(s,l)};A(Ot,s=>{e(H)==="custom"&&s(Kt)})}t(ct);var $t=r(ct,2);{var Nt=s=>{var l=Pa(),i=a(l);Me(i,{for:"location",class:"flex items-center gap-1",children:(R,Z)=>{var Re=ba();P(),n(R,Re)},$$slots:{default:!0}});var G=r(i,2),w=a(G),fe=a(w);et(fe,{id:"location",placeholder:"City, neighborhood, or area",class:"flex-1",get value(){return e(u)},set value(R){p(u,R,!0)}});var ge=r(fe,2);xe(ge,{variant:"outline",size:"icon",onclick:Te,title:"Use current location",children:(R,Z)=>{var Re=ka();n(R,Re)},$$slots:{default:!0}}),t(w);var pe=r(w,2);{var $e=R=>{var Z=wa(),Re=a(Z);t(Z),S(()=>h(Re,`Geohash: ${e(f)??""} (approximate location)`)),n(R,Z)};A(pe,R=>{e(f)&&R($e)})}t(G),t(l),n(s,l)};A($t,s=>{e(Ce)&&s(Nt)})}var mt=r($t,2),Rt=a(mt);Me(Rt,{for:"premium",children:(s,l)=>{P();var i=L("Premium (%)");n(s,i)},$$slots:{default:!0}});var Et=r(Rt,2);et(Et,{id:"premium",type:"number",placeholder:"0",class:"mt-2",get value(){return e(J)},set value(s){p(J,s,!0)}}),P(2),t(mt);var St=r(mt,2),Dt=a(St);Me(Dt,{for:"expiration",children:(s,l)=>{P();var i=L("Expiration (hours)");n(s,i)},$$slots:{default:!0}});var ft=r(Dt,2),gt=a(ft);gt.value=gt.__value="1";var pt=r(gt);pt.value=pt.__value="6";var ht=r(pt);ht.value=ht.__value="12";var _t=r(ht);_t.value=_t.__value="24";var xt=r(_t);xt.value=xt.__value="48";var Tt=r(xt);Tt.value=Tt.__value="72",t(ft),t(St),t(be);var Ht=r(be,2);de(Ht,()=>_r,(s,l)=>{l(s,{class:"pt-2",children:(i,G)=>{var w=Sa(),fe=a(w),ge=a(fe);xe(ge,{type:"button",variant:"outline",size:"icon",onclick:Ze,get disabled(){return e(q)},class:"h-10 w-10",title:"Select relays",get ref(){return e(F)},set ref(W){p(F,W,!0)},children:(W,re)=>{var Se=he(),ae=j(Se);{var yt=Ee=>{var De=Ba();at(De,21,()=>e(y),lt,(bt,kt)=>{const He=M(()=>e(Y).find(we=>we.url===e(kt))),Ve=M(()=>e(He)?sr(e(He).url):null);var tt=he(),Gt=j(tt);{var Zt=we=>{var rt=Ca();S(()=>Pt(rt,"src",e(Ve).info.icon)),n(we,rt)},Yt=we=>{var rt=Ma();n(we,rt)};A(Gt,we=>{e(Ve)?.info?.icon?we(Zt):we(Yt,!1)})}n(bt,tt)}),t(De),n(Ee,De)},Vt=Ee=>{var De=$a(),bt=r(a(De),2);{var kt=He=>{var Ve=Aa(),tt=a(Ve,!0);t(Ve),S(()=>h(tt,e(y).length)),n(He,Ve)};A(bt,He=>{e(y).length>2&&He(kt)})}t(De),n(Ee,De)};A(ae,Ee=>{e(y).length<=2&&e(y).length>0?Ee(yt):Ee(Vt,!1)})}n(W,Se)},$$slots:{default:!0}});var pe=r(ge,2);{var $e=W=>{var re=Ra(),Se=a(re);dr(Se,{get selectedRelayUrls(){return e(y)},onToggleRelay:Ge,onSelectOnly:Fe,get isProtected(){return e(Pe)},set isProtected(ae){p(Pe,ae,!0)}}),t(re),jt(re,ae=>ir?.(ae)),jt(re,(ae,yt)=>lr?.(ae,yt),()=>B),S(()=>ar(re,`position: fixed; top: ${e(N).top??""}px; left: ${e(N).left??""}px;`)),n(W,re)};A(pe,W=>{e(ee)&&W($e)})}t(fe);var R=r(fe,2),Z=a(R);xe(Z,{variant:"outline",onclick:()=>{x(!1),o.onClose()},children:(W,re)=>{P();var Se=L("Cancel");n(W,Se)},$$slots:{default:!0}});var Re=r(Z,2);{let W=M(()=>e(q)||!e(D)||!e($));xe(Re,{onclick:ot,get disabled(){return e(W)},children:(re,Se)=>{P();var ae=L();S(()=>h(ae,e(q)?"Creating...":"Create Order")),n(re,ae)},$$slots:{default:!0}})}t(R),t(w),n(i,w)},$$slots:{default:!0}})}),S((s,l)=>{h(_e,`= ${s??""} BTC`),h(me,`â‰ˆ $${l??""}/BTC`)},[()=>e(Ye).toFixed(8),()=>e(nt).toFixed(2)]),Lt(vt,()=>e(K),s=>p(K,s)),Lt(ft,()=>e(ne),s=>p(ne,s)),n(We,Le)},$$slots:{default:!0}})}),n(V,ue)},$$slots:{default:!0}})}),n(_,T)};A(ce,_=>{O.current?_(Je):_(Ie,!1)})}n(ve,I),Bt()}const za={USD:{name:"US Dollar",flag:"ğŸ‡ºğŸ‡¸"},EUR:{name:"Euro",flag:"ğŸ‡ªğŸ‡º"},BRL:{name:"Brazilian Real",flag:"ğŸ‡§ğŸ‡·"},ARS:{name:"Argentine Peso",flag:"ğŸ‡¦ğŸ‡·"},GBP:{name:"British Pound",flag:"ğŸ‡¬ğŸ‡§"},PLN:{name:"Polish ZÅ‚oty",flag:"ğŸ‡µğŸ‡±"},JPY:{name:"Japanese Yen",flag:"ğŸ‡¯ğŸ‡µ"},CAD:{name:"Canadian Dollar",flag:"ğŸ‡¨ğŸ‡¦"},AUD:{name:"Australian Dollar",flag:"ğŸ‡¦ğŸ‡º"},CHF:{name:"Swiss Franc",flag:"ğŸ‡¨ğŸ‡­"},CNY:{name:"Chinese Yuan",flag:"ğŸ‡¨ğŸ‡³"},INR:{name:"Indian Rupee",flag:"ğŸ‡®ğŸ‡³"},MXN:{name:"Mexican Peso",flag:"ğŸ‡²ğŸ‡½"},ZAR:{name:"South African Rand",flag:"ğŸ‡¿ğŸ‡¦"},SEK:{name:"Swedish Krona",flag:"ğŸ‡¸ğŸ‡ª"},NOK:{name:"Norwegian Krone",flag:"ğŸ‡³ğŸ‡´"},DKK:{name:"Danish Krone",flag:"ğŸ‡©ğŸ‡°"},NZD:{name:"New Zealand Dollar",flag:"ğŸ‡³ğŸ‡¿"},SGD:{name:"Singapore Dollar",flag:"ğŸ‡¸ğŸ‡¬"},HKD:{name:"Hong Kong Dollar",flag:"ğŸ‡­ğŸ‡°"},KRW:{name:"South Korean Won",flag:"ğŸ‡°ğŸ‡·"},TRY:{name:"Turkish Lira",flag:"ğŸ‡¹ğŸ‡·"},RUB:{name:"Russian Ruble",flag:"ğŸ‡·ğŸ‡º"},THB:{name:"Thai Baht",flag:"ğŸ‡¹ğŸ‡­"},MYR:{name:"Malaysian Ringgit",flag:"ğŸ‡²ğŸ‡¾"},PHP:{name:"Philippine Peso",flag:"ğŸ‡µğŸ‡­"},IDR:{name:"Indonesian Rupiah",flag:"ğŸ‡®ğŸ‡©"},VND:{name:"Vietnamese Dong",flag:"ğŸ‡»ğŸ‡³"},COP:{name:"Colombian Peso",flag:"ğŸ‡¨ğŸ‡´"},CLP:{name:"Chilean Peso",flag:"ğŸ‡¨ğŸ‡±"},PEN:{name:"Peruvian Sol",flag:"ğŸ‡µğŸ‡ª"},UAH:{name:"Ukrainian Hryvnia",flag:"ğŸ‡ºğŸ‡¦"},AED:{name:"UAE Dirham",flag:"ğŸ‡¦ğŸ‡ª"},SAR:{name:"Saudi Riyal",flag:"ğŸ‡¸ğŸ‡¦"},QAR:{name:"Qatari Riyal",flag:"ğŸ‡¶ğŸ‡¦"},KWD:{name:"Kuwaiti Dinar",flag:"ğŸ‡°ğŸ‡¼"},NGN:{name:"Nigerian Naira",flag:"ğŸ‡³ğŸ‡¬"},KES:{name:"Kenyan Shilling",flag:"ğŸ‡°ğŸ‡ª"},GHS:{name:"Ghanaian Cedi",flag:"ğŸ‡¬ğŸ‡­"},UGX:{name:"Ugandan Shilling",flag:"ğŸ‡ºğŸ‡¬"},VES:{name:"Venezuelan BolÃ­var",flag:"ğŸ‡»ğŸ‡ª"},UYU:{name:"Uruguayan Peso",flag:"ğŸ‡ºğŸ‡¾"},BOB:{name:"Bolivian Boliviano",flag:"ğŸ‡§ğŸ‡´"},CRC:{name:"Costa Rican ColÃ³n",flag:"ğŸ‡¨ğŸ‡·"},GTQ:{name:"Guatemalan Quetzal",flag:"ğŸ‡¬ğŸ‡¹"},HNL:{name:"Honduran Lempira",flag:"ğŸ‡­ğŸ‡³"},NIO:{name:"Nicaraguan CÃ³rdoba",flag:"ğŸ‡³ğŸ‡®"},PAB:{name:"Panamanian Balboa",flag:"ğŸ‡µğŸ‡¦"},PYG:{name:"Paraguayan Guarani",flag:"ğŸ‡µğŸ‡¾"},DOP:{name:"Dominican Peso",flag:"ğŸ‡©ğŸ‡´"},JMD:{name:"Jamaican Dollar",flag:"ğŸ‡¯ğŸ‡²"},TTD:{name:"Trinidad Dollar",flag:"ğŸ‡¹ğŸ‡¹"},BSD:{name:"Bahamian Dollar",flag:"ğŸ‡§ğŸ‡¸"},BBD:{name:"Barbadian Dollar",flag:"ğŸ‡§ğŸ‡§"},BZD:{name:"Belize Dollar",flag:"ğŸ‡§ğŸ‡¿"},XOF:{name:"West African CFA",flag:"ğŸŒ"},XAF:{name:"Central African CFA",flag:"ğŸŒ"},MAD:{name:"Moroccan Dirham",flag:"ğŸ‡²ğŸ‡¦"},TND:{name:"Tunisian Dinar",flag:"ğŸ‡¹ğŸ‡³"},EGP:{name:"Egyptian Pound",flag:"ğŸ‡ªğŸ‡¬"},ILS:{name:"Israeli Shekel",flag:"ğŸ‡®ğŸ‡±"},JOD:{name:"Jordanian Dinar",flag:"ğŸ‡¯ğŸ‡´"},LBP:{name:"Lebanese Pound",flag:"ğŸ‡±ğŸ‡§"},PKR:{name:"Pakistani Rupee",flag:"ğŸ‡µğŸ‡°"},BDT:{name:"Bangladeshi Taka",flag:"ğŸ‡§ğŸ‡©"},LKR:{name:"Sri Lankan Rupee",flag:"ğŸ‡±ğŸ‡°"},NPR:{name:"Nepalese Rupee",flag:"ğŸ‡³ğŸ‡µ"},MMK:{name:"Myanmar Kyat",flag:"ğŸ‡²ğŸ‡²"},KHR:{name:"Cambodian Riel",flag:"ğŸ‡°ğŸ‡­"},LAK:{name:"Lao Kip",flag:"ğŸ‡±ğŸ‡¦"},BND:{name:"Brunei Dollar",flag:"ğŸ‡§ğŸ‡³"},TWD:{name:"Taiwan Dollar",flag:"ğŸ‡¹ğŸ‡¼"},HRK:{name:"Croatian Kuna",flag:"ğŸ‡­ğŸ‡·"},BGN:{name:"Bulgarian Lev",flag:"ğŸ‡§ğŸ‡¬"},RON:{name:"Romanian Leu",flag:"ğŸ‡·ğŸ‡´"},CZK:{name:"Czech Koruna",flag:"ğŸ‡¨ğŸ‡¿"},HUF:{name:"Hungarian Forint",flag:"ğŸ‡­ğŸ‡º"},ISK:{name:"Icelandic KrÃ³na",flag:"ğŸ‡®ğŸ‡¸"},BAM:{name:"Bosnian Mark",flag:"ğŸ‡§ğŸ‡¦"},MKD:{name:"Macedonian Denar",flag:"ğŸ‡²ğŸ‡°"},ALL:{name:"Albanian Lek",flag:"ğŸ‡¦ğŸ‡±"},RSD:{name:"Serbian Dinar",flag:"ğŸ‡·ğŸ‡¸"},GEL:{name:"Georgian Lari",flag:"ğŸ‡¬ğŸ‡ª"},AZN:{name:"Azerbaijani Manat",flag:"ğŸ‡¦ğŸ‡¿"},AMD:{name:"Armenian Dram",flag:"ğŸ‡¦ğŸ‡²"},BYN:{name:"Belarusian Ruble",flag:"ğŸ‡§ğŸ‡¾"},MDL:{name:"Moldovan Leu",flag:"ğŸ‡²ğŸ‡©"},KZT:{name:"Kazakhstani Tenge",flag:"ğŸ‡°ğŸ‡¿"},UZS:{name:"Uzbekistani Som",flag:"ğŸ‡ºğŸ‡¿"},TJS:{name:"Tajikistani Somoni",flag:"ğŸ‡¹ğŸ‡¯"},KGS:{name:"Kyrgyzstani Som",flag:"ğŸ‡°ğŸ‡¬"},TMT:{name:"Turkmenistani Manat",flag:"ğŸ‡¹ğŸ‡²"}};function La(){const ve=M(()=>Ct.selectedRelay),o=it.$subscribe(()=>{const x={filters:[{kinds:[38383],limit:100}],closeOnEose:!1};return e(ve)&&(x.relayUrls=[e(ve)],x.exclusiveRelay=!0),x}),O=M(()=>{const x=new Set;o.events.forEach(b=>{const g=b.tags,k=g.find($=>$[0]==="z");if(k&&k[1]==="info")return;const K=g.find($=>$[0]==="f")?.[1],D=g.find($=>$[0]==="s")?.[1];K&&D==="pending"&&x.add(K.toUpperCase())});const X=Array.from(x).map(b=>{const g=za[b];return{code:b,name:g?.name||b,flag:g?.flag||"ğŸ’±"}}).sort((b,g)=>b.code.localeCompare(g.code));return[{code:"all",name:"All",flag:"ğŸŒ"},...X]});return{get currencies(){return e(O)}}}const ja={Cash:{icon:"ğŸ’µ"},PIX:{icon:"ğŸ”„"},BLIK:{icon:"ğŸ“±"},Revolut:{icon:"ğŸ’³"},revolut:{icon:"ğŸ’³"},Zelle:{icon:"ğŸ¦"},CashApp:{icon:"ğŸ“²"},CVU:{icon:"ğŸ§"},MercadoPago:{icon:"ğŸ§"},f2f:{icon:"ğŸ¤"},"Bank Transfer":{icon:"ğŸ¦"},Wire:{icon:"ğŸ¦"},SEPA:{icon:"ğŸ‡ªğŸ‡º"},PayPal:{icon:"ğŸ’°"},Venmo:{icon:"ğŸ’¸"},Strike:{icon:"âš¡"},Wise:{icon:"ğŸŒ"},N26:{icon:"ğŸ’³"},Monzo:{icon:"ğŸ’³"},Starling:{icon:"ğŸ’³"},TransferWise:{icon:"ğŸŒ"},Instant:{icon:"âš¡"}};function Ua(){const ve=M(()=>Ct.selectedRelay),o=it.$subscribe(()=>{const x={filters:[{kinds:[38383],limit:100}],closeOnEose:!1};return e(ve)&&(x.relayUrls=[e(ve)],x.exclusiveRelay=!0),x}),O=M(()=>{const x=new Set;o.events.forEach(b=>{const g=b.tags,k=g.find($=>$[0]==="z");if(k&&k[1]==="info")return;const K=g.find($=>$[0]==="pm")?.[1],D=g.find($=>$[0]==="s")?.[1];K&&D==="pending"&&x.add(K)});const X=Array.from(x).map(b=>{const g=ja[b];return{id:b,name:b,icon:g?.icon||"ğŸ’³"}}).sort((b,g)=>b.name.localeCompare(g.name));return[{id:"all",name:"All Methods",icon:"ğŸ’°"},...X]});return{get paymentMethods(){return e(O)}}}var Fa=v("<option> </option>"),Ia=v("<option> </option>"),Oa=v('<div class="grid grid-cols-2 lg:grid-cols-1 gap-3 lg:gap-4"><div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Currency</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> Payment Method</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"></select></div> <div><label class="flex items-center gap-1.5 text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2"><svg class="w-3.5 h-3.5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg> Order Type</label> <select class="w-full px-2 py-1.5 lg:px-3 lg:py-2 text-sm border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"><option>All Orders</option><option>Buy Orders</option><option>Sell Orders</option></select></div> <div><label class="text-xs lg:text-sm font-medium text-neutral-400 mb-1 lg:mb-2 block">Amount Range (sats)</label> <div class="flex items-center gap-2"><input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Min"/> <span class="text-neutral-500 text-sm">-</span> <input type="number" class="w-full px-2 py-1.5 lg:py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Max"/></div></div></div>');function Ka(ve,o){Mt(o,!0);const{currencies:O}=La(),{paymentMethods:x}=Ua();var X=Oa(),b=a(X),g=r(a(b),2);g.__change=F=>o.onChange({...o.filters,currency:F.currentTarget.value}),at(g,21,()=>O,lt,(F,N)=>{var Y=Fa(),Ce=a(Y,!0);t(Y);var Te={};S(()=>{h(Ce,e(N).code==="all"?e(N).name:`${e(N).flag} ${e(N).code} - ${e(N).name}`),Te!==(Te=e(N).code)&&(Y.value=(Y.__value=e(N).code)??"")}),n(F,Y)}),t(g);var k;Wt(g),t(b);var K=r(b,2),D=r(a(K),2);D.__change=F=>o.onChange({...o.filters,paymentMethod:F.currentTarget.value}),at(D,21,()=>x,lt,(F,N)=>{var Y=Ia(),Ce=a(Y);t(Y);var Te={};S(()=>{h(Ce,`${e(N).icon??""} ${e(N).name??""}`),Te!==(Te=e(N).id)&&(Y.value=(Y.__value=e(N).id)??"")}),n(F,Y)}),t(D);var $;Wt(D),t(K);var H=r(K,2),c=r(a(H),2);c.__change=F=>o.onChange({...o.filters,orderType:F.currentTarget.value});var u=a(c);u.value=u.__value="all";var f=r(u);f.value=f.__value="buy";var J=r(f);J.value=J.__value="sell",t(c);var ne;Wt(c),t(H);var q=r(H,2),y=r(a(q),2),Pe=a(y);Ft(Pe),Pe.__input=F=>o.onChange({...o.filters,minAmount:parseInt(F.currentTarget.value)||0});var ee=r(Pe,4);Ft(ee),ee.__input=F=>o.onChange({...o.filters,maxAmount:parseInt(F.currentTarget.value)||1e6}),t(y),t(q),t(X),S(()=>{k!==(k=o.filters.currency)&&(g.value=(g.__value=o.filters.currency)??"",Xt(g,o.filters.currency)),$!==($=o.filters.paymentMethod)&&(D.value=(D.__value=o.filters.paymentMethod)??"",Xt(D,o.filters.paymentMethod)),ne!==(ne=o.filters.orderType)&&(c.value=(c.__value=o.filters.orderType)??"",Xt(c,o.filters.orderType)),or(Pe,o.filters.minAmount),or(ee,o.filters.maxAmount)}),n(ve,X),Bt()}Qt(["change","input"]);const Na=ve=>{var o=Ha(),O=a(o),x=a(O),X=r(a(x),2);{var b=g=>{var k=Ea();k.__click=()=>Ut.open(),n(g,k)};A(X,g=>{it.$currentUser&&g(b)})}t(x),t(O),t(o),n(ve,o)};var Ea=v('<button class="flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span>Create Order</span></button>'),Ha=v('<div class="border-b border-border sticky top-0 z-20 bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-foreground">P2P Trading</h1> <p class="text-sm text-neutral-400 mt-1">Buy and sell Bitcoin directly</p></div> <!></div></div></div>'),Va=v('<div class="p-3 lg:p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-3 lg:mb-4"><svg class="w-4 h-4 lg:w-5 lg:h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <h2 class="text-base lg:text-lg font-semibold text-foreground">Filters</h2></div> <!></div>'),Ga=v('<div class="px-4 sm:px-6 lg:px-8 py-6"><!></div> <!>',1);function wo(ve,o){Mt(o,!0);const O=()=>wr(Pr,"$page",x),[x,X]=kr(),b=c=>{var u=Va(),f=r(a(u),2);Ka(f,{get filters(){return e(g)},onChange:k}),t(u),n(c,u)},g=M(()=>({currency:O().url.searchParams.get("currency")||"all",paymentMethod:O().url.searchParams.get("paymentMethod")||"all",orderType:O().url.searchParams.get("orderType")||"all",minAmount:parseInt(O().url.searchParams.get("minAmount")||"0"),maxAmount:parseInt(O().url.searchParams.get("maxAmount")||"1000000")}));function k(c){const u=new URLSearchParams;c.currency!=="all"&&u.set("currency",c.currency),c.paymentMethod!=="all"&&u.set("paymentMethod",c.paymentMethod),c.orderType!=="all"&&u.set("orderType",c.orderType),c.minAmount>0&&u.set("minAmount",c.minAmount.toString()),c.maxAmount<1e6&&u.set("maxAmount",c.maxAmount.toString());const f=u.toString();Cr(`/trades${f?`?${f}`:""}`,{replaceState:!0})}zt(()=>(tr.header=Na,Jt.rightSidebar=b,Jt.showOnMobile=!0,()=>{tr.clear(),Jt.clear()}));var K=Ga(),D=j(K),$=a(D);ra($,{get filters(){return e(g)}}),t(D);var H=r(D,2);Ta(H,{get onClose(){return Ut.close},get open(){return Ut.show},set open(c){Ut.show=c}}),n(ve,K),Bt(),X()}Qt(["click"]);export{wo as component};
