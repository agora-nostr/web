import{d as q,c as _,a as n,f as I,s as z}from"../chunks/rzUyzf2y.js";import{p as B,u as x,g as a,a as f,s as t,b as l,f as k,c as J,d as h,e as y,r as $,t as L}from"../chunks/AsQG98fS.js";import{i as F}from"../chunks/DZKExFZC.js";import{s as M,a as Q}from"../chunks/DfBYFC16.js";import{p as V}from"../chunks/BcDbBYPM.js";import{g as i}from"../chunks/s53o-P2j.js";import{n as N,N as S,a as W}from"../chunks/tv6-RHC_.js";var X=I('<div class="flex flex-col items-center justify-center min-h-screen bg-background"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div> <p class="mt-4 text-muted-foreground">Redirecting...</p></div>'),Y=I('<div class="flex flex-col items-center justify-center min-h-screen px-4 bg-background"><h1 class="text-2xl font-bold text-foreground mb-2">Content Not Found</h1> <p class="text-muted-foreground mb-4"> </p> <button type="button" class="px-4 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors text-sm font-medium">Go Home</button></div>');function oe(K,j){B(j,!0);const p=()=>Q(V,"$page",w),[w,C]=M(),D=f(()=>p().params.nip05),m=f(()=>p().params.identifier);let A=l(null),o=l(!0),s=l(null),g=l(void 0);x(()=>{N.fetchUser(a(D)).then(e=>{t(g,e,!0)})});const v=f(()=>a(g)?.pubkey);x(()=>{if(!a(v)||!a(m)){t(o,!1),t(s,"Invalid user or identifier");return}t(o,!0),t(s,null),N.guardrailOff("fetch-events-usage").fetchEvent({authors:[a(v)],"#d":[a(m)]}).then(e=>{if(!e){t(s,"Event not found"),t(o,!1);return}t(A,e,!0);const r=e.encode();e.kind===S.Article?i(`/article/${r}`,{replaceState:!0}):S.Classified===e.kind?i(`/marketplace/${r}`,{replaceState:!0}):[W.kind].includes(e.kind||0)?i(`/packs/${r}`,{replaceState:!0}):i(`/e/${r}`,{replaceState:!0})}).catch(e=>{console.error("Failed to fetch event:",e),t(s,"Failed to load event"),t(o,!1)})});var b=_(),G=k(b);{var H=e=>{var r=X();n(e,r)},O=e=>{var r=_(),P=k(r);{var R=c=>{var d=Y(),u=h(y(d),2),T=y(u,!0);$(u);var U=h(u,2);U.__click=()=>i("/"),$(d),L(()=>z(T,a(s))),n(c,d)};F(P,c=>{a(s)&&c(R)},!0)}n(e,r)};F(G,e=>{a(o)?e(H):e(O,!1)})}n(K,b),J(),C()}q(["click"]);export{oe as component};
