import{d as lt,f as c,a as d,s as f}from"../chunks/rzUyzf2y.js";import{p as vt,u as dt,s as ct,b as pt,e as r,t as m,c as ut,d as l,g as e,r as a,f as ft,a as L}from"../chunks/AsQG98fS.js";import{i as _}from"../chunks/DZKExFZC.js";import{e as gt,i as mt}from"../chunks/Cztbr3Ea.js";import{c as H}from"../chunks/CS0aOiUg.js";import{a as _t,s as ht}from"../chunks/DfBYFC16.js";import{n as xt}from"../chunks/tv6-RHC_.js";import{p as bt}from"../chunks/BcDbBYPM.js";import{g as kt}from"../chunks/s53o-P2j.js";var wt=c('<div class="text-center py-12"><p class="text-muted-foreground">Listing not found</p></div>'),yt=c('<div class="mb-6"><img class="w-full rounded-lg object-cover aspect-video"/></div>'),$t=c('<span class="text-sm"> </span>'),Mt=c('<div class="text-lg px-4 py-2 bg-primary/20 text-primary rounded-lg font-semibold"> <!></div>'),Vt=c('<div class="mb-4 p-4 bg-red-900/20 text-red-400 rounded-lg text-center font-semibold">This item has been sold</div>'),jt=c('<div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></div>'),Lt=c('<span class="inline-flex items-center gap-1 px-3 py-1 bg-primary-900/20 text-primary rounded-full text-sm"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> </span>'),qt=c('<div class="flex flex-wrap gap-2 mb-6"></div>'),zt=c('<!> <div class="mb-6"><div class="flex items-start justify-between mb-4"><h1 class="text-2xl font-bold text-foreground svelte-17ht8x9"> </h1> <!></div> <!> <div class="flex flex-wrap gap-4 text-sm text-muted-foreground mb-6"><!> <div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div></div> <!> <div class="prose prose-invert max-w-none"><h3 class="text-lg font-semibold mb-2 text-foreground">Description</h3> <div class="whitespace-pre-wrap text-muted-foreground"> </div></div></div>',1),Bt=c('<div class="listing-detail-container svelte-17ht8x9"><div class="listing-header svelte-17ht8x9"><button class="back-btn svelte-17ht8x9"><svg class="w-6 h-6 svelte-17ht8x9" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h1 class="svelte-17ht8x9"> </h1></div> <div class="listing-content svelte-17ht8x9"><!></div></div>');function Ht(I,J){vt(J,!0);const K=()=>_t(bt,"$page",N),[N,O]=ht(),q=K().params.id;let i=pt(null);dt(()=>{q&&xt.fetchEvent(q).then(n=>{ct(i,n,!0)})});const Q=L(()=>{if(!e(i)?.created_at)return"recently";const n=Date.now(),s=e(i).created_at*1e3,u=n-s,h=Math.floor(u/6e4),x=Math.floor(u/36e5),b=Math.floor(u/864e5);return b>0?`${b} day${b>1?"s":""} ago`:x>0?`${x} hour${x>1?"s":""} ago`:h>0?`${h} minute${h>1?"s":""} ago`:"just now"});function R(n){if(!n)return null;const s=n.tags.find(u=>u[0]==="price");return!s||!s[1]||!s[2]?null:{amount:s[1],currency:s[2],frequency:s[3]}}var w=Bt(),y=r(w),z=r(y);z.__click=()=>kt("/marketplace");var B=l(z,2),S=r(B,!0);a(B),a(y);var C=l(y,2),W=r(C);{var X=n=>{var s=wt();d(n,s)},Y=n=>{const s=L(()=>R(e(i))),u=L(()=>e(i).tags.filter(t=>t[0]==="t").map(t=>t[1]));var h=zt(),x=ft(h);{var b=t=>{var o=yt(),v=r(o);a(o),m((g,p)=>{H(v,"src",g),H(v,"alt",p)},[()=>e(i).tagValue("image"),()=>e(i).tagValue("title")||"Listing"]),d(t,o)};_(x,t=>{e(i).tagValue("image")&&t(b)})}var T=l(x,2),$=r(T),M=r($),Z=r(M,!0);a(M);var tt=l(M,2);{var et=t=>{var o=Mt(),v=r(o),g=l(v);{var p=k=>{var j=$t(),nt=r(j);a(j),m(()=>f(nt,`/${e(s).frequency??""}`)),d(k,j)};_(g,k=>{e(s).frequency&&e(s).frequency!=="once"&&k(p)})}a(o),m(()=>f(v,`${e(s).amount??""} ${e(s).currency??""} `)),d(t,o)};_(tt,t=>{e(s)&&t(et)})}a($);var A=l($,2);{var at=t=>{var o=Vt();d(t,o)};_(A,t=>{e(i).tagValue("status")==="sold"&&t(at)})}var V=l(A,2),D=r(V);{var rt=t=>{var o=jt(),v=l(r(o),2),g=r(v,!0);a(v),a(o),m(p=>f(g,p),[()=>e(i).tagValue("location")]),d(t,o)};_(D,t=>{e(i).tagValue("location")&&t(rt)})}var P=l(D,2),E=l(r(P),2),st=r(E);a(E),a(P),a(V);var U=l(V,2);{var ot=t=>{var o=qt();gt(o,21,()=>e(u),mt,(v,g)=>{var p=Lt(),k=l(r(p));a(p),m(()=>f(k,` ${e(g)??""}`)),d(v,p)}),a(o),d(t,o)};_(U,t=>{e(u).length>0&&t(ot)})}var F=l(U,2),G=l(r(F),2),it=r(G,!0);a(G),a(F),a(T),m(t=>{f(Z,t),f(st,`Posted ${e(Q)??""}`),f(it,e(i).content)},[()=>e(i).tagValue("title")||"Untitled"]),d(n,h)};_(W,n=>{e(i)?n(Y,!1):n(X)})}a(C),a(w),m(n=>f(S,n),[()=>e(i)?.tagValue("title")||"Listing"]),d(I,w),ut(),O()}lt(["click"]);export{Ht as component};
