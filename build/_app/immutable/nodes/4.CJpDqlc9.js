import"../chunks/DsnmJJEf.js";import{d as q,p as z,u as _,g as a,a as f,s as t,b as n,c as k,f as x,e as l,h as B,i as j,j as h,k as y,r as $,t as J,l as L}from"../chunks/Bq750rDx.js";import{i as F}from"../chunks/BcjopvHb.js";import{s as M,a as Q}from"../chunks/wxUnewq1.js";import{p as V}from"../chunks/CFwZN-iQ.js";import{g as i}from"../chunks/C88829DE.js";import{n as N,N as S,a as W}from"../chunks/CdRP5_sk.js";var X=j('<div class="flex flex-col items-center justify-center min-h-screen bg-background"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div> <p class="mt-4 text-muted-foreground">Redirecting...</p></div>'),Y=j('<div class="flex flex-col items-center justify-center min-h-screen px-4 bg-background"><h1 class="text-2xl font-bold text-foreground mb-2">Content Not Found</h1> <p class="text-muted-foreground mb-4"> </p> <button type="button" class="px-4 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors text-sm font-medium">Go Home</button></div>');function oe(I,K){z(K,!0);const p=()=>Q(V,"$page",w),[w,C]=M(),D=f(()=>p().params.nip05),m=f(()=>p().params.identifier);let A=n(null),o=n(!0),s=n(null),g=n(void 0);_(()=>{N.fetchUser(a(D)).then(e=>{t(g,e,!0)})});const v=f(()=>a(g)?.pubkey);_(()=>{if(!a(v)||!a(m)){t(o,!1),t(s,"Invalid user or identifier");return}t(o,!0),t(s,null),N.guardrailOff("fetch-events-usage").fetchEvent({authors:[a(v)],"#d":[a(m)]}).then(e=>{if(!e){t(s,"Event not found"),t(o,!1);return}t(A,e,!0);const r=e.encode();e.kind===S.Article?i(`/article/${r}`,{replaceState:!0}):S.Classified===e.kind?i(`/marketplace/${r}`,{replaceState:!0}):[W.kind].includes(e.kind||0)?i(`/packs/${r}`,{replaceState:!0}):i(`/e/${r}`,{replaceState:!0})}).catch(e=>{console.error("Failed to fetch event:",e),t(s,"Failed to load event"),t(o,!1)})});var b=k(),G=x(b);{var H=e=>{var r=X();l(e,r)},O=e=>{var r=k(),P=x(r);{var R=c=>{var d=Y(),u=h(y(d),2),T=y(u,!0);$(u);var U=h(u,2);U.__click=()=>i("/"),$(d),J(()=>L(T,a(s))),l(c,d)};F(P,c=>{a(s)&&c(R)},!0)}l(e,r)};F(G,e=>{a(o)?e(H):e(O,!1)})}l(I,b),B(),C()}q(["click"]);export{oe as component};
