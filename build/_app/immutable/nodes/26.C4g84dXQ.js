import"../chunks/DsnmJJEf.js";import{d as ye,p as we,i as C,k as r,g as e,b as ae,L as me,r as t,j as o,t as B,a as R,l as c,P as Ae,aR as Ze,e as f,h as Pe,s as N,K as Qe,u as Ye,c as Ve,f as ke,M as Xe,O as nt,aP as it}from"../chunks/Bq750rDx.js";import{i as L}from"../chunks/BcjopvHb.js";import{a as ge,c as fe,r as Be,b as $e,s as Me,d as st}from"../chunks/uSFILAY7.js";import{a as et,f as qe,N as lt,A as Ke,n as be,e as dt,k as tt,K as ct}from"../chunks/CdRP5_sk.js";import{g as vt}from"../chunks/C88829DE.js";import{o as re}from"../chunks/CXnZGrn4.js";import{e as We}from"../chunks/Cjcfrngr.js";import{a as Fe,s as He}from"../chunks/wxUnewq1.js";import{$ as Je,a as ut}from"../chunks/L2joq6-K.js";import{b as rt}from"../chunks/BL6J_geM.js";import{N as at,c as ot}from"../chunks/wiMjQwcH.js";import{a as gt,N as ft}from"../chunks/CPZq7sH0.js";async function mt(m,a){const i=new Set;try{const n=await m.signer?.user();if(!n)throw new Error("No user logged in");const b=await m.fetchEvent({kinds:[3],authors:[n.pubkey]}),y=new Set;b&&b.tags.filter(l=>l[0]==="p").forEach(l=>y.add(l[1]));for(const l of a)try{const g=await m.fetchEvent(l);g&&et.from(g).pubkeys?.forEach(v=>{y.has(v)||i.add(v)})}catch(g){console.error(`Error processing pack ${l}:`,g)}if(i.size>0){const l=new qe(m);l.kind=3,l.content=b?.content||"",b?l.tags=[...b.tags]:l.tags=[];for(const g of i)l.tags.push(["p",g]);await l.publish()}return Array.from(i)}catch(n){throw console.error("Error following pack users:",n),n}}var bt=C('<img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community gathering" class="absolute inset-0 w-full h-full object-cover"/>'),pt=C('<div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-700"></div>'),xt=C('<button><div class="relative h-32"><img class="absolute inset-0 w-full h-full object-cover"/> <div style="display: none;"></div> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div> <div class="absolute bottom-3 left-3 right-3"><div class="flex items-center gap-2 text-foreground"><span class="text-2xl"> </span> <span class="font-semibold"> </span></div> <div class="text-xs text-foreground/80 mt-1"> </div></div></div></button>'),ht=C(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><!> <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div> <div class="absolute bottom-12 left-12 right-12 text-foreground"><h1 class="text-5xl font-bold mb-4">Your Voice Matters</h1> <p class="text-xl opacity-90">Join a community where every voice counts. Connect with leaders,
        share stories, and build the future together.</p></div></div> <div class="flex-1 flex items-center justify-center p-8 lg:p-12"><div class="max-w-xl w-full"><div class="mb-12 lg:hidden"><h1 class="text-4xl font-bold mb-3">Your Voice Matters</h1> <p class="text-muted-foreground">Choose your community to connect with local voices</p></div> <div class="lg:mb-8"><h2 class="text-2xl font-semibold mb-3">Choose Your Community</h2> <p class="text-muted-foreground text-sm">Select where you want to connect and contribute</p></div> <div class="grid grid-cols-2 gap-3 mb-8"></div> <button>Continue ‚Üí</button></div></div></div>`);function _t(m,a){we(a,!0);const i=[{id:"venezuela",name:"Venezuela",flag:"üáªüá™",description:"Connect with the resilient Venezuelan community",image:"https://images.unsplash.com/photo-1520525003249-2b9cdda513bc?w=800&q=80",fallbackColor:"from-yellow-500 to-blue-600",leaders:["Mar√≠a Rodr√≠guez","Carlos Mendoza","Ana Lucia"]},{id:"cambodia",name:"Cambodia",flag:"üá∞üá≠",description:"Join voices from the Kingdom of Wonder",image:"https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=800&q=80",fallbackColor:"from-red-500 to-blue-700",leaders:["Sokha Chen","Dara Vong","Srey Mom"]},{id:"nicaragua",name:"Nicaragua",flag:"üá≥üáÆ",description:"Unite with Nicaraguan changemakers",image:"https://images.unsplash.com/photo-1503542724004-53f16c988e63?w=800&q=80",fallbackColor:"from-blue-500 to-sky-600",leaders:["Roberto Silva","Elena Martinez","Juan Carlos"]},{id:"zimbabwe",name:"Zimbabwe",flag:"üáøüáº",description:"Connect with Zimbabwe's innovators",image:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=800&q=80",fallbackColor:"from-green-600 to-yellow-500",leaders:["Tendai Moyo","Grace Ndlovu","David Chuma"]},{id:"afghanistan",name:"Afghanistan",flag:"üá¶üá´",description:"Support Afghan voices of hope",image:"https://images.unsplash.com/photo-1574482620811-1aa16ffe3c82?w=800&q=80",fallbackColor:"from-black to-red-700",leaders:["Ahmad Shah","Fatima Rashidi","Nasir Khan"]},{id:"iran",name:"Iran",flag:"üáÆüá∑",description:"Join the Persian community",image:"https://images.unsplash.com/photo-1608592077365-c6399182e63c?w=800&q=80",fallbackColor:"from-green-600 to-red-600",leaders:["Reza Hosseini","Maryam Azadi","Ali Karimi"]}];let n=ae(!1);var b=ht(),y=r(b),l=r(y);{var g=D=>{var p=bt();Ae("error",p,()=>N(n,!0)),Ze(p),f(D,p)},w=D=>{var p=pt();f(D,p)};L(l,D=>{e(n)?D(w,!1):D(g)})}me(4),t(y);var v=o(y,2),A=r(v),_=o(r(A),4);We(_,21,()=>i,D=>D.id,(D,p)=>{const S=R(()=>a.selectedCommunity===e(p).id);var E=xt();E.__click=()=>a.onSelectCommunity(e(p).id);var U=r(E),P=r(U),z=o(P,2),O=o(z,4),u=r(O),h=r(u),x=r(h,!0);t(h);var K=o(h,2),Z=r(K,!0);t(K),t(u);var F=o(u,2),T=r(F);t(F),t(O),t(U),t(E),B(()=>{ge(E,1,`
              relative overflow-hidden rounded-lg border-2 transition-all
              ${e(S)?"border-black dark:border-white shadow-lg scale-[1.02]":"border hover:border dark:hover:border"}
            `),fe(P,"src",e(p).image),fe(P,"alt",e(p).name),ge(z,1,`absolute inset-0 bg-gradient-to-br ${e(p).fallbackColor}`),c(x,e(p).flag),c(Z,e(p).name),c(T,`${e(p).leaders.length??""} community leaders`)}),Ae("error",P,G=>{const W=G.currentTarget;W.style.display="none";const H=W.nextElementSibling;H&&(H.style.display="block")}),Ze(P),f(D,E)}),t(_);var M=o(_,2);M.__click=function(...D){a.onNext?.apply(this,D)},t(A),t(v),t(b),B(()=>{M.disabled=!a.selectedCommunity,ge(M,1,`
          w-full py-4 px-6 rounded-lg font-medium transition-all
          ${a.selectedCommunity?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `)}),f(m,b),Pe()}ye(["click"]);const kt={venezuela:[Ke[1]],nicaragua:[Ke[2]]},yt=lt.FollowPack,Ge={venezuela:{name:"Venezuela",description:"Connect with the Venezuelan community"},cambodia:{name:"Cambodia",description:"Join voices from the Kingdom of Wonder"},nicaragua:{name:"Nicaragua",description:"Unite with Nicaraguan changemakers"},zimbabwe:{name:"Zimbabwe",description:"Connect with Zimbabwe's innovators"},afghanistan:{name:"Afghanistan",description:"Support Afghan voices of hope"},iran:{name:"Iran",description:"Join the Persian community"}};var wt=C('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div> <p class="mt-4 text-sm text-muted-foreground">Loading follow packs...</p></div>'),Pt=C('<div class="text-center py-8 text-muted-foreground">No follow packs available for this community yet</div>'),Ct=C('<img class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg object-cover flex-shrink-0"/>'),St=C('<div class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0"><span class="text-xl sm:text-2xl">üì¶</span></div>'),It=C('<p class="text-xs sm:text-sm text-muted-foreground line-clamp-1 sm:truncate"> </p>'),Nt=C('<div class="absolute top-1/2 right-4 -translate-y-1/2 bg-primary text-foreground rounded-full p-1.5 z-10"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Dt=C('<button><!> <div class="flex-1 min-w-0"><h4 class="font-semibold text-sm sm:text-base text-foreground truncate"> </h4> <!> <div class="flex items-center gap-2 sm:gap-3 mt-1 sm:mt-2"><span class="text-[10px] sm:text-xs text-muted-foreground"> </span></div></div> <!></button>'),Ut=C('<div class="space-y-2 mb-6 lg:mb-8 max-h-[50vh] lg:max-h-[60vh] overflow-y-auto p-2 -m-2"></div>'),zt=C(`<div class="flex min-h-screen"><div class="hidden lg:block w-1/2 relative"><img src="https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200&amp;q=80" alt="Community leaders" class="absolute inset-0 w-full h-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"></div> <div class="absolute bottom-0 left-0 right-0 p-12"><div class="mb-8"><p class="text-3xl text-foreground/90 italic leading-relaxed">"We're not just surviving‚Äîwe're building the future our community deserves. One voice at a time."</p></div> <div class="flex items-center gap-4"><div class="w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-foreground font-semibold">MR</div> <div class="text-foreground"><div class="font-semibold">Mar√≠a Rodr√≠guez</div> <div class="text-sm opacity-75">Community Organizer ¬∑ Caracas</div></div></div></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-12"><div class="max-w-xl w-full"><div class="mb-6 lg:mb-8"><h1 class="text-2xl lg:text-3xl font-bold mb-2 lg:mb-3">Build Your Network</h1> <p class="text-sm lg:text-base text-muted-foreground"> </p></div> <!> <button>Continue ‚Üí</button></div></div></div>`);function At(m,a){we(a,!0);let i=ae(Qe([])),n=ae(!0);Ye(()=>{const P=a.selectedCommunity||"venezuela",z=kt[P];if(!z||z.length===0){console.warn(`No relay configured for community: ${P}`),N(n,!1);return}N(n,!0);const O=[],u={kinds:[yt]},h=be.subscribe(u,{closeOnEose:!0,cacheUsage:dt.ONLY_RELAY},z);return h.on("event",x=>{const K=et.from(x);O.push(K)}),h.on("eose",()=>{N(i,O,!0),N(n,!1)}),()=>{h.stop()}});const b=a.selectedCommunity||"venezuela",y=Ge[b]||Ge.venezuela;function l(P){const z=P.encode();a.selectedPacks.includes(z)?a.onSelectPacks(a.selectedPacks.filter(O=>O!==z)):a.onSelectPacks([...a.selectedPacks,z])}function g(){a.selectedPacks.length!==0&&a.onNext()}var w=zt(),v=o(r(w),2),A=r(v),_=r(A),M=o(r(_),2),D=r(M);t(M),t(_);var p=o(_,2);{var S=P=>{var z=wt();f(P,z)},E=P=>{var z=Ve(),O=ke(z);{var u=x=>{var K=Pt();f(x,K)},h=x=>{var K=Ut();We(K,21,()=>e(i).slice(0,6),Z=>Z.id,(Z,F)=>{const T=R(()=>a.selectedPacks.includes(e(F).encode()));var G=Dt();G.__click=()=>l(e(F));var W=r(G);{var H=J=>{var Q=Ct();B(()=>{fe(Q,"src",e(F).image),fe(Q,"alt",e(F).title)}),f(J,Q)},q=J=>{var Q=St();f(J,Q)};L(W,J=>{e(F).image?J(H):J(q,!1)})}var Y=o(W,2),ee=r(Y),oe=r(ee,!0);t(ee);var d=o(ee,2);{var $=J=>{var Q=It(),ce=r(Q,!0);t(Q),B(()=>c(ce,e(F).description)),f(J,Q)};L(d,J=>{e(F).description&&J($)})}var ne=o(d,2),pe=r(ne),de=r(pe);t(pe),t(ne),t(Y);var xe=o(Y,2);{var ie=J=>{var Q=Nt();f(J,Q)};L(xe,J=>{e(T)&&J(ie)})}t(G),B(()=>{ge(G,1,`
                  relative w-full cursor-pointer rounded-xl transition-all text-left
                  flex gap-3 sm:gap-4 p-3 sm:p-4 bg-card hover:bg-accent border border dark:border
                  ${e(T)?"ring-2 ring-orange-500 bg-primary-50 dark:bg-primary-950/20":""}
                `),c(oe,e(F).title),c(de,`${(e(F).pubkeys?.length||0)??""} members`)}),f(Z,G)}),t(K),f(x,K)};L(O,x=>{e(i).length===0?x(u):x(h,!1)},!0)}f(P,z)};L(p,P=>{e(n)?P(S):P(E,!1)})}var U=o(p,2);U.__click=g,t(A),t(v),t(w),B(()=>{c(D,`Follow curated packs from the ${y.name??""} community`),U.disabled=a.selectedPacks.length===0||e(n),ge(U,1,`
          w-full py-3 lg:py-4 px-6 rounded-lg font-medium transition-all text-sm lg:text-base
          ${a.selectedPacks.length>0&&!e(n)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `)}),f(m,w),Pe()}ye(["click"]);var jt=C(`<div class="min-h-screen flex items-center justify-center p-8 py-16"><div class="max-w-5xl w-full"><div class="text-center mb-12"><h2 class="text-3xl font-bold mb-3"> </h2> <p class="text-lg text-muted-foreground"> </p></div> <div class="grid md:grid-cols-3 gap-6 mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üõçÔ∏è</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">MR</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Mar√≠a's Bakery</div> <div class="text-xs text-muted-foreground">2km away</div></div></div> <div class="text-sm font-medium mb-1">Fresh Bread & Pastries</div> <div class="text-xs text-muted-foreground mb-2">Daily baked goods, accepting sats</div> <div class="text-sm font-semibold">2,500 sats / dozen</div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">ü§ù</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 border border"><div class="space-y-2"><div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-green-600 dark:text-green-400 font-semibold">BUY</span> <span class="font-medium">100 USD</span></div> <div class="text-right"><div class="font-semibold">485k sats</div></div></div> <div class="flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs"><div class="flex items-center gap-2"><span class="text-red-600 dark:text-red-400 font-semibold">SELL</span> <span class="font-medium">50 USD</span></div> <div class="text-right"><div class="font-semibold">240k sats</div></div></div></div> <div class="flex items-center justify-center gap-1 text-xs text-muted-foreground mt-3"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span> </span></div></div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6 border border"><div class="text-5xl mb-4 text-center">üì∞</div> <h3 class="text-xl font-bold mb-2 text-center"> </h3> <p class="text-sm text-muted-foreground mb-4 text-center"> </p> <div class="bg-card rounded-lg p-4 text-left border border"><div class="flex items-center gap-2 mb-2"><div class="w-8 h-8 bg-neutral-300 dark:bg-muted rounded-full flex items-center justify-center text-xs font-medium">CM</div> <div class="flex-1 min-w-0"><div class="font-semibold text-sm truncate">Carlos Mendoza</div> <div class="text-xs text-muted-foreground">2 hours ago</div></div></div> <div class="text-sm font-medium mb-1">Alternative Supply Chain</div> <div class="text-xs text-muted-foreground mb-2">Direct farmer-to-community network reduces costs by 40%...</div> <div class="flex items-center gap-3 text-xs text-muted-foreground"><span>‚ö° 23.5k</span> <span>üí¨ 156</span> <span>üîÅ 89</span></div></div></div></div> <div class="text-center"><button class="bg-background dark:bg-white text-foreground dark:text-black px-8 py-3 rounded-lg font-medium hover:bg-muted dark:hover:bg-neutral-200 transition-colors"> </button></div></div></div>`);function Mt(m,a){we(a,!0);const i=()=>Fe(Je,"$t",n),[n,b]=He();var y=jt(),l=r(y),g=r(l),w=r(g),v=r(w,!0);t(w);var A=o(w,2),_=r(A,!0);t(A),t(g);var M=o(g,2),D=r(M),p=o(r(D),2),S=r(p,!0);t(p);var E=o(p,2),U=r(E,!0);t(E),me(2),t(D);var P=o(D,2),z=o(r(P),2),O=r(z,!0);t(z);var u=o(z,2),h=r(u,!0);t(u);var x=o(u,2),K=o(r(x),2),Z=o(r(K),2),F=r(Z,!0);t(Z),t(K),t(x),t(P);var T=o(P,2),G=o(r(T),2),W=r(G,!0);t(G);var H=o(G,2),q=r(H,!0);t(H),me(2),t(T),t(M);var Y=o(M,2),ee=r(Y);ee.__click=function(...d){a.onNext?.apply(this,d)};var oe=r(ee);t(ee),t(Y),t(l),t(y),B((d,$,ne,pe,de,xe,ie,J,Q,ce)=>{c(v,d),c(_,$),c(S,ne),c(U,pe),c(O,de),c(h,xe),c(F,ie),c(W,J),c(q,Q),c(oe,`${ce??""} ‚Üí`)},[()=>i()("onboarding.step3Features.title"),()=>i()("onboarding.step3Features.subtitle"),()=>i()("onboarding.step3Features.marketplace.title"),()=>i()("onboarding.step3Features.marketplace.description"),()=>i()("onboarding.step3Features.p2p.title"),()=>i()("onboarding.step3Features.p2p.description"),()=>i()("onboarding.step3Features.p2p.escrowProtected"),()=>i()("onboarding.step3Features.news.title"),()=>i()("onboarding.step3Features.news.description"),()=>i()("onboarding.step3Features.continue")]),f(m,y),Pe(),b()}ye(["click"]);var Et=C('<img alt="Profile" class="w-full h-full object-cover"/> <div class="absolute inset-0 bg-background/0 hover:bg-background/40 transition-all flex items-center justify-center opacity-0 hover:opacity-100"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Ft=C('<p class="text-xs mt-2 text-muted-foreground"> </p>'),Rt=C('<div class="w-full h-full bg-neutral-100 dark:bg-muted flex flex-col items-center justify-center"><div class="w-12 h-12 border-4 border border-t-neutral-900 dark:border-t-white rounded-full animate-spin"></div> <!></div>'),Lt=C('<span class="text-3xl font-bold group-hover:opacity-50 transition-opacity"> </span> <div class="opacity-0 group-hover:opacity-100 transition-opacity absolute inset-0 flex items-center justify-center bg-background/40"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></div>',1),Ot=Xe('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-muted-foreground"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>'),Tt=C('<div class="w-full h-full bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100 transition-colors flex flex-col items-center justify-center gap-2 group"><!></div>'),Bt=C('<p class="text-xs text-red-600 dark:text-red-400 mt-2 text-center"> </p>'),Kt=C('<div class="w-full"><input type="file" accept="image/*" class="hidden"/> <div role="button" tabindex="0"><!></div> <!></div>');function Yt(m,a){we(a,!0);const i=new at(a.ndk),n=ot(i);let b,y=ae(Qe(a.currentImageUrl||null)),l=ae(!1);async function g(u){if(!u.type.startsWith("image/")){alert("Please select an image file");return}const h=new FileReader;h.onload=x=>{N(y,x.target?.result,!0)},h.readAsDataURL(u);try{await n.upload(u,{fallbackServer:"https://blossom.primal.net"}),n.result?.url&&a.onUploadComplete(n.result.url)}catch(x){console.error("Upload failed:",x),N(y,null)}}function w(u){const x=u.target.files?.[0];x&&g(x)}function v(u){u.preventDefault(),N(l,!0)}function A(){N(l,!1)}async function _(u){u.preventDefault(),N(l,!1);const h=u.dataTransfer?.files[0];h&&await g(h)}function M(){b?.click()}var D=Kt(),p=r(D);p.__change=w,rt(p,u=>b=u,()=>b);var S=o(p,2);S.__click=M,S.__keydown=u=>u.key==="Enter"&&M();var E=r(S);{var U=u=>{var h=Et(),x=ke(h);me(2),B(()=>fe(x,"src",e(y))),f(u,h)},P=u=>{var h=Ve(),x=ke(h);{var K=F=>{var T=Rt(),G=o(r(T),2);{var W=H=>{var q=Ft(),Y=r(q);t(q),B(()=>c(Y,`${n.progress.percentage??""}%`)),f(H,q)};L(G,H=>{n.progress&&H(W)})}t(T),f(F,T)},Z=F=>{var T=Tt(),G=r(T);{var W=q=>{var Y=Lt(),ee=ke(Y),oe=r(ee,!0);t(ee),me(2),B(()=>c(oe,a.fallbackInitials)),f(q,Y)},H=q=>{var Y=Ot();f(q,Y)};L(G,q=>{a.fallbackInitials?q(W):q(H,!1)})}t(T),f(F,T)};L(x,F=>{n.status==="uploading"?F(K):F(Z,!1)},!0)}f(u,h)};L(E,u=>{e(y)&&n.status!=="uploading"?u(U):u(P,!1)})}t(S);var z=o(S,2);{var O=u=>{var h=Bt(),x=r(h,!0);t(h),B(()=>c(x,n.error?.message||"Upload failed")),f(u,h)};L(z,u=>{n.status==="error"&&u(O)})}t(D),B(()=>ge(S,1,`
      relative w-32 h-32 rounded-full overflow-hidden cursor-pointer
      border-4 border-background
      transition-all duration-200
      ${e(l)?"scale-105 border-foreground":""}
      ${n.status==="uploading"?"pointer-events-none":""}
    `)),Ae("dragover",S,v),Ae("dragleave",S,A),Ae("drop",S,_),f(m,D),Pe()}ye(["change","click","keydown"]);function Vt(m){try{return new URL(m).hostname}catch{return""}}async function qt(m,a){if(!m||!a)return{available:!1,error:"Username and domain are required"};if(!/^[a-z0-9_-]+$/i.test(m))return{available:!1,error:"Username can only contain letters, numbers, underscore, and hyphen"};try{const n=`${a.includes("localhost")||a.includes("test")?"http":"https"}://${a}/.well-known/nostr.json?name=${encodeURIComponent(m)}`,b=await fetch(n);if(b.status===404)return{available:!0};if(b.ok){const y=await b.json();return y.names&&y.names[m]?{available:!1,error:"Username is already taken"}:{available:!0}}return{available:!1,error:"Unable to check availability. Please try again."}}catch(i){return console.error("Error checking NIP-05 availability:",i),{available:!0}}}function Wt(m,a){return`${m}@${a}`}var Ht=C('<div class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span class="text-foreground text-sm font-medium"> </span>',1),Jt=Xe('<svg class="w-8 h-8 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>'),Zt=C('<div class="px-2 py-1 bg-red-500/10 border-t border-red-500/20"><p class="text-xs text-red-600 dark:text-red-400"> </p></div>'),Gt=C("<div> </div>"),Qt=C('<div class="space-y-1"><div class="text-xs text-muted-foreground font-medium"> </div> <div class="flex items-center gap-1"><input type="text" class="text-sm text-foreground bg-transparent border-b-2 border hover:border focus:border-primary dark:focus:border-primary outline-none transition-colors flex-1 min-w-0"/> <span class="text-sm text-muted-foreground"> </span></div> <!></div>'),Xt=C('<div class="min-h-screen flex flex-col items-center justify-center p-8"><div class="text-center mb-8 max-w-2xl"><h1 class="text-4xl font-bold mb-3"> </h1> <p class="text-lg text-muted-foreground"> </p></div> <div class="relative flex items-center justify-center gap-6 mb-12"><div class="w-80 bg-card border border rounded-xl overflow-hidden transform -rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OQwX.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OQwW.jpg" alt="Leopoldo L√≥pez" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Leopoldo L√≥pez</h3> <p class="text-sm text-muted-foreground mb-2">‚úì leo@primal.net</p> <p class="text-sm text-muted-foreground">Former Mayor of Caracas (2000-08). Political prisoner 2014-21. Co-founder of World Liberty Congress.</p></div></div></div> <div class="w-96 bg-card border-2 border-foreground rounded-xl overflow-hidden shadow-2xl transform scale-105 z-10"><input type="file" accept="image/*" class="hidden"/> <button type="button" class="h-36 relative w-full group bg-gradient-to-br from-primary-500 to-primary-600"><div class="absolute inset-0 bg-background/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2"><!></div></button> <!> <div class="relative -mt-14 px-6 pb-6"><!> <div class="space-y-3"><div><input type="text" class="text-2xl font-bold bg-transparent border-b-2 border-transparent hover:border !ring-0 outline-none transition-colors w-full text-foreground"/></div> <div><input type="text" class="text-sm text-muted-foreground bg-transparent border-b border-transparent hover:border !ring-0 focus:outline-none transition-colors w-full"/></div> <div><textarea class="text-sm text-muted-foreground bg-transparent border border-transparent hover:border !ring-0 outline-none transition-colors w-full resize-none rounded p-2"></textarea></div> <!></div></div></div> <div class="w-80 bg-card border border rounded-xl overflow-hidden transform rotate-3 scale-95 opacity-80"><div class="h-32 bg-cover bg-center" style="background-image: url(https://m.primal.net/OTue.jpg)"></div> <div class="relative -mt-12 px-6 pb-6"><img src="https://m.primal.net/OTkq.jpg" alt="Enderson Sequera" class="w-24 h-24 rounded-full border-4 border-background object-cover"/> <div class="mt-4"><h3 class="text-xl font-bold">Enderson Sequera</h3> <p class="text-sm text-muted-foreground mb-2">üáªüá™ Political Scientist</p> <p class="text-sm text-muted-foreground">Political advisor & freedom fighter. Bitcoin is freedom - in the fight against dictatorship it saves lives.</p></div></div></div></div> <button> </button></div>');function $t(m,a){we(a,!0);const i=()=>Fe(Je,"$t",n),[n,b]=He(),y=R(()=>a.inviteRelay&&tt(a.inviteRelay)),l=R(()=>a.inviteRelay?Vt(a.inviteRelay):"");let g=ae(""),w=ae(!1),v=ae(null),A=ae(!1),_=null;function M(s){if(N(g,s,!0),!s||!e(l)){N(v,null),N(A,!1);return}_&&clearTimeout(_),N(w,!0),N(v,{type:"info",text:i()("onboarding.step4Profile.availability.checking")},!0),_=setTimeout(async()=>{const j=await qt(s,e(l));j.available?(N(v,{type:"success",text:i()("onboarding.step4Profile.availability.available")},!0),N(A,!0)):(N(v,{type:"error",text:j.error||i()("onboarding.step4Profile.availability.notAvailable")},!0),N(A,!1)),N(w,!1)},500)}const D=R(()=>be.$currentUser),p=R(()=>e(D)?new at(be):null),S=R(()=>e(p)?ot(e(p)):null);let E,U=ae(null);async function P(s){const V=s.target.files?.[0];if(V){if(!e(S)){N(U,"Upload not available. Please ensure you are logged in.");return}if(!V.type.startsWith("image/")){N(U,"Please select an image file");return}if(V.size>5*1024*1024){N(U,"Image size must be less than 5MB");return}N(U,null);try{await e(S).upload(V,{fallbackServer:"https://blossom.primal.net"}),e(S).result?.url&&a.onUpdateProfile({...a.profileData,banner:e(S).result.url})}catch(ve){console.error("Upload failed:",ve),N(U,"Failed to upload banner. Please try again.")}}}function z(s){return s?s.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2):"?"}function O(s,j){a.onUpdateProfile({...a.profileData,[s]:j})}async function u(){if(e(A)&&e(g)&&e(l)){const s=Wt(e(g),e(l));a.onUpdateProfile({...a.profileData,nip05:s})}try{const s=new Set;a.inviteRelay&&(s.add(a.inviteRelay),console.log("Including agora relay from invite:",a.inviteRelay)),s.add("wss://purplepag.es"),s.add("wss://relay.primal.net"),console.log("Building kind:10002 relay list with relays:",Array.from(s));const j=new qe(be);j.kind=10002,j.tags=Array.from(s).map(V=>["r",V]),console.log("Publishing kind:10002 relay list..."),await j.publish(),console.log("Published kind:10002 relay list")}catch(s){console.error("Error publishing relay list:",s)}a.onNext()}function h(s){a.onUpdateProfile({...a.profileData,picture:s})}var x=Xt(),K=r(x),Z=r(K),F=r(Z,!0);t(Z);var T=o(Z,2),G=r(T,!0);t(T),t(K);var W=o(K,2),H=o(r(W),2),q=r(H);q.__change=P,rt(q,s=>E=s,()=>E);var Y=o(q,2);Y.__click=()=>E?.click();var ee=r(Y),oe=r(ee);{var d=s=>{var j=Ht(),V=o(ke(j),2),ve=r(V);t(V),B(()=>c(ve,`${e(S).progress?.percentage??""}%`)),f(s,j)},$=s=>{var j=Jt();f(s,j)};L(oe,s=>{e(S)?.status==="uploading"?s(d):s($,!1)})}t(ee),t(Y);var ne=o(Y,2);{var pe=s=>{var j=Zt(),V=r(j),ve=r(V,!0);t(V),t(j),B(()=>c(ve,e(U))),f(s,j)};L(ne,s=>{e(U)&&s(pe)})}var de=o(ne,2),xe=r(de);{let s=R(()=>z(a.profileData.name));Yt(xe,{get ndk(){return be},onUploadComplete:h,get currentImageUrl(){return a.profileData.picture},get fallbackInitials(){return e(s)}})}var ie=o(xe,2),J=r(ie),Q=r(J);Be(Q),Q.__input=s=>O("name",s.currentTarget.value),t(J);var ce=o(J,2),Se=r(ce);Be(Se),Se.__input=s=>O("location",s.currentTarget.value),t(ce);var Ie=o(ce,2),Ce=r(Ie);nt(Ce),Ce.__input=s=>O("bio",s.currentTarget.value),fe(Ce,"rows",3),t(Ie);var Re=o(Ie,2);{var Le=s=>{var j=Qt(),V=r(j),ve=r(V,!0);t(V);var k=o(V,2),I=r(k);Be(I),I.__input=ue=>M(ue.currentTarget.value);var X=o(I,2),te=r(X);t(X),t(k);var se=o(k,2);{var Ne=ue=>{var le=Gt(),De=r(le,!0);t(le),B(()=>{ge(le,1,`text-xs ${e(v).type==="success"?"text-green-600 dark:text-green-400":e(v).type==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground"}`),c(De,e(v).text)}),f(ue,le)};L(se,ue=>{e(v)&&ue(Ne)})}t(j),B((ue,le)=>{c(ve,ue),Me(I,e(g)),fe(I,"placeholder",le),c(te,`@${e(l)??""}`)},[()=>i()("onboarding.step4Profile.usernameLabel"),()=>i()("onboarding.step4Profile.usernamePlaceholder")]),f(s,j)};L(Re,s=>{e(y)&&s(Le)})}t(ie),t(de),t(H),me(2),t(W);var he=o(W,2);he.__click=u;var je=r(he);t(he),t(x),B((s,j,V,ve,k,I)=>{c(F,s),c(G,j),Y.disabled=e(S)?.status==="uploading",$e(Y,a.profileData.banner?`background-image: url(${a.profileData.banner}); background-size: cover; background-position: center;`:""),Me(Q,a.profileData.name),fe(Q,"placeholder",V),Me(Se,a.profileData.location),fe(Se,"placeholder",ve),Me(Ce,a.profileData.bio),fe(Ce,"placeholder",k),he.disabled=!a.profileData.name,ge(he,1,`
      px-8 py-3 rounded-lg font-medium transition-all
      ${a.profileData.name?"bg-card dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-100":"bg-neutral-100 dark:bg-muted text-muted-foreground cursor-not-allowed"}
    `),c(je,`${I??""} ‚Üí`)},[()=>i()("onboarding.step4Profile.title"),()=>i()("onboarding.step4Profile.subtitle"),()=>i()("onboarding.step4Profile.namePlaceholder"),()=>i()("onboarding.step4Profile.locationPlaceholder"),()=>i()("onboarding.step4Profile.bioPlaceholder"),()=>i()("onboarding.step4Profile.continue")]),f(m,x),Pe(),b()}ye(["change","click","input"]);function er(m,a){const i=a&&tt(a)?[a]:[...Ke],n=Math.floor(Date.now()/1e3)-720*60,b=m.$fetchEvents(()=>({filters:{kinds:[1],"#t":["introduction"],since:n},relayUrls:i})),y=R(()=>b?Array.from(b).map(w=>w.id):[]),l=m.$fetchEvents(()=>e(y).length>0?{filters:{"#e":e(y)},relayUrls:i}:void 0),g=R(()=>{if(!b||b.size===0)return[];const w=new Map;if(l)for(const v of l){const A=v.tags.filter(_=>_[0]==="e");for(const _ of A){const M=_[1];e(y).includes(M)&&w.set(M,(w.get(M)||0)+1)}}return Array.from(b).map(v=>({event:v,engagementCount:w.get(v.id)||0})).sort((v,A)=>A.engagementCount-v.engagementCount).slice(0,10)});return{introductionPosts:e(g)}}const Ee={en:"introduction",es:"bienvenidas",fa:"ŸÖÿπÿ±ŸÅ€å",km:"·ûÄ·û∂·ûö·ûé·üÇ·ûì·û∂·üÜ",sn:"kuzivisa"};function tr(m){if(!m)return Ee.en;const a=m.split("-")[0];return Ee[a]||Ee.en}function rr(m){const a=tr(m);return a===Ee.en?["introduction"]:["introduction",a]}var ar=C('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg> <span class="text-muted-foreground"> </span>',1),or=C('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg> <span class="text-muted-foreground"> </span>',1),nr=C('<div class="mt-4 p-3 bg-primary-50 dark:bg-primary-900/10 border border-primary-200 dark:border-primary-800 rounded-lg"><div class="flex items-center justify-between"><div class="flex items-center gap-2 text-sm"><!></div> <button class="text-xs px-2 py-1 rounded hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-colors text-primary dark:text-primary font-medium"> </button></div></div>'),ir=C('<div class="text-center py-8 text-muted-foreground"><p> </p></div>'),sr=C('<div class="min-h-screen flex flex-col"><div class="flex-1 px-4 lg:px-8 py-6 max-w-[1400px] mx-auto w-full pb-32 lg:pb-6"><div class="text-center mb-6"><h1 class="text-2xl lg:text-3xl font-bold mb-2"> </h1> <p class="text-muted-foreground"> </p></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:h-[calc(100vh-200px)]"><div class="flex flex-col order-1 lg:order-2"><div class="lg:p-6"><label class="block font-semibold mb-3"> </label> <div class="p-4 bg-card border border rounded-lg"><!></div> <div class="flex items-center justify-between mt-3"><div class="text-xs text-muted-foreground"><!></div> <div class="text-xs"><span> </span></div></div> <!> <div class="hidden lg:flex gap-3 mt-6"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div> <div class="flex flex-col order-2 lg:order-1"><h3 class="font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4"> </h3> <div class="space-y-3 overflow-y-auto flex-1 pr-2 max-h-[400px] lg:max-h-none"><!></div></div></div></div> <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-card border-t border p-4 z-50"><div class="flex gap-3 max-w-[1400px] mx-auto"><button class="flex-1 py-3 px-6 border border rounded-lg font-medium hover:bg-accent transition-colors"> </button> <button> </button></div></div></div>');function lr(m,a){we(a,!0);const i=()=>Fe(ut,"$locale",b),n=()=>Fe(Je,"$t",b),[b,y]=He();let l=ae(""),g=ae(!1),w=ae(!!a.inviterPubkey);const v=R(()=>e(l).length>10),A=R(()=>e(l).length);let _=ae(null);Ye(()=>{if(!a.inviterPubkey){N(_,null);return}be.fetchUser(a.inviterPubkey).then(k=>{k?.fetchProfile().then(I=>{N(_,I,!0)})})});const M=R(()=>e(_)?.displayName||e(_)?.name||"your inviter"),{introductionPosts:D}=er(be,a.inviteRelay);async function p(){if(e(v)){N(g,!0);try{const k=rr(i());let I=e(l).trim();for(const te of k){const se=`#${te}`;I.includes(se)||(I=`${I} ${se}`)}const X=new qe(be);X.kind=1,X.content=I,X.tags=k.map(te=>["t",te]),e(w)&&a.inviterPubkey&&X.tags.push(["p",a.inviterPubkey]),await X.publish(),a.onNext()}catch(k){console.error("Error publishing introduction:",k),N(g,!1)}}}var S=sr(),E=r(S),U=r(E),P=r(U),z=r(P,!0);t(P);var O=o(P,2),u=r(O,!0);t(O),t(U);var h=o(U,2),x=r(h),K=r(x),Z=r(K),F=r(Z,!0);t(Z);var T=o(Z,2),G=r(T);{let k=R(()=>n()("onboarding.step5Introduction.placeholder"));gt(G,{get placeholder(){return e(k)},get disabled(){return e(g)},get value(){return e(l)},set value(I){N(l,I,!0)}})}t(T);var W=o(T,2),H=r(W),q=r(H);{var Y=k=>{var I=it();B(X=>c(I,X),[()=>n()("onboarding.step5Introduction.tipLocation",{values:{location:a.profileData.location}})]),f(k,I)};L(q,k=>{a.profileData.location&&k(Y)})}t(H);var ee=o(H,2),oe=r(ee),d=r(oe);t(oe),t(ee),t(W);var $=o(W,2);{var ne=k=>{var I=nr(),X=r(I),te=r(X),se=r(te);{var Ne=_e=>{var Ue=ar(),ze=o(ke(Ue),2),Oe=r(ze,!0);t(ze),B(Te=>c(Oe,Te),[()=>n()("onboarding.step5Introduction.inviterNotify",{values:{name:e(M)}})]),f(_e,Ue)},ue=_e=>{var Ue=or(),ze=o(ke(Ue),2),Oe=r(ze,!0);t(ze),B(Te=>c(Oe,Te),[()=>n()("onboarding.step5Introduction.inviterNoNotify",{values:{name:e(M)}})]),f(_e,Ue)};L(se,_e=>{e(w)?_e(Ne):_e(ue,!1)})}t(te);var le=o(te,2);le.__click=()=>N(w,!e(w));var De=r(le,!0);t(le),t(X),t(I),B(_e=>c(De,_e),[()=>e(w)?n()("onboarding.step5Introduction.inviterRemove"):n()("onboarding.step5Introduction.inviterAddBack")]),f(k,I)};L($,k=>{a.inviterPubkey&&k(ne)})}var pe=o($,2),de=r(pe);de.__click=function(...k){a.onSkip?.apply(this,k)};var xe=r(de,!0);t(de);var ie=o(de,2);ie.__click=p;var J=r(ie,!0);t(ie),t(pe),t(K),t(x);var Q=o(x,2),ce=r(Q),Se=r(ce,!0);t(ce);var Ie=o(ce,2),Ce=r(Ie);{var Re=k=>{var I=Ve(),X=ke(I);We(X,17,()=>D,te=>te.event.id,(te,se)=>{ft(te,{get event(){return e(se).event}})}),f(k,I)},Le=k=>{var I=ir(),X=r(I),te=r(X,!0);t(X),t(I),B(se=>c(te,se),[()=>n()("onboarding.step5Introduction.loadingIntroductions")]),f(k,I)};L(Ce,k=>{D.length>0?k(Re):k(Le,!1)})}t(Ie),t(Q),t(h),t(E);var he=o(E,2),je=r(he),s=r(je);s.__click=function(...k){a.onSkip?.apply(this,k)};var j=r(s,!0);t(s);var V=o(s,2);V.__click=p;var ve=r(V,!0);t(V),t(je),t(he),t(S),B((k,I,X,te,se,Ne,ue,le,De)=>{c(z,k),c(u,I),c(F,X),ge(oe,1,st(e(A)>500?"text-red-500":"text-muted-foreground")),c(d,`${e(A)??""} ${te??""}`),c(xe,se),ie.disabled=!e(v)||e(g),ge(ie,1,`
                flex-1 py-3 px-6 rounded-lg font-medium transition-all
                ${e(v)&&!e(g)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
              `),c(J,Ne),c(Se,ue),c(j,le),V.disabled=!e(v)||e(g),ge(V,1,`
          flex-1 py-3 px-6 rounded-lg font-medium transition-all
          ${e(v)&&!e(g)?"bg-background dark:bg-white text-foreground dark:text-black hover:bg-muted dark:hover:bg-neutral-200":"bg-neutral-100 dark:bg-background text-muted-foreground cursor-not-allowed"}
        `),c(ve,De)},[()=>n()("onboarding.step5Introduction.title"),()=>n()("onboarding.step5Introduction.subtitle"),()=>n()("onboarding.step5Introduction.writeLabel"),()=>n()("onboarding.step5Introduction.characters"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(g)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction"),()=>n()("onboarding.step5Introduction.recentIntroductions"),()=>n()("onboarding.step5Introduction.skipForNow"),()=>e(g)?n()("onboarding.step5Introduction.publishing"):n()("onboarding.step5Introduction.postIntroduction")]),f(m,S),Pe(),y()}ye(["click"]);var dr=C(`<div class="min-h-screen flex items-center justify-center p-8"><div class="max-w-2xl w-full text-center"><div class="text-7xl mb-6">üéâ</div> <h1 class="text-4xl font-bold mb-4"> </h1> <p class="text-xl text-muted-foreground mb-12">Your voice matters. Your community is here.</p> <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-12"><div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">People Following</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1"> </div> <div class="text-sm text-muted-foreground">Follow Packs</div></div> <div class="bg-neutral-50 dark:bg-card rounded-xl p-6"><div class="text-3xl font-bold mb-1">1</div> <div class="text-sm text-muted-foreground">Post Published</div></div></div> <div class="bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-900 dark:to-neutral-800 rounded-xl p-8 mb-8 text-left max-w-lg mx-auto"><h3 class="font-semibold mb-4">What's Next?</h3> <ul class="space-y-3 text-sm"><li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span> </span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>You can start buying and selling in the marketplace</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Join P2P trades with verified community members</span></li> <li class="flex items-start gap-3"><span class="text-green-500 mt-0.5">‚úì</span> <span>Share your stories and earn sats for valuable content</span></li></ul></div> <button class="bg-background dark:bg-white text-foreground dark:text-black px-12 py-4 rounded-lg font-medium text-lg hover:bg-muted dark:hover:bg-neutral-200 transition-colors">Enter Agora ‚Üí</button></div></div>`);function cr(m,a){we(a,!0);const i=R(()=>a.selectedPacks.length*25);var n=dr(),b=r(n),y=o(r(b),2),l=r(y);t(y);var g=o(y,4),w=r(g),v=r(w),A=r(v,!0);t(v),me(2),t(w);var _=o(w,2),M=r(_),D=r(M,!0);t(M),me(2),t(_),me(2),t(g);var p=o(g,2),S=o(r(p),2),E=r(S),U=o(r(E),2),P=r(U);t(U),t(E),me(6),t(S),t(p);var z=o(p,2);z.__click=function(...O){a.onComplete?.apply(this,O)},t(b),t(n),B(()=>{c(l,`Welcome to Agora, ${(a.profileData.name||"Friend")??""}!`),c(A,e(i)),c(D,a.selectedPacks.length),c(P,`Your feed is ready with content from ${e(i)??""} community voices`)}),f(m,n),Pe()}ye(["click"]);var vr=C('<button class="fixed top-6 left-6 z-50 w-9 h-9 bg-card border border rounded-full flex items-center justify-center hover:bg-accent transition-colors"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button>'),ur=C('<div class="min-h-screen bg-card"><div class="fixed top-0 left-0 right-0 z-40 bg-card"><div class="h-1 bg-neutral-200 dark:bg-muted"><div class="h-full bg-background dark:bg-white transition-all duration-300 ease-out"></div></div></div> <!> <div class="relative pt-8"><!> <!> <!> <!> <!> <!></div></div>');function Sr(m,a){we(a,!0);let i=ae(null);const n=R(()=>re.currentStep),b=R(()=>re.totalSteps),y=R(()=>e(n)/e(b)*100),l=R(()=>re.invite),g=R(()=>re.hasCompletedInviteSetup),w=R(()=>re.selectedCommunity),v=R(()=>re.selectedPacks),A=R(()=>re.profileData);Ye(()=>{e(i)||(async()=>{try{N(i,ct.generate(),!0),console.log("[Onboarding] Attempting login with signer..."),await be.$sessions?.login(e(i)),console.log("[Onboarding] ‚úì Logged in with new keypair, pubkey:",e(i).pubkey)}catch(d){console.error("[Onboarding] ‚úó Error logging in with new keypair:",d)}})()});function _(d){re.setStep(d),typeof window<"u"&&window.scrollTo(0,0)}function M(){e(n)>re.minStep&&_(e(n)-1)}async function D(){if(e(v).length>0)try{await mt(be,e(v)),console.log(`Published kind:3 with follows from ${e(v).length} packs`)}catch(d){console.error("Error publishing contact list:",d)}_(3)}async function p(){if(console.log("[Onboarding] handleStep4Next called"),!e(i)){console.error("[Onboarding] ‚úó No signer available");return}try{e(l)&&!e(g)?(console.log("[Onboarding] Invite flow: calling completeInviteSetup"),await re.completeInviteSetup(e(i)),console.log("[Onboarding] ‚úì Invite setup complete")):(console.log("[Onboarding] Regular flow: calling publishProfileAndSetup"),await re.publishProfileAndSetup(e(i)),console.log("[Onboarding] ‚úì Profile published and setup complete"))}catch(d){console.error("[Onboarding] ‚úó Error during onboarding:",d)}_(5)}async function S(){re.clear(),vt("/")}var E=ur(),U=r(E),P=r(U),z=r(P);t(P),t(U);var O=o(U,2);{var u=d=>{var $=vr();$.__click=M,f(d,$)};L(O,d=>{e(n)>(e(l)?3:1)&&d(u)})}var h=o(O,2),x=r(h);{var K=d=>{_t(d,{get selectedCommunity(){return e(w)},onSelectCommunity:$=>re.setSelectedCommunity($),onNext:()=>_(2)})};L(x,d=>{e(n)===1&&!e(l)&&d(K)})}var Z=o(x,2);{var F=d=>{At(d,{get selectedCommunity(){return e(w)},get selectedPacks(){return e(v)},onSelectPacks:$=>re.setSelectedPacks($),onNext:D})};L(Z,d=>{e(n)===2&&!e(l)&&d(F)})}var T=o(Z,2);{var G=d=>{Mt(d,{onNext:()=>_(4)})};L(T,d=>{e(n)===3&&d(G)})}var W=o(T,2);{var H=d=>{{let $=R(()=>e(l)?.inviteRelay);$t(d,{get profileData(){return e(A)},onUpdateProfile:ne=>re.setProfileData(ne),onNext:p,get inviteRelay(){return e($)}})}};L(W,d=>{e(n)===4&&d(H)})}var q=o(W,2);{var Y=d=>{{let $=R(()=>e(l)?.inviter),ne=R(()=>e(l)?.inviteRelay);lr(d,{get profileData(){return e(A)},get inviterPubkey(){return e($)},get inviteRelay(){return e(ne)},onNext:()=>_(6),onSkip:()=>_(6)})}};L(q,d=>{e(n)===5&&d(Y)})}var ee=o(q,2);{var oe=d=>{cr(d,{get selectedPacks(){return e(v)},get profileData(){return e(A)},onComplete:S})};L(ee,d=>{e(n)===6&&d(oe)})}t(h),t(E),B(()=>$e(z,`width: ${e(y)}%`)),f(m,E),Pe()}ye(["click"]);export{Sr as component};
