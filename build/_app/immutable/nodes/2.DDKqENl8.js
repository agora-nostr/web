import{d as ht,c as k,a as t,f as d,s as M,t as kt}from"../chunks/rzUyzf2y.js";import{p as Ge,u as ct,s as fe,b as Ye,f as v,c as Xe,e as a,g as e,d as s,r,y as ot,t as h,a as B,aO as br}from"../chunks/AsQG98fS.js";import{s as ft}from"../chunks/DNVUPZsi.js";import{i as c}from"../chunks/DZKExFZC.js";import{e as Ht}from"../chunks/Cztbr3Ea.js";import{a as O,e as xr,c as ne,d as er,b as tr}from"../chunks/CS0aOiUg.js";import{s as Kt,a as Nt}from"../chunks/DfBYFC16.js";import{p as rr}from"../chunks/BcDbBYPM.js";import{g as st}from"../chunks/s53o-P2j.js";import{$ as Jt}from"../chunks/DrbR318x.js";import{n as p,s as Y,e as gt,P as Zt,N as ar,k as yr,r as Wt,d as kr}from"../chunks/tv6-RHC_.js";import{s as yt}from"../chunks/CxDZk1z_.js";import{h as xe}from"../chunks/BVrYKRgp.js";import{l as At}from"../chunks/DOQj-LTZ.js";import{c as wr}from"../chunks/C-PpeXlo.js";import{c as qt}from"../chunks/B_mUG5t6.js";import{N as $r,c as Gt}from"../chunks/DM8SgQ6X.js";import{c as or,h as Lt,R as Cr}from"../chunks/llCo7pzK.js";import{c as Mr}from"../chunks/C6HRQ1O8.js";import{m as ut}from"../chunks/CD9mSG_Y.js";import{n as Ft}from"../chunks/DuSJKUU_.js";import{g as zr}from"../chunks/BgxlgyeA.js";import{c as sr}from"../chunks/BtQ8qZNz.js";import{p as mt}from"../chunks/w-gpJwMz.js";import{l as nr}from"../chunks/3oHcu2P-.js";import{ab as ir,ac as lr,M as Ur,D as Nr,a as Pr,R as jr,b as Sr,d as Rr,e as Ar}from"../chunks/CVV5LOp_.js";import{c as Me}from"../chunks/Dt3q2Svx.js";import{b as Tt}from"../chunks/CkKAtl6l.js";import{U as lt}from"../chunks/C-S0GgRw.js";import{E as Lr}from"../chunks/BnPF26WP.js";import{U as Tr}from"../chunks/DdUskozk.js";import{u as Hr}from"../chunks/DHRuQT7d.js";import{I as j}from"../chunks/DjOI8lew.js";import{D as Ir,a as Br}from"../chunks/CKdpi0zW.js";import{U as Xt}from"../chunks/D-t5MXh4.js";const Vr=9735,Er=3e4;class Dr{zapSubscription=null;checkInterval=null;isProcessing=!1;start(){if(Ft.enabled){if(!p.$currentUser){console.warn("[NpubCashMonitor] No active user, cannot start monitoring");return}console.log("[NpubCashMonitor] Starting zap monitoring for",p.$currentUser.pubkey),this.zapSubscription=p.subscribe({kinds:[Vr],"#p":[p.$currentUser.pubkey]},{closeOnEose:!1}),this.zapSubscription.on("event",()=>{console.log("[NpubCashMonitor] Zap received, checking npub.cash balance"),this.checkAndClaim()}),this.checkInterval=setInterval(()=>{this.checkAndClaim()},Er),this.checkAndClaim()}}stop(){this.zapSubscription&&(this.zapSubscription.stop(),this.zapSubscription=null),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),console.log("[NpubCashMonitor] Stopped monitoring")}async checkAndClaim(){if(Ft.enabled&&!this.isProcessing){if(!p.$wallet){console.warn("[NpubCashMonitor] No wallet available, skipping token claim");return}this.isProcessing=!0;try{const _=await Ft.claimTokens();_&&(console.log("[NpubCashMonitor] Token claimed, redeeming to wallet"),await this.redeemToWallet(_))}catch(_){console.error("[NpubCashMonitor] Error checking/claiming tokens:",_)}finally{this.isProcessing=!1}}}async redeemToWallet(_){if(!p.$wallet){console.warn("[NpubCashMonitor] No wallet available, cannot redeem token");return}try{await p.$wallet.receiveToken(_),console.log("[NpubCashMonitor] ✓ Token redeemed to wallet")}catch(S){console.error("[NpubCashMonitor] Failed to redeem token to wallet:",S)}}}const Ot=new Dr;function Wr(V){return V===0?"0":V>=1e6?`${(V/1e6).toFixed(1)}M`:V>=1e3?`${(V/1e3).toFixed(1)}k`:new Intl.NumberFormat("en-US").format(V)}var Fr=d('<img class="w-6 h-6 rounded-full object-cover"/>'),Or=d('<div class="w-6 h-6 rounded-full bg-primary flex items-center justify-center"><span class="text-xs font-bold"> </span></div>'),Yr=d('<button class="flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted text-foreground rounded-lg transition-colors"><!> <span> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button>'),Kr=d('<button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg> <span>Login</span></button>');function Jr(V,_){Ge(_,!0);const S=mt(_,"class",3,"px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-semibold");let g=Ye(null);ct(()=>{const l=p.$currentUser?.pubkey;if(!l){fe(g,null);return}p.fetchUser(l).then(b=>{b?.fetchProfile().then(u=>{fe(g,u,!0)})})});const A=B(()=>e(g)?.name||e(g)?.displayName||"Anon");function K(){p.$sessions.logout()}var E=k(),L=v(E);{var m=l=>{var b=Yr();b.__click=K;var u=a(b);{var w=F=>{var T=Fr();h(()=>{ne(T,"src",e(g).image),ne(T,"alt",e(A))}),t(F,T)},U=F=>{var T=Or(),X=a(T),pe=a(X,!0);r(X),r(T),h(me=>M(pe,me),[()=>e(A).charAt(0).toUpperCase()]),t(F,T)};c(u,F=>{e(g)?.image?F(w):F(U,!1)})}var H=s(u,2),G=a(H,!0);r(H),ot(2),r(b),h(()=>M(G,e(A))),t(l,b)},n=l=>{var b=Kr();b.__click=()=>nr.open("signup"),h(()=>O(b,1,xr(S()))),t(l,b)};c(L,l=>{p.$currentUser?l(m):l(n,!1)})}t(V,E),Xe()}ht(["click"]);var Zr=d('<div class="flex-1 min-w-0 text-left"><p class="font-medium text-sm truncate text-foreground"> </p> <p class="text-xs text-muted-foreground truncate"> </p></div>'),Qr=d("<button><!> <!></button>"),qr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <span> </span>',1),Gr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> <span> </span>',1),Xr=d('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <span> </span>',1),ea=d('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> <span> </span></button></div>'),ta=d("<!> <!>",1);function ra(V,_){Ge(_,!0);const S=()=>Nt(Jt,"$t",g),[g,A]=Kt(),K=mt(_,"collapsed",3,!1);let E=Ye(!1),L=Ye(void 0),m=Ye(void 0),n=Ye(null);ct(()=>{const z=p.$currentUser?.pubkey;if(!z){fe(n,null);return}p.fetchUser(z).then(N=>{N?.fetchProfile().then(te=>{fe(n,te,!0)})})});const l=B(()=>e(n)?.displayName||e(n)?.name||"Anonymous"),b=B(()=>p.$currentUser?.npub);function u(){fe(E,!e(E))}function w(){fe(E,!1)}function U(){p.$sessions.logout(),w()}function H(){e(b)&&(st(`/p/${e(b)}`),w())}function G(){st("/settings"),w()}function F(){const z=Y.theme;z==="light"?Y.setTheme("dark"):z==="dark"?Y.setTheme("system"):Y.setTheme("light")}ct(()=>{if(!e(E))return;const z=N=>{e(L)&&!e(L).contains(N.target)&&e(m)&&!e(m).contains(N.target)&&fe(E,!1)};return document.addEventListener("click",z),()=>document.removeEventListener("click",z)});var T=ta(),X=v(T);{var pe=z=>{var N=Qr();N.__click=u;var te=a(N);Me(te,()=>lt.Root,(ve,D)=>{D(ve,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},children:(Q,re)=>{var q=k(),ie=v(q);Me(ie,()=>lt.Avatar,(Ue,De)=>{De(Ue,{class:"w-10 h-10"})}),t(Q,q)},$$slots:{default:!0}})});var ze=s(te,2);{var ye=ve=>{var D=Zr(),Q=a(D),re=a(Q,!0);r(Q);var q=s(Q,2),ie=a(q,!0);r(q),r(D),h(Ue=>{M(re,e(l)),M(ie,Ue)},[()=>e(n)?.nip05||(e(b)?`${e(b).slice(0,16)}...`:"")]),t(ve,D)};c(ze,ve=>{K()||ve(ye)})}r(N),Tt(N,ve=>fe(m,ve),()=>e(m)),h(()=>{O(N,1,`w-full flex items-center ${K()?"justify-center p-3":"gap-3 px-2 py-2"} rounded-lg hover:bg-muted transition-colors cursor-pointer`),ne(N,"title",K()?e(l):void 0)}),t(z,N)};c(X,z=>{p.$currentUser&&z(pe)})}var me=s(X,2);{var ee=z=>{var N=k(),te=v(N);ir(te,()=>e(E),ze=>{var ye=k(),ve=v(ye);lr(ve,()=>"div",!1,(D,Q)=>{er(D,()=>({style:"display: contents"}));var re=ea(),q=a(re);q.__click=H;var ie=a(q);Me(ie,()=>lt.Root,(le,ae)=>{ae(le,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},children:(Le,Te)=>{var ge=k(),Ce=v(ge);Me(Ce,()=>lt.Avatar,(ke,He)=>{He(ke,{class:"w-12 h-12"})}),t(Le,ge)},$$slots:{default:!0}})});var Ue=s(ie,2),De=a(Ue),wt=a(De,!0);r(De);var et=s(De,2),$t=a(et,!0);r(et),r(Ue),r(q);var Ne=s(q,4);Ne.__click=F;var nt=a(Ne);{var _t=le=>{var ae=qr(),Le=s(v(ae),2),Te=a(Le,!0);r(Le),h(ge=>M(Te,ge),[()=>S()("settings.sections.appearance.themes.light")]),t(le,ae)},Ct=le=>{var ae=k(),Le=v(ae);{var Te=Ce=>{var ke=Gr(),He=s(v(ke),2),tt=a(He,!0);r(He),h(dt=>M(tt,dt),[()=>S()("settings.sections.appearance.themes.dark")]),t(Ce,ke)},ge=Ce=>{var ke=Xr(),He=s(v(ke),2),tt=a(He,!0);r(He),h(dt=>M(tt,dt),[()=>S()("settings.sections.appearance.themes.system")]),t(Ce,ke)};c(Le,Ce=>{Y.theme==="dark"?Ce(Te):Ce(ge,!1)},!0)}t(le,ae)};c(nt,le=>{Y.theme==="light"?le(_t):le(Ct,!1)})}r(Ne);var it=s(Ne,2);it.__click=G;var bt=s(a(it),2),x=a(bt,!0);r(bt),r(it);var W=s(it,4);W.__click=U;var $e=s(a(W),2),Ve=a($e,!0);r($e),r(W),r(re),Tt(re,le=>fe(L,le),()=>e(L)),h((le,ae,Le,Te,ge)=>{tr(re,`position: fixed; bottom: ${le??""}px; left: ${ae??""}px; z-index: 9999;`),M(wt,e(l)),M($t,Le),M(x,Te),M(Ve,ge)},[()=>window.innerHeight-e(m).getBoundingClientRect().top+8,()=>e(m).getBoundingClientRect().left,()=>S()("profile.editProfile"),()=>S()("navigation.settings"),()=>S()("navigation.logout")]),t(Q,re)}),t(ze,ye)}),t(z,N)};c(me,z=>{e(E)&&e(m)&&z(ee)})}t(V,T),Xe(),A()}ht(["click"]);var aa=d('<div class="w-12 h-12 bg-muted rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),oa=d('<p class="text-xs text-muted-foreground mt-1"> </p>'),sa=d('<button class="w-full bg-muted/50 rounded-lg p-3 transition-all hover:bg-muted hover:scale-[1.02] text-left"><div class="flex gap-3"><!> <div class="flex-1 min-w-0"><h4 class="text-sm font-medium text-card-foreground truncate"> </h4> <!></div></div></button>'),na=d('<div class="bg-card rounded-2xl p-5 border border-border backdrop-blur-sm"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> <h3 class="text-lg font-semibold text-card-foreground">Recent Marketplace</h3></div> <button class="flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors">View All <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="space-y-3"><!></div></div>');function ia(V,_){Ge(_,!0);const S=B(()=>Zt(Y.selectedRelay,Y.relays.filter(U=>U.enabled&&U.read).map(U=>U.url))),g=p.$subscribe(()=>({filters:[{kinds:[30402],limit:5}],bufferMs:100,relayUrls:e(S).length>0?e(S):void 0,cacheUsage:e(S).length>0?gt.ONLY_RELAY:gt.PARALLEL})),A=B(()=>g.events.filter(U=>(U.tagValue("status")||"active")==="active").slice(0,5));function K(U){return U.tagValue("image")}function E(U){const H=U.tags.find(G=>G[0]==="price");return!H||!H[1]||!H[2]?null:{amount:H[1],currency:H[2]}}var L=na(),m=a(L),n=s(a(m),2);n.__click=()=>st("/marketplace"),r(m);var l=s(m,2),b=a(l);{var u=U=>{Lr(U,{icon:"marketplace",title:"No marketplace items yet",size:"sm"})},w=U=>{var H=k(),G=v(H);Ht(G,17,()=>e(A),F=>F.id,(F,T)=>{const X=B(()=>E(e(T)));var pe=sa();pe.__click=()=>st(`/marketplace/${e(T).encode()}`);var me=a(pe),ee=a(me);{var z=D=>{var Q=aa(),re=a(Q);r(Q),h((q,ie)=>{ne(re,"src",q),ne(re,"alt",ie)},[()=>K(e(T)),()=>e(T).tagValue("title")||"Listing"]),t(D,Q)};c(ee,D=>{K(e(T))&&D(z)})}var N=s(ee,2),te=a(N),ze=a(te,!0);r(te);var ye=s(te,2);{var ve=D=>{var Q=oa(),re=a(Q);r(Q),h(()=>M(re,`${e(X).amount??""} ${e(X).currency??""}`)),t(D,Q)};c(ye,D=>{e(X)&&D(ve)})}r(N),r(me),r(pe),h(D=>M(ze,D),[()=>e(T).tagValue("title")||"Untitled"]),t(F,pe)}),t(U,H)};c(b,U=>{e(A).length===0?U(u):U(w,!1)})}r(l),r(L),t(V,L),Xe()}ht(["click"]);var la=d('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">New Members</h2></div> <div class="space-y-3"></div></div>');function ca(V,_){Ge(_,!0);const S=B(()=>!!Y.selectedRelay),g=B(()=>Y.selectedRelay?p.$subscribe(()=>({filters:[{kinds:[514],limit:10}],relayUrls:[Y.selectedRelay],cacheUsage:gt.ONLY_RELAY,subId:"new-members-514"})):null),A=B(()=>e(g)?e(g).events.map(l=>{const b=l.tagValue("p");return{memberPubkey:l.pubkey,inviterPubkey:b,joinedAt:l.created_at||0}}).sort((l,b)=>b.joinedAt-l.joinedAt).slice(0,5):[]);var K=k(),E=v(K);{var L=m=>{var n=la(),l=s(a(n),2);Ht(l,21,()=>e(A),b=>b.memberPubkey,(b,u)=>{$r(b,{get memberPubkey(){return e(u).memberPubkey},get inviterPubkey(){return e(u).inviterPubkey},get joinedAt(){return e(u).joinedAt}})}),r(l),r(n),t(m,n)};c(E,m=>{e(S)&&e(A).length>0&&m(L)})}t(V,K),Xe()}var da=d('<div class="text-center py-4 text-sm text-muted-foreground">No journalists found yet</div>'),va=d('<p class="text-xs text-muted-foreground"> </p>'),ua=d("<button> </button>"),fa=d('<div class="flex items-center gap-3"><!> <!></div>'),pa=d('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">Journalists</h2></div> <div class="space-y-3"><!></div></div>');function ma(V,_){Ge(_,!0);const S=B(()=>Zt(Y.selectedRelay,Y.relays.filter(u=>u.enabled&&u.read).map(u=>u.url))),g=p.$subscribe(()=>({filters:[{kinds:[ar.Article],limit:50}],bufferMs:500,relayUrls:e(S).length>0?e(S):void 0,cacheUsage:e(S).length>0?gt.ONLY_RELAY:gt.CACHE_FIRST,closeOnEose:!0})),A=B(()=>{const u=new Map;for(const w of g.events){const U=u.get(w.pubkey)||0;u.set(w.pubkey,U+1)}return Array.from(u.entries()).map(([w,U])=>({pubkey:w,articleCount:U})).sort((w,U)=>U.articleCount-w.articleCount).slice(0,5)});function K(u){return p.$follows.includes(u)}async function E(u){if(p.$currentUser)try{K(u)?await p.$follows.remove(u):await p.$follows.add(u)}catch(w){console.error("Failed to toggle follow:",w)}}var L=pa(),m=s(a(L),2),n=a(m);{var l=u=>{var w=da();t(u,w)},b=u=>{var w=k(),U=v(w);Ht(U,17,()=>e(A),H=>H.pubkey,(H,G)=>{const F=B(()=>K(e(G).pubkey));var T=fa(),X=a(T);Tr(X,{get pubkey(){return e(G).pubkey},variant:"avatar-name-meta",avatarSize:"w-10 h-10",nameSize:"text-sm font-medium",class:"flex-1 min-w-0",meta:z=>{var N=va(),te=a(N);r(N),h(()=>M(te,`${e(G).articleCount??""} ${e(G).articleCount===1?"article":"articles"}`)),t(z,N)},$$slots:{meta:!0}});var pe=s(X,2);{var me=ee=>{var z=ua();z.__click=()=>E(e(G).pubkey);var N=a(z,!0);r(z),h(()=>{O(z,1,`px-3 py-1 text-xs font-medium rounded-full transition-colors flex-shrink-0 ${e(F)?"bg-muted text-muted-foreground hover:bg-muted/80":"text-primary hover:bg-primary/10"}`),M(N,e(F)?"Following":"Follow")}),t(ee,z)};c(pe,ee=>{p.$currentUser&&e(G).pubkey!==p.$currentUser.pubkey&&ee(me)})}r(T),t(H,T)}),t(u,w)};c(n,u=>{e(A).length===0?u(l):u(b,!1)})}r(m),r(L),t(V,L),Xe()}ht(["click"]);var ga=d("<span><!></span>");function pt(V,_){Ge(_,!0);const S=mt(_,"variant",3,"primary"),g=mt(_,"size",3,"sm"),A=mt(_,"indicator",3,!1),K=mt(_,"class",3,""),E=B(()=>({primary:"bg-primary text-primary-foreground",secondary:"bg-primary/20 text-primary"})[S()]),L=B(()=>A()?"w-2 h-2":{xs:"min-w-[18px] h-[18px] px-1 text-[10px] font-bold",sm:"px-2 py-1 text-xs font-medium"}[g()]);var m=ga(),n=a(m);{var l=b=>{var u=k(),w=v(u);ft(w,()=>_.children),t(b,u)};c(n,b=>{!A()&&_.children&&b(l)})}r(m),h(()=>O(m,1,`rounded-full flex items-center justify-center ${e(E)??""} ${e(L)??""} ${K()??""}`)),t(V,m),Xe()}var ha=d('<img alt="" class="w-6 h-6 rounded"/>'),_a=d("<!> <span> </span>",1),ba=d("<!> <span> </span>",1),xa=d("<!> <span> </span>",1),ya=d('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><!> <span> </span></button></div>'),ka=d('<nav class="block lg:hidden fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border z-[1000]"><div class="flex justify-around items-center px-2 py-3 safe-bottom svelte-2rf3uy"><a href="/" aria-label="Home"><!></a> <a href="/messages" aria-label="Messages"><!> <!></a> <a href="/notifications" aria-label="Notifications"><!> <!></a> <a href="/wallet" aria-label="Wallet"><!></a> <button class="flex items-center justify-center p-2 rounded-lg transition-colors" aria-label="Profile"><!></button></div></nav> <!>',1);function wa(V,_){Ge(_,!0);const S=()=>Nt(rr,"$page",A),g=()=>Nt(Jt,"$t",A),[A,K]=Kt(),E=B(()=>S().url.pathname);p.$wallet;const L=sr(p),m=x=>x==="/"?e(E)==="/":e(E).startsWith(x),n=B(()=>Y.selectedRelay?Hr(Y.selectedRelay):null);let l=Ye(!1),b=Ye(void 0),u=Ye(void 0),w=Ye(null);ct(()=>{const x=p.$currentUser?.pubkey;if(!x){fe(w,null);return}p.fetchUser(x).then(W=>{W?.fetchProfile().then($e=>{fe(w,$e,!0)})})});const U=B(()=>e(w)?.displayName||e(w)?.name||"Anonymous"),H=B(()=>p.$currentUser?.npub);function G(){p.$currentUser?fe(l,!e(l)):nr.open("signup")}function F(){fe(l,!1)}function T(){p.$sessions.logout(),F()}function X(){e(H)&&(st(`/p/${e(H)}`),F())}function pe(){st("/settings"),F()}function me(){const x=Y.theme;x==="light"?Y.setTheme("dark"):x==="dark"?Y.setTheme("system"):Y.setTheme("light")}ct(()=>{if(!e(l))return;const x=W=>{e(b)&&!e(b).contains(W.target)&&e(u)&&!e(u).contains(W.target)&&fe(l,!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)});var ee=ka(),z=v(ee),N=a(z),te=a(N),ze=a(te);{var ye=x=>{var W=ha();h(()=>ne(W,"src",e(n).info.icon)),t(x,W)},ve=x=>{var W=k(),$e=v(W);{var Ve=ae=>{j(ae,{name:"relay",size:"lg"})},le=ae=>{j(ae,{name:"users",size:"lg"})};c($e,ae=>{Y.selectedRelay?ae(Ve):ae(le,!1)},!0)}t(x,W)};c(ze,x=>{Y.selectedRelay&&e(n)?.info?.icon?x(ye):x(ve,!1)})}r(te);var D=s(te,2),Q=a(D);j(Q,{name:"message",size:"lg"});var re=s(Q,2);{var q=x=>{pt(x,{indicator:!0,class:"absolute top-1.5 right-1.5"})};c(re,x=>{ut.totalUnreadCount>0&&x(q)})}r(D);var ie=s(D,2),Ue=a(ie);j(Ue,{name:"bell",size:"lg"});var De=s(Ue,2);{var wt=x=>{pt(x,{indicator:!0,class:"absolute top-1.5 right-1.5"})};c(De,x=>{L.counts.all>0&&x(wt)})}r(ie);var et=s(ie,2),$t=a(et);j($t,{name:"wallet",size:"lg"}),r(et);var Ne=s(et,2);Ne.__click=G;var nt=a(Ne);{var _t=x=>{var W=k(),$e=v(W);Me($e,()=>lt.Root,(Ve,le)=>{le(Ve,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},children:(ae,Le)=>{var Te=k(),ge=v(Te);Me(ge,()=>lt.Avatar,(Ce,ke)=>{ke(Ce,{class:"w-8 h-8 rounded-full"})}),t(ae,Te)},$$slots:{default:!0}})}),t(x,W)},Ct=x=>{j(x,{name:"user",size:"lg",class:"text-muted-foreground"})};c(nt,x=>{p.$currentUser?x(_t):x(Ct,!1)})}r(Ne),Tt(Ne,x=>fe(u,x),()=>e(u)),r(N),r(z);var it=s(z,2);{var bt=x=>{var W=k(),$e=v(W);ir($e,()=>e(l),Ve=>{var le=k(),ae=v(le);lr(ae,()=>"div",!1,(Le,Te)=>{er(Le,()=>({style:"display: contents"}));var ge=ya(),Ce=a(ge);Ce.__click=X;var ke=a(Ce);Me(ke,()=>lt.Root,(Pe,We)=>{We(Pe,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},children:(Ze,at)=>{var Ee=k(),je=v(Ee);Me(je,()=>lt.Avatar,(Qe,qe)=>{qe(Qe,{class:"w-12 h-12"})}),t(Ze,Ee)},$$slots:{default:!0}})});var He=s(ke,2),tt=a(He),dt=a(tt,!0);r(tt);var Mt=s(tt,2),It=a(Mt,!0);r(Mt),r(He),r(Ce);var Ke=s(Ce,4);Ke.__click=me;var Pt=a(Ke);{var Bt=Pe=>{var We=_a(),Ze=v(We);j(Ze,{name:"sun",size:"sm"});var at=s(Ze,2),Ee=a(at,!0);r(at),h(je=>M(Ee,je),[()=>g()("settings.sections.appearance.themes.light")]),t(Pe,We)},Vt=Pe=>{var We=k(),Ze=v(We);{var at=je=>{var Qe=ba(),qe=v(Qe);j(qe,{name:"moon",size:"sm"});var vt=s(qe,2),Ut=a(vt,!0);r(vt),h(xt=>M(Ut,xt),[()=>g()("settings.sections.appearance.themes.dark")]),t(je,Qe)},Ee=je=>{var Qe=xa(),qe=v(Qe);j(qe,{name:"monitor",size:"sm"});var vt=s(qe,2),Ut=a(vt,!0);r(vt),h(xt=>M(Ut,xt),[()=>g()("settings.sections.appearance.themes.system")]),t(je,Qe)};c(Ze,je=>{Y.theme==="dark"?je(at):je(Ee,!1)},!0)}t(Pe,We)};c(Pt,Pe=>{Y.theme==="light"?Pe(Bt):Pe(Vt,!1)})}r(Ke);var Je=s(Ke,2);Je.__click=pe;var zt=a(Je);j(zt,{name:"settings",size:"sm"});var jt=s(zt,2),Et=a(jt,!0);r(jt),r(Je);var rt=s(Je,4);rt.__click=T;var St=a(rt);j(St,{name:"logout",size:"sm"});var Rt=s(St,2),Dt=a(Rt,!0);r(Rt),r(rt),r(ge),Tt(ge,Pe=>fe(b,Pe),()=>e(b)),h((Pe,We,Ze,at,Ee)=>{tr(ge,`position: fixed; bottom: ${Pe??""}px; left: ${We??""}px; z-index: 9999;`),M(dt,e(U)),M(It,Ze),M(Et,at),M(Dt,Ee)},[()=>window.innerHeight-e(u).getBoundingClientRect().top+8,()=>e(u).getBoundingClientRect().left-224+e(u).getBoundingClientRect().width,()=>g()("profile.editProfile"),()=>g()("navigation.settings"),()=>g()("navigation.logout")]),t(Te,ge)}),t(Ve,le)}),t(x,W)};c(it,x=>{e(l)&&e(u)&&p.$currentUser&&x(bt)})}h((x,W,$e,Ve)=>{O(te,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${x??""}`),O(D,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${W??""} relative`),O(ie,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${$e??""} relative`),O(et,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${Ve??""}`)},[()=>m("/")?"text-primary":"text-muted-foreground",()=>m("/messages")?"text-primary":"text-muted-foreground",()=>m("/notifications")?"text-primary":"text-muted-foreground",()=>m("/wallet")?"text-primary":"text-muted-foreground"]),t(V,ee),Xe(),K()}ht(["click"]);var $a=d('<button class="block lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-accent-dark text-foreground rounded-full shadow-lg hover:shadow-xl transition-all z-[500] flex items-center justify-center active:scale-95"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button>');function Yt(V,_){Ge(_,!0);const S=mt(_,"isHomePage",3,!1),g=B(()=>S()?Lt.selected:null);function A(){_.onclick?_.onclick():e(g)==="images"?or.open():st("/compose")}const K=B(()=>e(g)==="images"?"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z":"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),E=B(()=>e(g)==="images"?"Create media post":"Compose");var L=$a();L.__click=A;var m=a(L),n=a(m);r(m),r(L),h(()=>{ne(L,"aria-label",e(E)),ne(n,"d",e(K))}),t(V,L),Xe()}ht(["click"]);var Ca=d("<!> <!>",1),Ma=d('<!> <div class="px-4 pb-4"><!></div>',1);function za(V,_){Ge(_,!0);const S=new Ur("(min-width: 768px)");function g(m){st(`/p/${m.npub}`),_.onClose()}var A=k(),K=v(A);{var E=m=>{var n=k(),l=v(n);Me(l,()=>jr,(b,u)=>{u(b,{get open(){return _.isOpen},onOpenChange:w=>{w||_.onClose()},children:(w,U)=>{var H=k(),G=v(H);Me(G,()=>Nr,(F,T)=>{T(F,{class:"max-w-md",children:(X,pe)=>{var me=Ca(),ee=v(me);Me(ee,()=>Ir,(N,te)=>{te(N,{children:(ze,ye)=>{var ve=k(),D=v(ve);Me(D,()=>Pr,(Q,re)=>{re(Q,{children:(q,ie)=>{ot();var Ue=kt("Search Users");t(q,Ue)},$$slots:{default:!0}})}),t(ze,ve)},$$slots:{default:!0}})});var z=s(ee,2);Xt(z,{get ndk(){return p},onSelect:g,placeholder:"Search by name, NIP-05, or paste npub..."}),t(X,me)},$$slots:{default:!0}})}),t(w,H)},$$slots:{default:!0}})}),t(m,n)},L=m=>{var n=k(),l=v(n);Me(l,()=>Ar,(b,u)=>{u(b,{get open(){return _.isOpen},onOpenChange:w=>{w||_.onClose()},children:(w,U)=>{var H=k(),G=v(H);Me(G,()=>Sr,(F,T)=>{T(F,{children:(X,pe)=>{var me=Ma(),ee=v(me);Me(ee,()=>Br,(te,ze)=>{ze(te,{class:"text-left",children:(ye,ve)=>{var D=k(),Q=v(D);Me(Q,()=>Rr,(re,q)=>{q(re,{children:(ie,Ue)=>{ot();var De=kt("Search Users");t(ie,De)},$$slots:{default:!0}})}),t(ye,D)},$$slots:{default:!0}})});var z=s(ee,2),N=a(z);Xt(N,{get ndk(){return p},onSelect:g,placeholder:"Search by name, NIP-05, or paste npub..."}),r(z),t(X,me)},$$slots:{default:!0}})}),t(w,H)},$$slots:{default:!0}})}),t(m,n)};c(K,m=>{S.current?m(E):m(L,!1)})}t(V,A),Xe()}var Ua=d('<span class="font-medium">Search</span>'),Na=d('<span class="font-medium"> </span>'),Pa=d('<span class="font-medium">Notifications</span>'),ja=d('<span class="font-medium">Wallet</span>'),Sa=d('<span class="text-xs text-muted-foreground font-medium"> </span>'),Ra=d('<span class="font-medium">Community Invites</span>'),Aa=d('<a href="/agora/invites"><!> <!></a>'),La=d('<span class="font-medium"> </span>'),Ta=d('<span class="font-medium">Relay Feeds</span>'),Ha=d("<!> ",1),Ia=d('<a href="/relay-feeds"><div><!> <!></div> <!></a>'),Ba=d('<span class="font-medium"> </span>'),Va=d('<span class="font-medium"> </span>'),Ea=d("<span> </span>"),Da=d("<!> <!>",1),Wa=d("<span>Create Trade</span>"),Fa=d("<!> <!>",1),Oa=d("<span>Create Pack</span>"),Ya=d("<!> <!>",1),Ka=d("<span>Create Invite</span>"),Ja=d("<!> <!>",1),Za=d("<span>Create media post</span>"),Qa=d("<!> <!>",1),qa=d("<span> </span>"),Ga=d("<!> <!>",1),Xa=d('<a class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></a>'),eo=d('<button class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></button>'),to=d('<p class="text-sm text-muted-foreground mt-1"> </p>'),ro=d('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center gap-3"><!> <div class="flex-1"><h1 class="text-2xl font-bold text-foreground"> </h1> <!></div> <!></div></div></div>'),ao=d('<span class="font-medium"> </span>'),oo=d('<a class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></a>'),so=d('<span class="font-medium"> </span>'),no=d('<button class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></button>'),io=d('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><!></div></div>'),lo=d('<div class="lg:hidden p-3 border-b border-border bg-background"><!></div>'),co=d('<div class="h-4 bg-muted rounded animate-pulse"></div> <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div> <div class="h-4 bg-muted rounded animate-pulse"></div>',1),vo=d('<a class="block text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-2"> </a>'),uo=d('<!> <div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground"> </h2></div> <div class="space-y-3"><!></div></div> <!> <!> <div class="text-xs text-muted-foreground space-y-2"><div class="flex flex-wrap gap-3"><a href="#" class="hover:text-foreground transition-colors">Terms</a> <a href="#" class="hover:text-foreground transition-colors">Privacy</a> <a href="#" class="hover:text-foreground transition-colors">About</a> <a href="#" class="hover:text-foreground transition-colors">Help</a></div> <p>© 2024 Agora</p></div>',1),fo=d('<aside class="hidden lg:block w-80 p-4 space-y-4"><div class="sticky top-4 space-y-4"><!></div></aside>'),po=d(`<div class="h-screen bg-background flex justify-center overflow-hidden"><div class="flex w-full max-w-full lg:max-w-[1400px] relative"><aside><div><div><svg viewBox="0 0 686 250" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"><style>.st0{fill:#F68E1D;}
            .st1{fill:currentColor;}
            .st2{fill:currentColor;opacity:0.9;}</style><path class="st0" d="M109.5,196.1h66.7c17.5,0,31.6-14.2,31.6-31.6V97.8c0-17.5-14.2-31.6-31.6-31.6h-66.7
            c-17.5,0-31.6,14.2-31.6,31.6v66.7C77.9,182,92,196.1,109.5,196.1z"></path><g><path class="st1" d="M233.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L251,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H233.9z M273.1,87.7h8.8l-7.8,9.2h-3L273.1,87.7z"></path><path class="st1" d="M358.3,135.2c0-1.5-0.6-2.7-1.8-3.7c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H378v0.9c-2.9,0.3-4.9,0.9-6.1,1.8
              c-1.2,0.9-1.8,2.1-1.8,3.7v32.9c0,1.5,0.6,2.7,1.8,3.7c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-29v-0.9c3.5-0.3,5.9-0.9,7.2-1.8
              c1.3-0.9,2-2.1,2-3.7v-11.1c-1.5,2.9-3.7,5.2-6.7,6.7c-2.9,1.6-6.8,2.3-11.5,2.3c-4.5,0-8.7-0.7-12.3-2.2c-3.7-1.5-6.8-3.6-9.4-6.4
              c-2.6-2.8-4.6-6.2-6-10.2c-1.4-4-2.1-8.6-2.1-13.6c0-5.1,0.7-9.6,2.2-13.7c1.5-4.1,3.7-7.5,6.6-10.4c2.9-2.9,6.5-5.1,10.9-6.7
              c4.4-1.6,9.4-2.3,15.1-2.3c3.8,0,7.5,0.3,11.2,1c3.7,0.7,7.2,1.7,10.6,3v15.6h-1.3c-1.1-2.5-2.3-4.8-3.7-6.8c-1.4-2-3-3.8-4.7-5.3
              c-1.8-1.5-3.7-2.6-5.9-3.4c-2.2-0.8-4.6-1.2-7.3-1.2c-3.6,0-6.8,0.7-9.5,2.1c-2.7,1.4-4.9,3.4-6.7,6c-1.8,2.6-3.2,5.7-4,9.3
              c-0.9,3.6-1.3,7.7-1.3,12.2c0,9.2,1.8,16.2,5.5,20.8c3.7,4.7,8.6,7,14.6,7c4.8,0,8.5-1.6,11.3-4.8c2.7-3.2,4.2-8.5,4.5-15.8V135.2z
              "></path><path class="st1" d="M480.2,101.4c12.3,0,21.4,1.4,27.3,4.3c5.8,2.9,8.8,6.9,8.8,12.1c0,3.8-1.6,7.1-4.7,9.7
              c-3.2,2.6-8,4.5-14.7,5.6l19,25.9c0.9,1.3,2.2,2.4,3.8,3.5c1.6,1,3.8,1.7,6.7,2v0.9h-27.7v-0.9c2.9-0.3,4.5-1,4.8-2
              c0.3-1,0-2.2-0.9-3.5l-17.9-24.8c-0.7,0.1-1.4,0.1-2.1,0.1c-0.8,0-1.5,0-2.3,0h-7.1V159c0,1.5,0.6,2.7,1.8,3.7
              c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-27.7v-0.9c2.9-0.3,4.9-0.9,6.1-1.8c1.2-0.9,1.8-2.1,1.8-3.7v-51.2c0-1.5-0.6-2.7-1.8-3.7
              c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H480.2z M480.2,131.6c8.2,0,14.3-1.2,18.1-3.5c3.8-2.3,5.7-5.7,5.7-10.2c0-4.5-1.9-7.9-5.7-10.2
              c-3.8-2.3-9.8-3.5-18.1-3.5h-7.1v27.5H480.2z"></path><path class="st1" d="M528.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L546,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H528.9z"></path><path class="st1" d="M445.1,120c-1.5-4-3.7-7.5-6.5-10.3c-2.8-2.9-6.2-5.1-10.1-6.6c-4-1.6-8.4-2.3-13.4-2.3
              c-4.9,0-9.3,0.8-13.3,2.3c-4,1.6-7.4,3.8-10.2,6.6c-2.8,2.9-5,6.3-6.5,10.3c-1.5,4-2.3,8.5-2.3,13.5s0.8,9.4,2.3,13.5
              c1.5,4,3.7,7.5,6.5,10.3c2.8,2.9,6.2,5.1,10.2,6.6c4,1.6,8.4,2.3,13.3,2.3c5,0,9.4-0.8,13.4-2.3c3.9-1.6,7.3-3.8,10.1-6.6
              c2.8-2.9,5-6.3,6.5-10.3c1.5-4,2.3-8.5,2.3-13.5S446.6,124,445.1,120z M415,163.4c-12.4,0-20.9-13.4-20.9-30s8.2-30,20.9-30
              c13,0,20.9,13.4,20.9,30S428,163.4,415,163.4z"></path></g><path d="M144.2,133.4h-2.9v0.1C142.3,133.5,143.3,133.5,144.2,133.4z"></path><polygon class="st2" points="143.9,97.2 101,109.3 101,113.8 186.8,113.8 186.8,109.3 "></polygon><polygon class="st2" points="104.4,115.4 106,117.6 181.2,117.6 182.6,115.4 "></polygon><path class="st2" d="M125,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L125,120.4z M111.2,157h-2.6
            v-29.2h2.6V157z M117.1,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M185.3,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L185.3,120.4z M171.4,157h-2.6
            v-29.2h2.6V157z M177.3,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M155.2,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L155.2,120.4z M141.3,157h-2.6
            v-29.2h2.6V157z M147.2,157h-2.6v-29.2h2.6V157z"></path><path class="st1" d="M284.4,150.2h-2.6v0.1C282.7,150.3,283.6,150.3,284.4,150.2z"></path></svg></div> <button class="p-2 rounded-lg hover:bg-muted transition-colors text-muted-foreground hover:text-primary flex-shrink-0"><!></button></div> <nav class="flex-1 space-y-2"><button><!> <!></button> <!> <a href="/messages"><div><!> <!></div> <!></a> <a href="/notifications"><div><!> <!></div> <!></a> <a href="/wallet"><div><!> <!></div> <!></a> <!> <a href="/packs"><!> <!></a> <!> <a href="/trades"><!> <!></a> <a href="/marketplace"><!> <!></a> <button><!></button></nav> <div class="mt-auto pt-4 border-t border-border"><!></div></aside> <div><div><main class="flex-1 pb-20 lg:pb-0 bg-background max-w-screen overflow-y-auto"><!> <!> <!></main></div> <!></div></div> <!> <!></div> <!>`,1);function mo(V,_){Ge(_,!0);const S=()=>Nt(rr,"$page",A),g=()=>Nt(Jt,"$t",A),[A,K]=Kt();let E=Ye(!1);br("ndk",p);const L=p.$wallet,m=sr(p);let n=Ye(!1);const l=B(()=>S().url.pathname),b=B(()=>At.mode==="article"||At.mode==="profile"||At.mode==="reads"||e(l).startsWith("/note/")||e(l).startsWith("/messages/")||e(l).startsWith("/packs")||e(l).startsWith("/agora/invites")),u=B(()=>At.mode==="article"),w=B(()=>Zt(Y.selectedRelay,Y.relays.filter(o=>o.enabled&&o.read).map(o=>o.url))),U=B(()=>!e(b)&&!yt.rightSidebar?p.$subscribe(()=>({filters:[{kinds:[ar.Article],limit:5}],bufferMs:500,relayUrls:e(w).length>0?e(w):void 0,cacheUsage:e(w).length>0?gt.ONLY_RELAY:gt.CACHE_FIRST,closeOnEose:!0})):null),H=B(()=>e(U)?e(U).events.map(o=>kr.from(o)).filter(o=>o.title&&o.content).sort((o,i)=>(i.published_at??i.created_at??0)-(o.published_at??o.created_at??0)).slice(0,5):[]);ct(()=>{e(u)&&fe(n,!0)}),ct(()=>{p.$currentUser||ut.stop()}),ct(()=>(p.$currentUser?Ot.start():Ot.stop(),()=>{Ot.stop()}));var G=po(),F=v(G),T=a(F),X=a(T),pe=a(X),me=a(pe),ee=s(me,2);ee.__click=()=>fe(n,!e(n));var z=a(ee);{var N=o=>{j(o,{name:"chevron-right",size:"md"})},te=o=>{j(o,{name:"chevron-left",size:"md"})};c(z,o=>{e(n)?o(N):o(te,!1)})}r(ee),r(pe);var ze=s(pe,2),ye=a(ze);ye.__click=()=>fe(E,!0);var ve=a(ye);j(ve,{name:"search",size:"lg"});var D=s(ve,2);{var Q=o=>{var i=Ua();t(o,i)};c(D,o=>{e(n)||o(Q)})}r(ye);var re=s(ye,2);{let o=B(()=>e(l)==="/");Cr(re,{get active(){return e(o)},get collapsed(){return e(n)}})}var q=s(re,2),ie=a(q),Ue=a(ie);j(Ue,{name:"message",size:"lg"});var De=s(Ue,2);{var wt=o=>{var i=Na(),$=a(i,!0);r(i),h(P=>M($,P),[()=>g()("navigation.messages")]),t(o,i)};c(De,o=>{e(n)||o(wt)})}r(ie);var et=s(ie,2);{var $t=o=>{var i=k(),$=v(i);{var P=f=>{pt(f,{size:"xs",class:"absolute top-1.5 right-1.5",children:(y,I)=>{ot();var C=kt();h(()=>M(C,ut.totalUnreadCount>9?"9+":ut.totalUnreadCount)),t(y,C)},$$slots:{default:!0}})},oe=f=>{pt(f,{size:"sm",children:(y,I)=>{ot();var C=kt();h(()=>M(C,ut.totalUnreadCount>99?"99+":ut.totalUnreadCount)),t(y,C)},$$slots:{default:!0}})};c($,f=>{e(n)?f(P):f(oe,!1)})}t(o,i)};c(et,o=>{ut.totalUnreadCount>0&&o($t)})}r(q);var Ne=s(q,2),nt=a(Ne),_t=a(nt);j(_t,{name:"bell",size:"lg"});var Ct=s(_t,2);{var it=o=>{var i=Pa();t(o,i)};c(Ct,o=>{e(n)||o(it)})}r(nt);var bt=s(nt,2);{var x=o=>{var i=k(),$=v(i);{var P=f=>{pt(f,{size:"xs",class:"absolute top-1.5 right-1.5",children:(y,I)=>{ot();var C=kt();h(()=>M(C,m.counts.all>9?"9+":m.counts.all)),t(y,C)},$$slots:{default:!0}})},oe=f=>{pt(f,{size:"sm",children:(y,I)=>{ot();var C=kt();h(()=>M(C,m.counts.all>99?"99+":m.counts.all)),t(y,C)},$$slots:{default:!0}})};c($,f=>{e(n)?f(P):f(oe,!1)})}t(o,i)};c(bt,o=>{m.counts.all>0&&o(x)})}r(Ne);var W=s(Ne,2),$e=a(W),Ve=a($e);j(Ve,{name:"wallet",size:"lg"});var le=s(Ve,2);{var ae=o=>{var i=ja();t(o,i)};c(le,o=>{e(n)||o(ae)})}r($e);var Le=s($e,2);{var Te=o=>{var i=Sa(),$=a(i,!0);r(i),h(P=>M($,P),[()=>Wr(L.balance)]),t(o,i)};c(Le,o=>{!e(n)&&L.balance>0&&o(Te)})}r(W);var ge=s(W,2);{var Ce=o=>{var i=Aa(),$=a(i);j($,{name:"users",size:"lg"});var P=s($,2);{var oe=f=>{var y=Ra();t(f,y)};c(P,f=>{e(n)||f(oe)})}r(i),h(f=>{O(i,1,`flex items-center ${e(n)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${f??""}`),ne(i,"title",e(n)?"Community Invites":void 0)},[()=>e(l).startsWith("/agora/invites")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),t(o,i)};c(ge,o=>{Y.selectedRelay&&yr(Y.selectedRelay)&&o(Ce)})}var ke=s(ge,2),He=a(ke);j(He,{name:"packs",size:"lg"});var tt=s(He,2);{var dt=o=>{var i=La(),$=a(i,!0);r(i),h(P=>M($,P),[()=>g()("navigation.followPacks")]),t(o,i)};c(tt,o=>{e(n)||o(dt)})}r(ke);var Mt=s(ke,2);{var It=o=>{var i=Ia(),$=a(i),P=a($);j(P,{name:"relay",size:"lg"});var oe=s(P,2);{var f=C=>{var ce=Ta();t(C,ce)};c(oe,C=>{e(n)||C(f)})}r($);var y=s($,2);{var I=C=>{pt(C,{variant:"secondary",size:"sm",class:"gap-1",children:(ce,de)=>{var we=Ha(),Ie=v(we);j(Ie,{name:"trending",size:"xs"});var se=s(Ie);h(()=>M(se,` ${Wt.relays.length??""}`)),t(ce,we)},$$slots:{default:!0}})};c(y,C=>{e(n)||C(I)})}r(i),h(C=>{O(i,1,`flex items-center ${e(n)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${C??""}`),ne(i,"title",e(n)?"Relay Feeds":void 0),O($,1,`flex items-center ${e(n)?"":"gap-3"}`)},[()=>e(l).startsWith("/relay-feeds")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),t(o,i)};c(Mt,o=>{Wt&&Wt.relays.length>0&&o(It)})}var Ke=s(Mt,2),Pt=a(Ke);j(Pt,{name:"trades",size:"lg"});var Bt=s(Pt,2);{var Vt=o=>{var i=Ba(),$=a(i,!0);r(i),h(P=>M($,P),[()=>g()("navigation.trades")]),t(o,i)};c(Bt,o=>{e(n)||o(Vt)})}r(Ke);var Je=s(Ke,2),zt=a(Je);j(zt,{name:"marketplace",size:"lg"});var jt=s(zt,2);{var Et=o=>{var i=Va(),$=a(i,!0);r(i),h(P=>M($,P),[()=>g()("navigation.marketplace")]),t(o,i)};c(jt,o=>{e(n)||o(Et)})}r(Je);var rt=s(Je,2);rt.__click=()=>{e(l)==="/marketplace"?qt.open():e(l)==="/trades"?Mr.open():e(l).startsWith("/packs")?wr.open():e(l)==="/agora/invites"?Gt.open():e(l)==="/"&&Lt.selected==="images"?or.open():st("/compose")};var St=a(rt);{var Rt=o=>{var i=Da(),$=v(i);j($,{name:"plus",size:"md"});var P=s($,2);{var oe=f=>{var y=Ea(),I=a(y,!0);r(y),h(C=>M(I,C),[()=>g()("classifieds.createListing")]),t(f,y)};c(P,f=>{e(n)||f(oe)})}t(o,i)},Dt=o=>{var i=k(),$=v(i);{var P=f=>{var y=Fa(),I=v(y);j(I,{name:"plus",size:"md"});var C=s(I,2);{var ce=de=>{var we=Wa();t(de,we)};c(C,de=>{e(n)||de(ce)})}t(f,y)},oe=f=>{var y=k(),I=v(y);{var C=de=>{var we=Ya(),Ie=v(we);j(Ie,{name:"plus",size:"md"});var se=s(Ie,2);{var he=J=>{var _e=Oa();t(J,_e)};c(se,J=>{e(n)||J(he)})}t(de,we)},ce=de=>{var we=k(),Ie=v(we);{var se=J=>{var _e=Ja(),Ae=v(_e);j(Ae,{name:"invite",size:"md"});var Fe=s(Ae,2);{var Z=R=>{var ue=Ka();t(R,ue)};c(Fe,R=>{e(n)||R(Z)})}t(J,_e)},he=J=>{var _e=k(),Ae=v(_e);{var Fe=R=>{var ue=Qa(),Se=v(ue);j(Se,{name:"image",size:"md"});var Be=s(Se,2);{var be=Re=>{var Oe=Za();t(Re,Oe)};c(Be,Re=>{e(n)||Re(be)})}t(R,ue)},Z=R=>{var ue=Ga(),Se=v(ue);j(Se,{name:"edit",size:"md"});var Be=s(Se,2);{var be=Re=>{var Oe=qa(),hr=a(Oe,!0);r(Oe),h(_r=>M(hr,_r),[()=>g()("navigation.compose")]),t(Re,Oe)};c(Be,Re=>{e(n)||Re(be)})}t(R,ue)};c(Ae,R=>{e(l)==="/"&&Lt.selected==="images"?R(Fe):R(Z,!1)},!0)}t(J,_e)};c(Ie,J=>{e(l)==="/agora/invites"?J(se):J(he,!1)},!0)}t(de,we)};c(I,de=>{e(l).startsWith("/packs")?de(C):de(ce,!1)},!0)}t(f,y)};c($,f=>{e(l)==="/trades"?f(P):f(oe,!1)},!0)}t(o,i)};c(St,o=>{e(l)==="/marketplace"?o(Rt):o(Dt,!1)})}r(rt),r(ze);var Pe=s(ze,2),We=a(Pe);{var Ze=o=>{ra(o,{get collapsed(){return e(n)}})},at=o=>{{let i=B(()=>e(n)?"p-3":"gap-2 px-4 py-3");Jr(o,{get class(){return`w-full flex items-center justify-center ${e(i)??""} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors`}})}};c(We,o=>{p.$currentUser?o(Ze):o(at,!1)})}r(Pe),r(X);var Ee=s(X,2),je=a(Ee),Qe=a(je),qe=a(Qe);{var vt=o=>{var i=ro(),$=a(i),P=a($),oe=a(P);{var f=se=>{const he=B(()=>xe.headerConfig.backNav);var J=k(),_e=v(J);{var Ae=Z=>{var R=Xa(),ue=a(R);j(ue,{name:"arrow-left",size:"lg"}),r(R),h(()=>ne(R,"href",e(he).href)),t(Z,R)},Fe=Z=>{var R=k(),ue=v(R);{var Se=Be=>{var be=eo();be.__click=function(...Oe){e(he).onclick?.apply(this,Oe)};var Re=a(be);j(Re,{name:"arrow-left",size:"lg"}),r(be),t(Be,be)};c(ue,Be=>{e(he).onclick&&Be(Se)},!0)}t(Z,R)};c(_e,Z=>{e(he).href?Z(Ae):Z(Fe,!1)})}t(se,J)};c(oe,se=>{xe.headerConfig.backNav&&se(f)})}var y=s(oe,2),I=a(y),C=a(I,!0);r(I);var ce=s(I,2);{var de=se=>{var he=to(),J=a(he,!0);r(he),h(()=>M(J,xe.headerConfig.subtitle)),t(se,he)};c(ce,se=>{xe.headerConfig.subtitle&&se(de)})}r(y);var we=s(y,2);{var Ie=se=>{var he=k(),J=v(he);ft(J,()=>xe.headerConfig.actions),t(se,he)};c(we,se=>{xe.headerConfig.actions&&se(Ie)})}r(P),r($),r(i),h(()=>M(C,xe.headerConfig.title)),t(o,i)},Ut=o=>{var i=k(),$=v(i);{var P=f=>{var y=k(),I=v(y);ft(I,()=>xe.header),t(f,y)},oe=f=>{var y=k(),I=v(y);{var C=ce=>{var de=io(),we=a(de),Ie=a(we);{var se=J=>{var _e=oo(),Ae=a(_e);j(Ae,{name:"arrow-left",size:"lg"});var Fe=s(Ae,2);{var Z=R=>{var ue=ao(),Se=a(ue,!0);r(ue),h(()=>M(Se,xe.backNav.label)),t(R,ue)};c(Fe,R=>{xe.backNav.label&&R(Z)})}r(_e),h(()=>ne(_e,"href",xe.backNav.href)),t(J,_e)},he=J=>{var _e=k(),Ae=v(_e);{var Fe=Z=>{var R=no();R.__click=function(...be){xe.backNav.onclick?.apply(this,be)};var ue=a(R);j(ue,{name:"arrow-left",size:"lg"});var Se=s(ue,2);{var Be=be=>{var Re=so(),Oe=a(Re,!0);r(Re),h(()=>M(Oe,xe.backNav.label)),t(be,Re)};c(Se,be=>{xe.backNav.label&&be(Be)})}r(R),t(Z,R)};c(Ae,Z=>{xe.backNav.onclick&&Z(Fe)},!0)}t(J,_e)};c(Ie,J=>{xe.backNav.href?J(se):J(he,!1)})}r(we),r(de),t(ce,de)};c(I,ce=>{xe.backNav&&ce(C)},!0)}t(f,y)};c($,f=>{xe.header?f(P):f(oe,!1)},!0)}t(o,i)};c(qe,o=>{xe.headerConfig?o(vt):o(Ut,!1)})}var xt=s(qe,2);{var cr=o=>{var i=lo(),$=a(i);ft($,()=>yt.rightSidebar),r(i),t(o,i)};c(xt,o=>{yt.showOnMobile&&yt.rightSidebar&&!e(b)&&o(cr)})}var dr=s(xt,2);ft(dr,()=>_.children),r(Qe),r(je);var vr=s(je,2);{var ur=o=>{var i=fo(),$=a(i),P=a($);{var oe=y=>{var I=k(),C=v(I);ft(C,()=>yt.rightSidebar),t(y,I)},f=y=>{var I=uo(),C=v(I);ca(C,{});var ce=s(C,2),de=a(ce),we=s(a(de),2),Ie=a(we,!0);r(we),r(de);var se=s(de,2),he=a(se);{var J=Z=>{var R=co();ot(4),t(Z,R)},_e=Z=>{var R=k(),ue=v(R);Ht(ue,17,()=>e(H),Se=>Se.id,(Se,Be)=>{var be=vo(),Re=a(be,!0);r(be),h(Oe=>{ne(be,"href",Oe),M(Re,e(Be).title)},[()=>zr(e(Be),e(Be).author)]),t(Se,be)}),t(Z,R)};c(he,Z=>{e(H).length===0?Z(J):Z(_e,!1)})}r(se),r(ce);var Ae=s(ce,2);ma(Ae,{});var Fe=s(Ae,2);ia(Fe,{}),ot(2),h(Z=>M(Ie,Z),[()=>g()("feed.mediaTypes.articles")]),t(y,I)};c(P,y=>{yt.rightSidebar?y(oe):y(f,!1)})}r($),r(i),t(o,i)};c(vr,o=>{e(b)||o(ur)})}r(Ee),r(T);var Qt=s(T,2);wa(Qt,{});var fr=s(Qt,2);{var pr=o=>{Yt(o,{isHomePage:!0})},mr=o=>{var i=k(),$=v(i);{var P=f=>{Yt(f,{onclick:()=>qt.open()})},oe=f=>{var y=k(),I=v(y);{var C=ce=>{Yt(ce,{onclick:()=>Gt.open()})};c(I,ce=>{e(l)==="/agora/invites"&&ce(C)},!0)}t(f,y)};c($,f=>{e(l)==="/marketplace"?f(P):f(oe,!1)},!0)}t(o,i)};c(fr,o=>{e(l)==="/"?o(pr):o(mr,!1)})}r(F);var gr=s(F,2);za(gr,{get isOpen(){return e(E)},onClose:()=>fe(E,!1)}),h((o,i,$,P,oe,f,y,I,C)=>{O(X,1,`hidden lg:flex ${e(n)?"w-20":"w-64"} flex-col border-r border-border p-4 fixed left-0 top-0 bottom-0 overflow-y-auto overflow-x-visible transition-all duration-300 ease-in-out bg-background`),O(pe,1,`mb-6 flex items-center ${e(n)?"justify-center":"justify-between"} gap-2`),O(me,1,`px-2 ${e(n)?"hidden":"flex-1"} transition-opacity duration-300 text-foreground`),ne(ee,"aria-label",e(n)?"Expand sidebar":"Collapse sidebar"),O(ye,1,`w-full flex items-center ${e(n)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors text-foreground hover:bg-muted`),ne(ye,"title",e(n)?"Search Users":void 0),O(q,1,`flex items-center ${e(n)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${o??""} relative`),ne(q,"title",i),O(ie,1,`flex items-center ${e(n)?"":"gap-3"}`),O(Ne,1,`flex items-center ${e(n)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${$??""} relative`),ne(Ne,"title",e(n)?"Notifications":void 0),O(nt,1,`flex items-center ${e(n)?"":"gap-3"}`),O(W,1,`flex items-center ${e(n)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${P??""}`),ne(W,"title",e(n)?"Wallet":void 0),O($e,1,`flex items-center ${e(n)?"":"gap-3"}`),O(ke,1,`flex items-center ${e(n)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${oe??""}`),ne(ke,"title",f),O(Ke,1,`flex items-center ${e(n)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(l)==="/trades"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),ne(Ke,"title",y),O(Je,1,`flex items-center ${e(n)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(l)==="/marketplace"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),ne(Je,"title",I),O(rt,1,`w-full flex items-center justify-center ${e(n)?"p-3":"gap-2 px-6 py-3"} bg-primary hover:bg-primary/90 text-foreground font-semibold rounded-full transition-colors mt-4`),ne(rt,"title",C),O(Ee,1,`flex-1 flex ${e(n)?"lg:ml-20":"lg:ml-64"} transition-all duration-300 ease-in-out h-full`),O(je,1,`w-full lg:flex-1 ${e(b)?"lg:max-w-[900px]":"lg:max-w-[600px]"} min-w-0 flex flex-col h-full border-x border-border`)},[()=>e(l).startsWith("/messages")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(n)?g()("navigation.messages"):void 0,()=>e(l).startsWith("/notifications")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(l).startsWith("/wallet")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(l).startsWith("/packs")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(n)?g()("navigation.followPacks"):void 0,()=>e(n)?g()("navigation.trades"):void 0,()=>e(n)?g()("navigation.marketplace"):void 0,()=>e(n)?e(l)==="/marketplace"?g()("classifieds.createListing"):e(l)==="/trades"?"Create Trade":e(l).startsWith("/packs")?"Create Pack":e(l)==="/agora/invites"?"Create Invite":e(l)==="/"&&Lt.selected==="images"?"Create media post":g()("navigation.compose"):void 0]),t(V,G),Xe(),K()}ht(["click"]);function qo(V,_){mo(V,{children:(S,g)=>{var A=k(),K=v(A);ft(K,()=>_.children),t(S,A)},$$slots:{default:!0}})}export{qo as component};
