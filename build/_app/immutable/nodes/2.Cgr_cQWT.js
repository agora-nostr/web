import"../chunks/DsnmJJEf.js";import{m as Ke,n as Qt,v as Dt,bc as gr,W as hr,au as _r,X as br,bd as Rt,be as xr,y as yr,bf as kr,B as wr,a4 as Cr,a9 as er,z as Ot,o as Mr,a2 as zr,d as gt,p as Je,u as at,s as ue,b as Ie,c as S,f as g,e as o,h as Ze,i as c,k as r,g as e,j as n,r as t,L as vt,t as h,l as M,a as T,N as ut,bg as $r,aP as St}from"../chunks/Bq750rDx.js";import{i as l}from"../chunks/BcjopvHb.js";import{e as Vt}from"../chunks/Cjcfrngr.js";import{a as F,d as Nr,c as te,e as ar,b as or}from"../chunks/uSFILAY7.js";import{s as Gt,a as jt}from"../chunks/wxUnewq1.js";import{p as sr}from"../chunks/CFwZN-iQ.js";import{g as ot}from"../chunks/C88829DE.js";import{$ as Xt}from"../chunks/L2joq6-K.js";import{n as p,s as I,e as mt,C as qt,N as nr,k as Ur,r as Yt,d as jr}from"../chunks/CdRP5_sk.js";import{s as Ct}from"../chunks/DJZteyxf.js";import{h as ce}from"../chunks/jsJqZDHS.js";import{l as Tt}from"../chunks/D0qakMUX.js";import{c as Pr}from"../chunks/DLXKwEVI.js";import{c as tr}from"../chunks/BTtwMI9n.js";import{N as Ar,c as rr}from"../chunks/C_GCMw-M.js";import{c as ir,h as Et,R as Lr}from"../chunks/DqDkmS3U.js";import{c as Rr}from"../chunks/BZzQpa3b.js";import{m as dt}from"../chunks/BkQIuFjj.js";import{n as Kt}from"../chunks/vMgzIjfk.js";import{g as Sr}from"../chunks/BgxlgyeA.js";import{c as lr}from"../chunks/DzEFrwiG.js";import{p as pt,b as Ht}from"../chunks/BL6J_geM.js";import{l as cr}from"../chunks/DlmFcGBX.js";import{k as vr}from"../chunks/BDrNeWHA.js";import{A as Bt}from"../chunks/Bt6DpIqu.js";import{E as Tr}from"../chunks/BumDDlbV.js";import{U as Er}from"../chunks/DOhHcjXC.js";import{u as Hr}from"../chunks/BKSKCJuW.js";import{I as P}from"../chunks/BrZTJthz.js";function dr(E,k,A,m,H,D){let B=Ke;Ke&&Qt();var b=null;Ke&&Dt.nodeType===gr&&(b=Dt,Qt());var s=Ke?Dt:E,v=new br(s,!1);hr(()=>{const f=k()||null;var y=f==="svg"?xr:null;if(f===null){v.ensure(null,null),Rt(!0);return}return v.ensure(f,d=>{if(f){if(b=Ke?b:y?document.createElementNS(y,f):document.createElement(f),yr(b,b),m){Ke&&kr(f)&&b.append(document.createComment(""));var z=Ke?wr(b):b.appendChild(Cr());Ke&&(z===null?er(!1):Ot(z)),m(b,z)}Mr.nodes_end=b,d.before(b)}Ke&&Ot(d)}),Rt(!0),()=>{f&&Rt(!1)}},_r),zr(()=>{Rt(!0)}),B&&(er(!0),Ot(s))}const Br=9735,Vr=3e4;class Ir{zapSubscription=null;checkInterval=null;isProcessing=!1;start(){if(Kt.enabled){if(!p.$currentUser){console.warn("[NpubCashMonitor] No active user, cannot start monitoring");return}console.log("[NpubCashMonitor] Starting zap monitoring for",p.$currentUser.pubkey),this.zapSubscription=p.subscribe({kinds:[Br],"#p":[p.$currentUser.pubkey]},{closeOnEose:!1}),this.zapSubscription.on("event",()=>{console.log("[NpubCashMonitor] Zap received, checking npub.cash balance"),this.checkAndClaim()}),this.checkInterval=setInterval(()=>{this.checkAndClaim()},Vr),this.checkAndClaim()}}stop(){this.zapSubscription&&(this.zapSubscription.stop(),this.zapSubscription=null),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),console.log("[NpubCashMonitor] Stopped monitoring")}async checkAndClaim(){if(Kt.enabled&&!this.isProcessing){if(!p.$wallet){console.warn("[NpubCashMonitor] No wallet available, skipping token claim");return}this.isProcessing=!0;try{const k=await Kt.claimTokens();k&&(console.log("[NpubCashMonitor] Token claimed, redeeming to wallet"),await this.redeemToWallet(k))}catch(k){console.error("[NpubCashMonitor] Error checking/claiming tokens:",k)}finally{this.isProcessing=!1}}}async redeemToWallet(k){if(!p.$wallet){console.warn("[NpubCashMonitor] No wallet available, cannot redeem token");return}try{await p.$wallet.receiveToken(k),console.log("[NpubCashMonitor] ✓ Token redeemed to wallet")}catch(A){console.error("[NpubCashMonitor] Failed to redeem token to wallet:",A)}}}const Jt=new Ir;function Wr(E){return E===0?"0":E>=1e6?`${(E/1e6).toFixed(1)}M`:E>=1e3?`${(E/1e3).toFixed(1)}k`:new Intl.NumberFormat("en-US").format(E)}var Fr=c('<img class="w-6 h-6 rounded-full object-cover"/>'),Dr=c('<div class="w-6 h-6 rounded-full bg-primary flex items-center justify-center"><span class="text-xs font-bold"> </span></div>'),Or=c('<button class="flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted text-foreground rounded-lg transition-colors"><!> <span> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button>'),Yr=c('<button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg> <span>Login</span></button>');function Kr(E,k){Je(k,!0);const A=pt(k,"class",3,"px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-semibold");let m=Ie(null);at(()=>{const f=p.$currentUser?.pubkey;if(!f){ue(m,null);return}p.fetchUser(f).then(y=>{y?.fetchProfile().then(d=>{ue(m,d,!0)})})});const H=T(()=>e(m)?.name||e(m)?.displayName||"Anon");function D(){p.$sessions.logout()}var B=S(),b=g(B);{var s=f=>{var y=Or();y.__click=D;var d=r(y);{var z=K=>{var V=Fr();h(()=>{te(V,"src",e(m).image),te(V,"alt",e(H))}),o(K,V)},$=K=>{var V=Dr(),fe=r(V),pe=r(fe,!0);t(fe),t(V),h(Ae=>M(pe,Ae),[()=>e(H).charAt(0).toUpperCase()]),o(K,V)};l(d,K=>{e(m)?.image?K(z):K($,!1)})}var O=n(d,2),re=r(O,!0);t(O),vt(2),t(y),h(()=>M(re,e(H))),o(f,y)},v=f=>{var y=Yr();y.__click=()=>cr.open("signup"),h(()=>F(y,1,Nr(A()))),o(f,y)};l(b,f=>{p.$currentUser?f(s):f(v,!1)})}o(E,B),Ze()}gt(["click"]);var Jr=c('<div class="flex-1 min-w-0 text-left"><p class="font-medium text-sm truncate text-foreground"> </p> <p class="text-xs text-muted-foreground truncate"> </p></div>'),Zr=c("<button><!> <!></button>"),Gr=c('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <span> </span>',1),Xr=c('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> <span> </span>',1),qr=c('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <span> </span>',1),Qr=c('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> <span> </span></button></div>'),ea=c("<!> <!>",1);function ta(E,k){Je(k,!0);const A=()=>jt(Xt,"$t",m),[m,H]=Gt(),D=pt(k,"collapsed",3,!1);let B=Ie(!1),b=Ie(void 0),s=Ie(void 0),v=Ie(null);at(()=>{const U=p.$currentUser?.pubkey;if(!U){ue(v,null);return}p.fetchUser(U).then(L=>{L?.fetchProfile().then(ae=>{ue(v,ae,!0)})})});const f=T(()=>e(v)?.displayName||e(v)?.name||"Anonymous"),y=T(()=>p.$currentUser?.npub);function d(){ue(B,!e(B))}function z(){ue(B,!1)}function $(){p.$sessions.logout(),z()}function O(){e(y)&&(ot(`/p/${e(y)}`),z())}function re(){ot("/settings"),z()}function K(){const U=I.theme;U==="light"?I.setTheme("dark"):U==="dark"?I.setTheme("system"):I.setTheme("light")}at(()=>{if(!e(B))return;const U=L=>{e(b)&&!e(b).contains(L.target)&&e(s)&&!e(s).contains(L.target)&&ue(B,!1)};return document.addEventListener("click",U),()=>document.removeEventListener("click",U)});var V=ea(),fe=g(V);{var pe=U=>{var L=Zr();L.__click=d;var ae=r(L);Bt(ae,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},class:"w-10 h-10"});var Ce=n(ae,2);{var Me=xe=>{var J=Jr(),ve=r(J),ge=r(ve,!0);t(ve);var ze=n(ve,2),me=r(ze,!0);t(ze),t(J),h(Le=>{M(ge,e(f)),M(me,Le)},[()=>e(v)?.nip05||(e(y)?`${e(y).slice(0,16)}...`:"")]),o(xe,J)};l(Ce,xe=>{D()||xe(Me)})}t(L),Ht(L,xe=>ue(s,xe),()=>e(s)),h(()=>{F(L,1,`w-full flex items-center ${D()?"justify-center p-3":"gap-3 px-2 py-2"} rounded-lg hover:bg-muted transition-colors cursor-pointer`),te(L,"title",D()?e(f):void 0)}),o(U,L)};l(fe,U=>{p.$currentUser&&U(pe)})}var Ae=n(fe,2);{var be=U=>{var L=S(),ae=g(L);vr(ae,()=>e(B),Ce=>{var Me=S(),xe=g(Me);dr(xe,()=>"div",!1,(J,ve)=>{ar(J,()=>({style:"display: contents"}));var ge=Qr(),ze=r(ge);ze.__click=O;var me=r(ze);Bt(me,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},class:"w-12 h-12"});var Le=n(me,2),Ge=r(Le),Mt=r(Ge,!0);t(Ge);var We=n(Ge,2),zt=r(We,!0);t(We),t(Le),t(ze);var Re=n(ze,4);Re.__click=K;var Fe=r(Re);{var Xe=q=>{var se=Gr(),He=n(g(se),2),Oe=r(He,!0);t(He),h(ye=>M(Oe,ye),[()=>A()("settings.sections.appearance.themes.light")]),o(q,se)},ht=q=>{var se=S(),He=g(se);{var Oe=Ne=>{var ke=Xr(),Se=n(g(ke),2),Ye=r(Se,!0);t(Se),h(st=>M(Ye,st),[()=>A()("settings.sections.appearance.themes.dark")]),o(Ne,ke)},ye=Ne=>{var ke=qr(),Se=n(g(ke),2),Ye=r(Se,!0);t(Se),h(st=>M(Ye,st),[()=>A()("settings.sections.appearance.themes.system")]),o(Ne,ke)};l(He,Ne=>{I.theme==="dark"?Ne(Oe):Ne(ye,!1)},!0)}o(q,se)};l(Fe,q=>{I.theme==="light"?q(Xe):q(ht,!1)})}t(Re);var qe=n(Re,2);qe.__click=re;var _t=n(r(qe),2),_=r(_t,!0);t(_t),t(qe);var X=n(qe,4);X.__click=$;var $e=n(r(X),2),De=r($e,!0);t($e),t(X),t(ge),Ht(ge,q=>ue(b,q),()=>e(b)),h((q,se,He,Oe,ye)=>{or(ge,`position: fixed; bottom: ${q??""}px; left: ${se??""}px; z-index: 9999;`),M(Mt,e(f)),M(zt,He),M(_,Oe),M(De,ye)},[()=>window.innerHeight-e(s).getBoundingClientRect().top+8,()=>e(s).getBoundingClientRect().left,()=>A()("profile.editProfile"),()=>A()("navigation.settings"),()=>A()("navigation.logout")]),o(ve,ge)}),o(Ce,Me)}),o(U,L)};l(Ae,U=>{e(B)&&e(s)&&U(be)})}o(E,V),Ze(),H()}gt(["click"]);var ra=c('<div class="w-12 h-12 bg-muted rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),aa=c('<p class="text-xs text-muted-foreground mt-1"> </p>'),oa=c('<button class="w-full bg-muted/50 rounded-lg p-3 transition-all hover:bg-muted hover:scale-[1.02] text-left"><div class="flex gap-3"><!> <div class="flex-1 min-w-0"><h4 class="text-sm font-medium text-card-foreground truncate"> </h4> <!></div></div></button>'),sa=c('<div class="bg-card rounded-2xl p-5 border border-border backdrop-blur-sm"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> <h3 class="text-lg font-semibold text-card-foreground">Recent Marketplace</h3></div> <button class="flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors">View All <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="space-y-3"><!></div></div>');function na(E,k){Je(k,!0);const A=T(()=>qt(I.selectedRelay,I.relays.filter($=>$.enabled&&$.read).map($=>$.url))),m=p.$subscribe(()=>({filters:[{kinds:[30402],limit:5}],bufferMs:100,relayUrls:e(A).length>0?e(A):void 0,cacheUsage:e(A).length>0?mt.ONLY_RELAY:mt.PARALLEL})),H=T(()=>m.events.filter($=>($.tagValue("status")||"active")==="active").slice(0,5));function D($){return $.tagValue("image")}function B($){const O=$.tags.find(re=>re[0]==="price");return!O||!O[1]||!O[2]?null:{amount:O[1],currency:O[2]}}var b=sa(),s=r(b),v=n(r(s),2);v.__click=()=>ot("/marketplace"),t(s);var f=n(s,2),y=r(f);{var d=$=>{Tr($,{icon:"marketplace",title:"No marketplace items yet",size:"sm"})},z=$=>{var O=S(),re=g(O);Vt(re,17,()=>e(H),K=>K.id,(K,V)=>{const fe=T(()=>B(e(V)));var pe=oa();pe.__click=()=>ot(`/marketplace/${e(V).encode()}`);var Ae=r(pe),be=r(Ae);{var U=J=>{var ve=ra(),ge=r(ve);t(ve),h((ze,me)=>{te(ge,"src",ze),te(ge,"alt",me)},[()=>D(e(V)),()=>e(V).tagValue("title")||"Listing"]),o(J,ve)};l(be,J=>{D(e(V))&&J(U)})}var L=n(be,2),ae=r(L),Ce=r(ae,!0);t(ae);var Me=n(ae,2);{var xe=J=>{var ve=aa(),ge=r(ve);t(ve),h(()=>M(ge,`${e(fe).amount??""} ${e(fe).currency??""}`)),o(J,ve)};l(Me,J=>{e(fe)&&J(xe)})}t(L),t(Ae),t(pe),h(J=>M(Ce,J),[()=>e(V).tagValue("title")||"Untitled"]),o(K,pe)}),o($,O)};l(y,$=>{e(H).length===0?$(d):$(z,!1)})}t(f),t(b),o(E,b),Ze()}gt(["click"]);var ia=c('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">New Members</h2></div> <div class="space-y-3"></div></div>');function la(E,k){Je(k,!0);const A=T(()=>!!I.selectedRelay),m=T(()=>I.selectedRelay?p.$subscribe(()=>({filters:[{kinds:[514],limit:10}],relayUrls:[I.selectedRelay],cacheUsage:mt.ONLY_RELAY,subId:"new-members-514"})):null),H=T(()=>e(m)?e(m).events.map(f=>{const y=f.tagValue("p");return{memberPubkey:f.pubkey,inviterPubkey:y,joinedAt:f.created_at||0}}).sort((f,y)=>y.joinedAt-f.joinedAt).slice(0,5):[]);var D=S(),B=g(D);{var b=s=>{var v=ia(),f=n(r(v),2);Vt(f,21,()=>e(H),y=>y.memberPubkey,(y,d)=>{Ar(y,{get memberPubkey(){return e(d).memberPubkey},get inviterPubkey(){return e(d).inviterPubkey},get joinedAt(){return e(d).joinedAt}})}),t(f),t(v),o(s,v)};l(B,s=>{e(A)&&e(H).length>0&&s(b)})}o(E,D),Ze()}var ca=c('<div class="text-center py-4 text-sm text-muted-foreground">No journalists found yet</div>'),va=c('<p class="text-xs text-muted-foreground"> </p>'),da=c("<button> </button>"),ua=c('<div class="flex items-center gap-3"><!> <!></div>'),fa=c('<div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <h2 class="text-lg font-semibold text-card-foreground">Journalists</h2></div> <div class="space-y-3"><!></div></div>');function pa(E,k){Je(k,!0);const A=T(()=>qt(I.selectedRelay,I.relays.filter(d=>d.enabled&&d.read).map(d=>d.url))),m=p.$subscribe(()=>({filters:[{kinds:[nr.Article],limit:50}],bufferMs:500,relayUrls:e(A).length>0?e(A):void 0,cacheUsage:e(A).length>0?mt.ONLY_RELAY:mt.CACHE_FIRST,closeOnEose:!0})),H=T(()=>{const d=new Map;for(const z of m.events){const $=d.get(z.pubkey)||0;d.set(z.pubkey,$+1)}return Array.from(d.entries()).map(([z,$])=>({pubkey:z,articleCount:$})).sort((z,$)=>$.articleCount-z.articleCount).slice(0,5)});function D(d){return p.$follows.includes(d)}async function B(d){if(p.$currentUser)try{D(d)?await p.$follows.remove(d):await p.$follows.add(d)}catch(z){console.error("Failed to toggle follow:",z)}}var b=fa(),s=n(r(b),2),v=r(s);{var f=d=>{var z=ca();o(d,z)},y=d=>{var z=S(),$=g(z);Vt($,17,()=>e(H),O=>O.pubkey,(O,re)=>{const K=T(()=>D(e(re).pubkey));var V=ua(),fe=r(V);Er(fe,{get pubkey(){return e(re).pubkey},variant:"avatar-name-meta",avatarSize:"w-10 h-10",nameSize:"text-sm font-medium",class:"flex-1 min-w-0",meta:U=>{var L=va(),ae=r(L);t(L),h(()=>M(ae,`${e(re).articleCount??""} ${e(re).articleCount===1?"article":"articles"}`)),o(U,L)},$$slots:{meta:!0}});var pe=n(fe,2);{var Ae=be=>{var U=da();U.__click=()=>B(e(re).pubkey);var L=r(U,!0);t(U),h(()=>{F(U,1,`px-3 py-1 text-xs font-medium rounded-full transition-colors flex-shrink-0 ${e(K)?"bg-muted text-muted-foreground hover:bg-muted/80":"text-primary hover:bg-primary/10"}`),M(L,e(K)?"Following":"Follow")}),o(be,U)};l(pe,be=>{p.$currentUser&&e(re).pubkey!==p.$currentUser.pubkey&&be(Ae)})}t(V),o(O,V)}),o(d,z)};l(v,d=>{e(H).length===0?d(f):d(y,!1)})}t(s),t(b),o(E,b),Ze()}gt(["click"]);var ma=c("<span><!></span>");function ft(E,k){Je(k,!0);const A=pt(k,"variant",3,"primary"),m=pt(k,"size",3,"sm"),H=pt(k,"indicator",3,!1),D=pt(k,"class",3,""),B=T(()=>({primary:"bg-primary text-primary-foreground",secondary:"bg-primary/20 text-primary"})[A()]),b=T(()=>H()?"w-2 h-2":{xs:"min-w-[18px] h-[18px] px-1 text-[10px] font-bold",sm:"px-2 py-1 text-xs font-medium"}[m()]);var s=ma(),v=r(s);{var f=y=>{var d=S(),z=g(d);ut(z,()=>k.children),o(y,d)};l(v,y=>{!H()&&k.children&&y(f)})}t(s),h(()=>F(s,1,`rounded-full flex items-center justify-center ${e(B)??""} ${e(b)??""} ${D()??""}`)),o(E,s),Ze()}var ga=c('<img alt="" class="w-6 h-6 rounded"/>'),ha=c("<!> <span> </span>",1),_a=c("<!> <span> </span>",1),ba=c("<!> <span> </span>",1),xa=c('<div class="w-56 bg-popover border border-border rounded-lg shadow-xl overflow-hidden"><button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left"><!> <div class="flex-1 min-w-0"><p class="font-medium text-sm truncate text-popover-foreground"> </p> <p class="text-xs text-muted-foreground"> </p></div></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!></button> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-popover-foreground"><!> <span> </span></button> <div class="h-px bg-border"></div> <button class="w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-colors text-left text-destructive hover:text-destructive/90"><!> <span> </span></button></div>'),ya=c('<nav class="block lg:hidden fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border z-[1000]"><div class="flex justify-around items-center px-2 py-3 safe-bottom svelte-2rf3uy"><a href="/" aria-label="Home"><!></a> <a href="/messages" aria-label="Messages"><!> <!></a> <a href="/notifications" aria-label="Notifications"><!> <!></a> <a href="/wallet" aria-label="Wallet"><!></a> <button class="flex items-center justify-center p-2 rounded-lg transition-colors" aria-label="Profile"><!></button></div></nav> <!>',1);function ka(E,k){Je(k,!0);const A=()=>jt(sr,"$page",H),m=()=>jt(Xt,"$t",H),[H,D]=Gt(),B=T(()=>A().url.pathname);p.$wallet;const b=lr(p),s=_=>_==="/"?e(B)==="/":e(B).startsWith(_),v=T(()=>I.selectedRelay?Hr(I.selectedRelay):null);let f=Ie(!1),y=Ie(void 0),d=Ie(void 0),z=Ie(null);at(()=>{const _=p.$currentUser?.pubkey;if(!_){ue(z,null);return}p.fetchUser(_).then(X=>{X?.fetchProfile().then($e=>{ue(z,$e,!0)})})});const $=T(()=>e(z)?.displayName||e(z)?.name||"Anonymous"),O=T(()=>p.$currentUser?.npub);function re(){p.$currentUser?ue(f,!e(f)):cr.open("signup")}function K(){ue(f,!1)}function V(){p.$sessions.logout(),K()}function fe(){e(O)&&(ot(`/p/${e(O)}`),K())}function pe(){ot("/settings"),K()}function Ae(){const _=I.theme;_==="light"?I.setTheme("dark"):_==="dark"?I.setTheme("system"):I.setTheme("light")}at(()=>{if(!e(f))return;const _=X=>{e(y)&&!e(y).contains(X.target)&&e(d)&&!e(d).contains(X.target)&&ue(f,!1)};return document.addEventListener("click",_),()=>document.removeEventListener("click",_)});var be=ya(),U=g(be),L=r(U),ae=r(L),Ce=r(ae);{var Me=_=>{var X=ga();h(()=>te(X,"src",e(v).info.icon)),o(_,X)},xe=_=>{var X=S(),$e=g(X);{var De=se=>{P(se,{name:"relay",size:"lg"})},q=se=>{P(se,{name:"users",size:"lg"})};l($e,se=>{I.selectedRelay?se(De):se(q,!1)},!0)}o(_,X)};l(Ce,_=>{I.selectedRelay&&e(v)?.info?.icon?_(Me):_(xe,!1)})}t(ae);var J=n(ae,2),ve=r(J);P(ve,{name:"message",size:"lg"});var ge=n(ve,2);{var ze=_=>{ft(_,{indicator:!0,class:"absolute top-1.5 right-1.5"})};l(ge,_=>{dt.totalUnreadCount>0&&_(ze)})}t(J);var me=n(J,2),Le=r(me);P(Le,{name:"bell",size:"lg"});var Ge=n(Le,2);{var Mt=_=>{ft(_,{indicator:!0,class:"absolute top-1.5 right-1.5"})};l(Ge,_=>{b.counts.all>0&&_(Mt)})}t(me);var We=n(me,2),zt=r(We);P(zt,{name:"wallet",size:"lg"}),t(We);var Re=n(We,2);Re.__click=re;var Fe=r(Re);{var Xe=_=>{Bt(_,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},class:"w-8 h-8 rounded-full"})},ht=_=>{P(_,{name:"user",size:"lg",class:"text-muted-foreground"})};l(Fe,_=>{p.$currentUser?_(Xe):_(ht,!1)})}t(Re),Ht(Re,_=>ue(d,_),()=>e(d)),t(L),t(U);var qe=n(U,2);{var _t=_=>{var X=S(),$e=g(X);vr($e,()=>e(f),De=>{var q=S(),se=g(q);dr(se,()=>"div",!1,(He,Oe)=>{ar(He,()=>({style:"display: contents"}));var ye=xa(),Ne=r(ye);Ne.__click=fe;var ke=r(Ne);Bt(ke,{get ndk(){return p},get pubkey(){return p.$currentUser.pubkey},class:"w-12 h-12"});var Se=n(ke,2),Ye=r(Se),st=r(Ye,!0);t(Ye);var Qe=n(Ye,2),Pt=r(Qe,!0);t(Qe),t(Se),t(Ne);var bt=n(Ne,4);bt.__click=Ae;var It=r(bt);{var nt=Ue=>{var Be=ha(),et=g(Be);P(et,{name:"sun",size:"sm"});var tt=n(et,2),rt=r(tt,!0);t(tt),h(Ve=>M(rt,Ve),[()=>m()("settings.sections.appearance.themes.light")]),o(Ue,Be)},Wt=Ue=>{var Be=S(),et=g(Be);{var tt=Ve=>{var it=_a(),lt=g(it);P(lt,{name:"moon",size:"sm"});var ct=n(lt,2),wt=r(ct,!0);t(ct),h(Ut=>M(wt,Ut),[()=>m()("settings.sections.appearance.themes.dark")]),o(Ve,it)},rt=Ve=>{var it=ba(),lt=g(it);P(lt,{name:"monitor",size:"sm"});var ct=n(lt,2),wt=r(ct,!0);t(ct),h(Ut=>M(wt,Ut),[()=>m()("settings.sections.appearance.themes.system")]),o(Ve,it)};l(et,Ve=>{I.theme==="dark"?Ve(tt):Ve(rt,!1)},!0)}o(Ue,Be)};l(It,Ue=>{I.theme==="light"?Ue(nt):Ue(Wt,!1)})}t(bt);var xt=n(bt,2);xt.__click=pe;var At=r(xt);P(At,{name:"settings",size:"sm"});var $t=n(At,2),Ft=r($t,!0);t($t),t(xt);var Nt=n(xt,4);Nt.__click=V;var Lt=r(Nt);P(Lt,{name:"logout",size:"sm"});var yt=n(Lt,2),kt=r(yt,!0);t(yt),t(Nt),t(ye),Ht(ye,Ue=>ue(y,Ue),()=>e(y)),h((Ue,Be,et,tt,rt)=>{or(ye,`position: fixed; bottom: ${Ue??""}px; left: ${Be??""}px; z-index: 9999;`),M(st,e($)),M(Pt,et),M(Ft,tt),M(kt,rt)},[()=>window.innerHeight-e(d).getBoundingClientRect().top+8,()=>e(d).getBoundingClientRect().left-224+e(d).getBoundingClientRect().width,()=>m()("profile.editProfile"),()=>m()("navigation.settings"),()=>m()("navigation.logout")]),o(Oe,ye)}),o(De,q)}),o(_,X)};l(qe,_=>{e(f)&&e(d)&&p.$currentUser&&_(_t)})}h((_,X,$e,De)=>{F(ae,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${_??""}`),F(J,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${X??""} relative`),F(me,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${$e??""} relative`),F(We,1,`flex items-center justify-center p-3 rounded-lg transition-colors ${De??""}`)},[()=>s("/")?"text-primary":"text-muted-foreground",()=>s("/messages")?"text-primary":"text-muted-foreground",()=>s("/notifications")?"text-primary":"text-muted-foreground",()=>s("/wallet")?"text-primary":"text-muted-foreground"]),o(E,be),Ze(),D()}gt(["click"]);var wa=c('<button class="block lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-accent-dark text-foreground rounded-full shadow-lg hover:shadow-xl transition-all z-[500] flex items-center justify-center active:scale-95"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button>');function Zt(E,k){Je(k,!0);const A=pt(k,"isHomePage",3,!1),m=T(()=>A()?Et.selected:null);function H(){k.onclick?k.onclick():e(m)==="images"?ir.open():ot("/compose")}const D=T(()=>e(m)==="images"?"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z":"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),B=T(()=>e(m)==="images"?"Create media post":"Compose");var b=wa();b.__click=H;var s=r(b),v=r(s);t(s),t(b),h(()=>{te(b,"aria-label",e(B)),te(v,"d",e(D))}),o(E,b),Ze()}gt(["click"]);var Ca=c('<span class="font-medium"> </span>'),Ma=c('<span class="font-medium">Notifications</span>'),za=c('<span class="font-medium">Wallet</span>'),$a=c('<span class="text-xs text-muted-foreground font-medium"> </span>'),Na=c('<span class="font-medium">Community Invites</span>'),Ua=c('<a href="/agora/invites"><!> <!></a>'),ja=c('<span class="font-medium"> </span>'),Pa=c('<span class="font-medium">Relay Feeds</span>'),Aa=c("<!> ",1),La=c('<a href="/relay-feeds"><div><!> <!></div> <!></a>'),Ra=c('<span class="font-medium"> </span>'),Sa=c('<span class="font-medium"> </span>'),Ta=c("<span> </span>"),Ea=c("<!> <!>",1),Ha=c("<span>Create Trade</span>"),Ba=c("<!> <!>",1),Va=c("<span>Create Pack</span>"),Ia=c("<!> <!>",1),Wa=c("<span>Create Invite</span>"),Fa=c("<!> <!>",1),Da=c("<span>Create media post</span>"),Oa=c("<!> <!>",1),Ya=c("<span> </span>"),Ka=c("<!> <!>",1),Ja=c('<a class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></a>'),Za=c('<button class="inline-flex items-center justify-center p-2 rounded-lg hover:bg-muted transition-colors text-foreground"><!></button>'),Ga=c('<p class="text-sm text-muted-foreground mt-1"> </p>'),Xa=c('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><div class="flex items-center gap-3"><!> <div class="flex-1"><h1 class="text-2xl font-bold text-foreground"> </h1> <!></div> <!></div></div></div>'),qa=c('<span class="font-medium"> </span>'),Qa=c('<a class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></a>'),eo=c('<span class="font-medium"> </span>'),to=c('<button class="inline-flex items-center gap-2 text-foreground hover:text-primary transition-colors"><!> <!></button>'),ro=c('<div class="border-b border-border bg-background"><div class="px-4 sm:px-6 lg:px-8 py-3"><!></div></div>'),ao=c('<div class="lg:hidden p-3 border-b border-border bg-background"><!></div>'),oo=c('<div class="h-4 bg-muted rounded animate-pulse"></div> <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div> <div class="h-4 bg-muted rounded animate-pulse"></div>',1),so=c('<a class="block text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-2"> </a>'),no=c('<!> <div class="p-4 bg-card rounded-lg border border-border"><div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h2 class="text-lg font-semibold text-card-foreground"> </h2></div> <div class="space-y-3"><!></div></div> <!> <!> <div class="text-xs text-muted-foreground space-y-2"><div class="flex flex-wrap gap-3"><a href="#" class="hover:text-foreground transition-colors">Terms</a> <a href="#" class="hover:text-foreground transition-colors">Privacy</a> <a href="#" class="hover:text-foreground transition-colors">About</a> <a href="#" class="hover:text-foreground transition-colors">Help</a></div> <p>© 2024 Agora</p></div>',1),io=c('<aside class="hidden lg:block w-80 p-4 space-y-4"><div class="sticky top-4 space-y-4"><!></div></aside>'),lo=c(`<div class="h-screen bg-background flex justify-center overflow-hidden"><div class="flex w-full max-w-full lg:max-w-[1400px] relative"><aside><div><div><svg viewBox="0 0 686 250" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"><style>.st0{fill:#F68E1D;}
            .st1{fill:currentColor;}
            .st2{fill:currentColor;opacity:0.9;}</style><path class="st0" d="M109.5,196.1h66.7c17.5,0,31.6-14.2,31.6-31.6V97.8c0-17.5-14.2-31.6-31.6-31.6h-66.7
            c-17.5,0-31.6,14.2-31.6,31.6v66.7C77.9,182,92,196.1,109.5,196.1z"></path><g><path class="st1" d="M233.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L251,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H233.9z M273.1,87.7h8.8l-7.8,9.2h-3L273.1,87.7z"></path><path class="st1" d="M358.3,135.2c0-1.5-0.6-2.7-1.8-3.7c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H378v0.9c-2.9,0.3-4.9,0.9-6.1,1.8
              c-1.2,0.9-1.8,2.1-1.8,3.7v32.9c0,1.5,0.6,2.7,1.8,3.7c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-29v-0.9c3.5-0.3,5.9-0.9,7.2-1.8
              c1.3-0.9,2-2.1,2-3.7v-11.1c-1.5,2.9-3.7,5.2-6.7,6.7c-2.9,1.6-6.8,2.3-11.5,2.3c-4.5,0-8.7-0.7-12.3-2.2c-3.7-1.5-6.8-3.6-9.4-6.4
              c-2.6-2.8-4.6-6.2-6-10.2c-1.4-4-2.1-8.6-2.1-13.6c0-5.1,0.7-9.6,2.2-13.7c1.5-4.1,3.7-7.5,6.6-10.4c2.9-2.9,6.5-5.1,10.9-6.7
              c4.4-1.6,9.4-2.3,15.1-2.3c3.8,0,7.5,0.3,11.2,1c3.7,0.7,7.2,1.7,10.6,3v15.6h-1.3c-1.1-2.5-2.3-4.8-3.7-6.8c-1.4-2-3-3.8-4.7-5.3
              c-1.8-1.5-3.7-2.6-5.9-3.4c-2.2-0.8-4.6-1.2-7.3-1.2c-3.6,0-6.8,0.7-9.5,2.1c-2.7,1.4-4.9,3.4-6.7,6c-1.8,2.6-3.2,5.7-4,9.3
              c-0.9,3.6-1.3,7.7-1.3,12.2c0,9.2,1.8,16.2,5.5,20.8c3.7,4.7,8.6,7,14.6,7c4.8,0,8.5-1.6,11.3-4.8c2.7-3.2,4.2-8.5,4.5-15.8V135.2z
              "></path><path class="st1" d="M480.2,101.4c12.3,0,21.4,1.4,27.3,4.3c5.8,2.9,8.8,6.9,8.8,12.1c0,3.8-1.6,7.1-4.7,9.7
              c-3.2,2.6-8,4.5-14.7,5.6l19,25.9c0.9,1.3,2.2,2.4,3.8,3.5c1.6,1,3.8,1.7,6.7,2v0.9h-27.7v-0.9c2.9-0.3,4.5-1,4.8-2
              c0.3-1,0-2.2-0.9-3.5l-17.9-24.8c-0.7,0.1-1.4,0.1-2.1,0.1c-0.8,0-1.5,0-2.3,0h-7.1V159c0,1.5,0.6,2.7,1.8,3.7
              c1.2,0.9,3.3,1.5,6.1,1.8v0.9h-27.7v-0.9c2.9-0.3,4.9-0.9,6.1-1.8c1.2-0.9,1.8-2.1,1.8-3.7v-51.2c0-1.5-0.6-2.7-1.8-3.7
              c-1.2-0.9-3.3-1.5-6.1-1.8v-0.9H480.2z M480.2,131.6c8.2,0,14.3-1.2,18.1-3.5c3.8-2.3,5.7-5.7,5.7-10.2c0-4.5-1.9-7.9-5.7-10.2
              c-3.8-2.3-9.8-3.5-18.1-3.5h-7.1v27.5H480.2z"></path><path class="st1" d="M528.9,165.4v-0.9c3.6-0.3,6.4-1.1,8.4-2.4c2-1.3,3.5-3.2,4.7-5.8l24.2-54.9h3.8l28.5,57.6
              c0.7,1.4,1.7,2.6,3.2,3.6c1.4,1,3.6,1.6,6.4,1.9v0.9h-27.7v-0.9c2.9-0.3,4.7-0.9,5.4-1.9c0.8-1,0.8-2.2,0.1-3.6l-21.5-44.6
              L546,156.3c-1.1,2.6-0.9,4.5,0.5,5.8c1.4,1.3,3.9,2.1,7.6,2.4v0.9H528.9z"></path><path class="st1" d="M445.1,120c-1.5-4-3.7-7.5-6.5-10.3c-2.8-2.9-6.2-5.1-10.1-6.6c-4-1.6-8.4-2.3-13.4-2.3
              c-4.9,0-9.3,0.8-13.3,2.3c-4,1.6-7.4,3.8-10.2,6.6c-2.8,2.9-5,6.3-6.5,10.3c-1.5,4-2.3,8.5-2.3,13.5s0.8,9.4,2.3,13.5
              c1.5,4,3.7,7.5,6.5,10.3c2.8,2.9,6.2,5.1,10.2,6.6c4,1.6,8.4,2.3,13.3,2.3c5,0,9.4-0.8,13.4-2.3c3.9-1.6,7.3-3.8,10.1-6.6
              c2.8-2.9,5-6.3,6.5-10.3c1.5-4,2.3-8.5,2.3-13.5S446.6,124,445.1,120z M415,163.4c-12.4,0-20.9-13.4-20.9-30s8.2-30,20.9-30
              c13,0,20.9,13.4,20.9,30S428,163.4,415,163.4z"></path></g><path d="M144.2,133.4h-2.9v0.1C142.3,133.5,143.3,133.5,144.2,133.4z"></path><polygon class="st2" points="143.9,97.2 101,109.3 101,113.8 186.8,113.8 186.8,109.3 "></polygon><polygon class="st2" points="104.4,115.4 106,117.6 181.2,117.6 182.6,115.4 "></polygon><path class="st2" d="M125,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L125,120.4z M111.2,157h-2.6
            v-29.2h2.6V157z M117.1,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M185.3,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L185.3,120.4z M171.4,157h-2.6
            v-29.2h2.6V157z M177.3,157h-2.6v-29.2h2.6V157z"></path><path class="st2" d="M155.2,120.4h-11.8h-0.8h-11.8l-1.5,1.8l6.4,4.6h0.1v34.7h14.6v-34.7h0.1l6.4-4.6L155.2,120.4z M141.3,157h-2.6
            v-29.2h2.6V157z M147.2,157h-2.6v-29.2h2.6V157z"></path><path class="st1" d="M284.4,150.2h-2.6v0.1C282.7,150.3,283.6,150.3,284.4,150.2z"></path></svg></div> <button class="p-2 rounded-lg hover:bg-muted transition-colors text-muted-foreground hover:text-primary flex-shrink-0"><!></button></div> <nav class="flex-1 space-y-2"><!> <a href="/messages"><div><!> <!></div> <!></a> <a href="/notifications"><div><!> <!></div> <!></a> <a href="/wallet"><div><!> <!></div> <!></a> <!> <a href="/packs"><!> <!></a> <!> <a href="/trades"><!> <!></a> <a href="/marketplace"><!> <!></a> <button><!></button></nav> <div class="mt-auto pt-4 border-t border-border"><!></div></aside> <div><div><main class="flex-1 pb-20 lg:pb-0 bg-background max-w-screen overflow-y-auto"><!> <!> <!></main></div> <!></div></div> <!> <!></div>`);function co(E,k){Je(k,!0);const A=()=>jt(sr,"$page",H),m=()=>jt(Xt,"$t",H),[H,D]=Gt();$r("ndk",p);const B=p.$wallet,b=lr(p);let s=Ie(!1);const v=T(()=>A().url.pathname),f=T(()=>Tt.mode==="article"||Tt.mode==="profile"||Tt.mode==="reads"||e(v).startsWith("/note/")||e(v).startsWith("/messages/")||e(v).startsWith("/packs")||e(v).startsWith("/agora/invites")),y=T(()=>Tt.mode==="article"),d=T(()=>qt(I.selectedRelay,I.relays.filter(a=>a.enabled&&a.read).map(a=>a.url))),z=T(()=>!e(f)&&!Ct.rightSidebar?p.$subscribe(()=>({filters:[{kinds:[nr.Article],limit:5}],bufferMs:500,relayUrls:e(d).length>0?e(d):void 0,cacheUsage:e(d).length>0?mt.ONLY_RELAY:mt.CACHE_FIRST,closeOnEose:!0})):null),$=T(()=>e(z)?e(z).events.map(a=>jr.from(a)).filter(a=>a.title&&a.content).sort((a,i)=>(i.published_at??i.created_at??0)-(a.published_at??a.created_at??0)).slice(0,5):[]);at(()=>{e(y)&&ue(s,!0)}),at(()=>{p.$currentUser||dt.stop()}),at(()=>(p.$currentUser?Jt.start():Jt.stop(),()=>{Jt.stop()}));var O=lo(),re=r(O),K=r(re),V=r(K),fe=r(V),pe=n(fe,2);pe.__click=()=>ue(s,!e(s));var Ae=r(pe);{var be=a=>{P(a,{name:"chevron-right",size:"md"})},U=a=>{P(a,{name:"chevron-left",size:"md"})};l(Ae,a=>{e(s)?a(be):a(U,!1)})}t(pe),t(V);var L=n(V,2),ae=r(L);{let a=T(()=>e(v)==="/");Lr(ae,{get active(){return e(a)},get collapsed(){return e(s)}})}var Ce=n(ae,2),Me=r(Ce),xe=r(Me);P(xe,{name:"message",size:"lg"});var J=n(xe,2);{var ve=a=>{var i=Ca(),w=r(i,!0);t(i),h(N=>M(w,N),[()=>m()("navigation.messages")]),o(a,i)};l(J,a=>{e(s)||a(ve)})}t(Me);var ge=n(Me,2);{var ze=a=>{var i=S(),w=g(i);{var N=u=>{ft(u,{size:"xs",class:"absolute top-1.5 right-1.5",children:(x,R)=>{vt();var C=St();h(()=>M(C,dt.totalUnreadCount>9?"9+":dt.totalUnreadCount)),o(x,C)},$$slots:{default:!0}})},Z=u=>{ft(u,{size:"sm",children:(x,R)=>{vt();var C=St();h(()=>M(C,dt.totalUnreadCount>99?"99+":dt.totalUnreadCount)),o(x,C)},$$slots:{default:!0}})};l(w,u=>{e(s)?u(N):u(Z,!1)})}o(a,i)};l(ge,a=>{dt.totalUnreadCount>0&&a(ze)})}t(Ce);var me=n(Ce,2),Le=r(me),Ge=r(Le);P(Ge,{name:"bell",size:"lg"});var Mt=n(Ge,2);{var We=a=>{var i=Ma();o(a,i)};l(Mt,a=>{e(s)||a(We)})}t(Le);var zt=n(Le,2);{var Re=a=>{var i=S(),w=g(i);{var N=u=>{ft(u,{size:"xs",class:"absolute top-1.5 right-1.5",children:(x,R)=>{vt();var C=St();h(()=>M(C,b.counts.all>9?"9+":b.counts.all)),o(x,C)},$$slots:{default:!0}})},Z=u=>{ft(u,{size:"sm",children:(x,R)=>{vt();var C=St();h(()=>M(C,b.counts.all>99?"99+":b.counts.all)),o(x,C)},$$slots:{default:!0}})};l(w,u=>{e(s)?u(N):u(Z,!1)})}o(a,i)};l(zt,a=>{b.counts.all>0&&a(Re)})}t(me);var Fe=n(me,2),Xe=r(Fe),ht=r(Xe);P(ht,{name:"wallet",size:"lg"});var qe=n(ht,2);{var _t=a=>{var i=za();o(a,i)};l(qe,a=>{e(s)||a(_t)})}t(Xe);var _=n(Xe,2);{var X=a=>{var i=$a(),w=r(i,!0);t(i),h(N=>M(w,N),[()=>Wr(B.balance)]),o(a,i)};l(_,a=>{!e(s)&&B.balance>0&&a(X)})}t(Fe);var $e=n(Fe,2);{var De=a=>{var i=Ua(),w=r(i);P(w,{name:"users",size:"lg"});var N=n(w,2);{var Z=u=>{var x=Na();o(u,x)};l(N,u=>{e(s)||u(Z)})}t(i),h(u=>{F(i,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${u??""}`),te(i,"title",e(s)?"Community Invites":void 0)},[()=>e(v).startsWith("/agora/invites")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),o(a,i)};l($e,a=>{I.selectedRelay&&Ur(I.selectedRelay)&&a(De)})}var q=n($e,2),se=r(q);P(se,{name:"packs",size:"lg"});var He=n(se,2);{var Oe=a=>{var i=ja(),w=r(i,!0);t(i),h(N=>M(w,N),[()=>m()("navigation.followPacks")]),o(a,i)};l(He,a=>{e(s)||a(Oe)})}t(q);var ye=n(q,2);{var Ne=a=>{var i=La(),w=r(i),N=r(w);P(N,{name:"relay",size:"lg"});var Z=n(N,2);{var u=C=>{var Q=Pa();o(C,Q)};l(Z,C=>{e(s)||C(u)})}t(w);var x=n(w,2);{var R=C=>{ft(C,{variant:"secondary",size:"sm",class:"gap-1",children:(Q,ee)=>{var de=Aa(),je=g(de);P(je,{name:"trending",size:"xs"});var G=n(je);h(()=>M(G,` ${Yt.relays.length??""}`)),o(Q,de)},$$slots:{default:!0}})};l(x,C=>{e(s)||C(R)})}t(i),h(C=>{F(i,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${C??""}`),te(i,"title",e(s)?"Relay Feeds":void 0),F(w,1,`flex items-center ${e(s)?"":"gap-3"}`)},[()=>e(v).startsWith("/relay-feeds")?"text-primary bg-primary/10":"text-foreground hover:bg-muted"]),o(a,i)};l(ye,a=>{Yt&&Yt.relays.length>0&&a(Ne)})}var ke=n(ye,2),Se=r(ke);P(Se,{name:"trades",size:"lg"});var Ye=n(Se,2);{var st=a=>{var i=Ra(),w=r(i,!0);t(i),h(N=>M(w,N),[()=>m()("navigation.trades")]),o(a,i)};l(Ye,a=>{e(s)||a(st)})}t(ke);var Qe=n(ke,2),Pt=r(Qe);P(Pt,{name:"marketplace",size:"lg"});var bt=n(Pt,2);{var It=a=>{var i=Sa(),w=r(i,!0);t(i),h(N=>M(w,N),[()=>m()("navigation.marketplace")]),o(a,i)};l(bt,a=>{e(s)||a(It)})}t(Qe);var nt=n(Qe,2);nt.__click=()=>{e(v)==="/marketplace"?tr.open():e(v)==="/trades"?Rr.open():e(v).startsWith("/packs")?Pr.open():e(v)==="/agora/invites"?rr.open():e(v)==="/"&&Et.selected==="images"?ir.open():ot("/compose")};var Wt=r(nt);{var xt=a=>{var i=Ea(),w=g(i);P(w,{name:"plus",size:"md"});var N=n(w,2);{var Z=u=>{var x=Ta(),R=r(x,!0);t(x),h(C=>M(R,C),[()=>m()("classifieds.createListing")]),o(u,x)};l(N,u=>{e(s)||u(Z)})}o(a,i)},At=a=>{var i=S(),w=g(i);{var N=u=>{var x=Ba(),R=g(x);P(R,{name:"plus",size:"md"});var C=n(R,2);{var Q=ee=>{var de=Ha();o(ee,de)};l(C,ee=>{e(s)||ee(Q)})}o(u,x)},Z=u=>{var x=S(),R=g(x);{var C=ee=>{var de=Ia(),je=g(de);P(je,{name:"plus",size:"md"});var G=n(je,2);{var ne=W=>{var ie=Va();o(W,ie)};l(G,W=>{e(s)||W(ne)})}o(ee,de)},Q=ee=>{var de=S(),je=g(de);{var G=W=>{var ie=Fa(),we=g(ie);P(we,{name:"invite",size:"md"});var Te=n(we,2);{var Y=j=>{var oe=Wa();o(j,oe)};l(Te,j=>{e(s)||j(Y)})}o(W,ie)},ne=W=>{var ie=S(),we=g(ie);{var Te=j=>{var oe=Oa(),he=g(oe);P(he,{name:"image",size:"md"});var Pe=n(he,2);{var le=_e=>{var Ee=Da();o(_e,Ee)};l(Pe,_e=>{e(s)||_e(le)})}o(j,oe)},Y=j=>{var oe=Ka(),he=g(oe);P(he,{name:"edit",size:"md"});var Pe=n(he,2);{var le=_e=>{var Ee=Ya(),pr=r(Ee,!0);t(Ee),h(mr=>M(pr,mr),[()=>m()("navigation.compose")]),o(_e,Ee)};l(Pe,_e=>{e(s)||_e(le)})}o(j,oe)};l(we,j=>{e(v)==="/"&&Et.selected==="images"?j(Te):j(Y,!1)},!0)}o(W,ie)};l(je,W=>{e(v)==="/agora/invites"?W(G):W(ne,!1)},!0)}o(ee,de)};l(R,ee=>{e(v).startsWith("/packs")?ee(C):ee(Q,!1)},!0)}o(u,x)};l(w,u=>{e(v)==="/trades"?u(N):u(Z,!1)},!0)}o(a,i)};l(Wt,a=>{e(v)==="/marketplace"?a(xt):a(At,!1)})}t(nt),t(L);var $t=n(L,2),Ft=r($t);{var Nt=a=>{ta(a,{get collapsed(){return e(s)}})},Lt=a=>{{let i=T(()=>e(s)?"p-3":"gap-2 px-4 py-3");Kr(a,{get class(){return`w-full flex items-center justify-center ${e(i)??""} bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full transition-colors`}})}};l(Ft,a=>{p.$currentUser?a(Nt):a(Lt,!1)})}t($t),t(K);var yt=n(K,2),kt=r(yt),Ue=r(kt),Be=r(Ue);{var et=a=>{var i=Xa(),w=r(i),N=r(w),Z=r(N);{var u=G=>{const ne=T(()=>ce.headerConfig.backNav);var W=S(),ie=g(W);{var we=Y=>{var j=Ja(),oe=r(j);P(oe,{name:"arrow-left",size:"lg"}),t(j),h(()=>te(j,"href",e(ne).href)),o(Y,j)},Te=Y=>{var j=S(),oe=g(j);{var he=Pe=>{var le=Za();le.__click=function(...Ee){e(ne).onclick?.apply(this,Ee)};var _e=r(le);P(_e,{name:"arrow-left",size:"lg"}),t(le),o(Pe,le)};l(oe,Pe=>{e(ne).onclick&&Pe(he)},!0)}o(Y,j)};l(ie,Y=>{e(ne).href?Y(we):Y(Te,!1)})}o(G,W)};l(Z,G=>{ce.headerConfig.backNav&&G(u)})}var x=n(Z,2),R=r(x),C=r(R,!0);t(R);var Q=n(R,2);{var ee=G=>{var ne=Ga(),W=r(ne,!0);t(ne),h(()=>M(W,ce.headerConfig.subtitle)),o(G,ne)};l(Q,G=>{ce.headerConfig.subtitle&&G(ee)})}t(x);var de=n(x,2);{var je=G=>{var ne=S(),W=g(ne);ut(W,()=>ce.headerConfig.actions),o(G,ne)};l(de,G=>{ce.headerConfig.actions&&G(je)})}t(N),t(w),t(i),h(()=>M(C,ce.headerConfig.title)),o(a,i)},tt=a=>{var i=S(),w=g(i);{var N=u=>{var x=S(),R=g(x);ut(R,()=>ce.header),o(u,x)},Z=u=>{var x=S(),R=g(x);{var C=Q=>{var ee=ro(),de=r(ee),je=r(de);{var G=W=>{var ie=Qa(),we=r(ie);P(we,{name:"arrow-left",size:"lg"});var Te=n(we,2);{var Y=j=>{var oe=qa(),he=r(oe,!0);t(oe),h(()=>M(he,ce.backNav.label)),o(j,oe)};l(Te,j=>{ce.backNav.label&&j(Y)})}t(ie),h(()=>te(ie,"href",ce.backNav.href)),o(W,ie)},ne=W=>{var ie=S(),we=g(ie);{var Te=Y=>{var j=to();j.__click=function(...le){ce.backNav.onclick?.apply(this,le)};var oe=r(j);P(oe,{name:"arrow-left",size:"lg"});var he=n(oe,2);{var Pe=le=>{var _e=eo(),Ee=r(_e,!0);t(_e),h(()=>M(Ee,ce.backNav.label)),o(le,_e)};l(he,le=>{ce.backNav.label&&le(Pe)})}t(j),o(Y,j)};l(we,Y=>{ce.backNav.onclick&&Y(Te)},!0)}o(W,ie)};l(je,W=>{ce.backNav.href?W(G):W(ne,!1)})}t(de),t(ee),o(Q,ee)};l(R,Q=>{ce.backNav&&Q(C)},!0)}o(u,x)};l(w,u=>{ce.header?u(N):u(Z,!1)},!0)}o(a,i)};l(Be,a=>{ce.headerConfig?a(et):a(tt,!1)})}var rt=n(Be,2);{var Ve=a=>{var i=ao(),w=r(i);ut(w,()=>Ct.rightSidebar),t(i),o(a,i)};l(rt,a=>{Ct.showOnMobile&&Ct.rightSidebar&&!e(f)&&a(Ve)})}var it=n(rt,2);ut(it,()=>k.children),t(Ue),t(kt);var lt=n(kt,2);{var ct=a=>{var i=io(),w=r(i),N=r(w);{var Z=x=>{var R=S(),C=g(R);ut(C,()=>Ct.rightSidebar),o(x,R)},u=x=>{var R=no(),C=g(R);la(C,{});var Q=n(C,2),ee=r(Q),de=n(r(ee),2),je=r(de,!0);t(de),t(ee);var G=n(ee,2),ne=r(G);{var W=Y=>{var j=oo();vt(4),o(Y,j)},ie=Y=>{var j=S(),oe=g(j);Vt(oe,17,()=>e($),he=>he.id,(he,Pe)=>{var le=so(),_e=r(le,!0);t(le),h(Ee=>{te(le,"href",Ee),M(_e,e(Pe).title)},[()=>Sr(e(Pe),e(Pe).author)]),o(he,le)}),o(Y,j)};l(ne,Y=>{e($).length===0?Y(W):Y(ie,!1)})}t(G),t(Q);var we=n(Q,2);pa(we,{});var Te=n(we,2);na(Te,{}),vt(2),h(Y=>M(je,Y),[()=>m()("feed.mediaTypes.articles")]),o(x,R)};l(N,x=>{Ct.rightSidebar?x(Z):x(u,!1)})}t(w),t(i),o(a,i)};l(lt,a=>{e(f)||a(ct)})}t(yt),t(re);var wt=n(re,2);ka(wt,{});var Ut=n(wt,2);{var ur=a=>{Zt(a,{isHomePage:!0})},fr=a=>{var i=S(),w=g(i);{var N=u=>{Zt(u,{onclick:()=>tr.open()})},Z=u=>{var x=S(),R=g(x);{var C=Q=>{Zt(Q,{onclick:()=>rr.open()})};l(R,Q=>{e(v)==="/agora/invites"&&Q(C)},!0)}o(u,x)};l(w,u=>{e(v)==="/marketplace"?u(N):u(Z,!1)},!0)}o(a,i)};l(Ut,a=>{e(v)==="/"?a(ur):a(fr,!1)})}t(O),h((a,i,w,N,Z,u,x,R,C)=>{F(K,1,`hidden lg:flex ${e(s)?"w-20":"w-64"} flex-col border-r border-border p-4 fixed left-0 top-0 bottom-0 overflow-y-auto overflow-x-visible transition-all duration-300 ease-in-out bg-background`),F(V,1,`mb-6 flex items-center ${e(s)?"justify-center":"justify-between"} gap-2`),F(fe,1,`px-2 ${e(s)?"hidden":"flex-1"} transition-opacity duration-300 text-foreground`),te(pe,"aria-label",e(s)?"Expand sidebar":"Collapse sidebar"),F(Ce,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${a??""} relative`),te(Ce,"title",i),F(Me,1,`flex items-center ${e(s)?"":"gap-3"}`),F(me,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${w??""} relative`),te(me,"title",e(s)?"Notifications":void 0),F(Le,1,`flex items-center ${e(s)?"":"gap-3"}`),F(Fe,1,`flex items-center ${e(s)?"justify-center p-3":"justify-between px-4 py-3"} rounded-lg transition-colors ${N??""}`),te(Fe,"title",e(s)?"Wallet":void 0),F(Xe,1,`flex items-center ${e(s)?"":"gap-3"}`),F(q,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${Z??""}`),te(q,"title",u),F(ke,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(v)==="/trades"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),te(ke,"title",x),F(Qe,1,`flex items-center ${e(s)?"justify-center p-3":"gap-3 px-4 py-3"} rounded-lg transition-colors ${e(v)==="/marketplace"?"text-primary bg-primary/10":"text-foreground hover:bg-muted"}`),te(Qe,"title",R),F(nt,1,`w-full flex items-center justify-center ${e(s)?"p-3":"gap-2 px-6 py-3"} bg-primary hover:bg-primary/90 text-foreground font-semibold rounded-full transition-colors mt-4`),te(nt,"title",C),F(yt,1,`flex-1 flex ${e(s)?"lg:ml-20":"lg:ml-64"} transition-all duration-300 ease-in-out h-full`),F(kt,1,`w-full lg:flex-1 ${e(f)?"lg:max-w-[900px]":"lg:max-w-[600px]"} min-w-0 flex flex-col h-full border-x border-border`)},[()=>e(v).startsWith("/messages")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s)?m()("navigation.messages"):void 0,()=>e(v).startsWith("/notifications")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(v).startsWith("/wallet")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(v).startsWith("/packs")?"text-primary bg-primary/10":"text-foreground hover:bg-muted",()=>e(s)?m()("navigation.followPacks"):void 0,()=>e(s)?m()("navigation.trades"):void 0,()=>e(s)?m()("navigation.marketplace"):void 0,()=>e(s)?e(v)==="/marketplace"?m()("classifieds.createListing"):e(v)==="/trades"?"Create Trade":e(v).startsWith("/packs")?"Create Pack":e(v)==="/agora/invites"?"Create Invite":e(v)==="/"&&Et.selected==="images"?"Create media post":m()("navigation.compose"):void 0]),o(E,O),Ze(),D()}gt(["click"]);function Io(E,k){co(E,{children:(A,m)=>{var H=S(),D=g(H);ut(D,()=>k.children),o(A,H)},$$slots:{default:!0}})}export{Io as component};
