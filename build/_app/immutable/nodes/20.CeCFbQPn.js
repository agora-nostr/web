import{d as Xe,f as E,s as F,a as b,i as We,c as Ge,t as et,j as or}from"../chunks/rzUyzf2y.js";import{p as ze,e as s,d,r as n,y as Ie,t as X,c as Ke,f as Pe,b as pe,x as Qe,g as a,a as Me,aY as Nt,s as y,u as dt,aL as hr}from"../chunks/AsQG98fS.js";import{i as U}from"../chunks/DZKExFZC.js";import{e as Oe,i as Ve}from"../chunks/Cztbr3Ea.js";import{c as tt}from"../chunks/Dt3q2Svx.js";import{r as qe,g as xt,a as Fe,b as mr,c as st,i as Dt,h as Pt,s as gr}from"../chunks/CS0aOiUg.js";import{a as sr,s as ir}from"../chunks/DfBYFC16.js";import{$ as lr}from"../chunks/DrbR318x.js";import{b as ft,c as Ut}from"../chunks/DF8Bk5Sh.js";import{s as Le,n as He,N as xr,H as Mt,J as Lt,f as dr,y as ur,U as br,Q as pt}from"../chunks/tv6-RHC_.js";import{u as _r}from"../chunks/DHRuQT7d.js";import{t as ot}from"../chunks/D7cSTCXZ.js";import{U as Ht}from"../chunks/DdUskozk.js";import{p as gt}from"../chunks/w-gpJwMz.js";import{M as yr,D as wr,a as kr,R as Er,b as Sr,d as Ar,e as Ir}from"../chunks/CVV5LOp_.js";import{D as Br}from"../chunks/D1QSAoU9.js";import{D as Tr,a as Mr}from"../chunks/CKdpi0zW.js";import{B as ct,I as Ot}from"../chunks/DMKx7da8.js";import{n as Ct}from"../chunks/DuSJKUU_.js";var Cr=We('<svg class="w-4 h-4 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>'),Rr=We('<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>'),Nr=We('<svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg>'),Lr=We('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),Fr=E('<span class="text-xs bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-400 px-2 py-0.5 rounded-full">Connected</span>'),Dr=E('<span class="text-xs bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-400 px-2 py-0.5 rounded-full">Offline</span>'),Pr=E('<span class="text-xs bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-400 px-2 py-0.5 rounded-full">Testing...</span>'),Ur=E('<div class="flex items-start gap-2"><span class="text-xs font-medium text-muted-foreground min-w-[60px]">Name:</span> <span class="text-sm font-semibold text-foreground"> </span></div>'),Hr=E('<div class="flex items-start gap-2"><span class="text-xs font-medium text-muted-foreground min-w-[60px]">About:</span> <span class="text-sm text-muted-foreground"> </span></div>'),Or=E('<div class="flex items-start gap-2"><span class="text-xs font-medium text-muted-foreground min-w-[60px]">Software:</span> <span class="text-sm text-muted-foreground"> </span></div>'),jr=E('<div class="flex items-start gap-2"><svg class="w-3 h-3 text-muted-foreground mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="text-sm text-muted-foreground"> </span></div>'),$r=E('<div class="flex items-start gap-2"><svg class="w-3 h-3 text-muted-foreground mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><span class="text-xs text-muted-foreground"> <!></span></div></div>'),Vr=E('<span class="text-xs bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-400 px-2 py-0.5 rounded-full">üí∞ Paid</span>'),zr=E('<span class="text-xs bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-400 px-2 py-0.5 rounded-full">üîê Auth Required</span>'),Kr=E('<span class="text-xs bg-neutral-100 dark:bg-muted text-muted-foreground px-2 py-0.5 rounded-full"> </span>'),Yr=E('<div class="mt-2 space-y-1"><!> <!> <!> <!> <!> <div class="flex flex-wrap gap-2 mt-2"><!> <!> <!></div></div>'),Gr=E('<div class="flex-1 min-w-0"><div class="flex flex-wrap items-center gap-2"><!> <span class="font-mono text-xs md:text-sm text-foreground break-all"> </span> <!> <!> <!></div> <!> <div class="flex items-center gap-4 mt-3"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-primary rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">Read</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-primary rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">Write</span></label></div></div>');function qr(m,l){ze(l,!0);let{info:u}=_r(l.relay.url);var v=Gr(),h=s(v),f=s(h);{var p=N=>{var j=Cr();b(N,j)},i=N=>{var j=Ge(),ve=Pe(j);{var ce=te=>{var W=Rr();b(te,W)},oe=te=>{var W=Ge(),fe=Pe(W);{var _e=L=>{var I=Nr();b(L,I)},Te=L=>{var I=Lr();b(L,I)};U(fe,L=>{u?.software?L(_e):L(Te,!1)},!0)}b(te,W)};U(ve,te=>{u?.limitation?.auth_required?te(ce):te(oe,!1)},!0)}b(N,j)};U(f,N=>{u?.limitation?.payment_required?N(p):N(i,!1)})}var g=d(f,2),_=s(g,!0);n(g);var T=d(g,2);{var C=N=>{var j=Fr();b(N,j)};U(T,N=>{l.status==="connected"&&N(C)})}var M=d(T,2);{var w=N=>{var j=Dr();b(N,j)};U(M,N=>{l.status==="disconnected"&&l.connectionStatus[l.relay.url]!==void 0&&N(w)})}var S=d(M,2);{var A=N=>{var j=Pr();b(N,j)};U(S,N=>{l.status==="testing"&&N(A)})}n(h);var P=d(h,2);{var G=N=>{var j=Yr(),ve=s(j);{var ce=O=>{var q=Ur(),se=d(s(q),2),xe=s(se,!0);n(se),n(q),X(()=>F(xe,u.name)),b(O,q)};U(ve,O=>{u.name&&O(ce)})}var oe=d(ve,2);{var te=O=>{var q=Hr(),se=d(s(q),2),xe=s(se,!0);n(se),n(q),X(()=>F(xe,u.description)),b(O,q)};U(oe,O=>{u.description&&O(te)})}var W=d(oe,2);{var fe=O=>{var q=Or(),se=d(s(q),2),xe=s(se);n(se),n(q),X(()=>F(xe,`${u.software??""}${u.version?` v${u.version}`:""}`)),b(O,q)};U(W,O=>{(u.software||u.version)&&O(fe)})}var _e=d(W,2);{var Te=O=>{var q=jr(),se=d(s(q),2),xe=s(se,!0);n(se),n(q),X(we=>F(xe,we),[()=>u.relay_countries.join(", ")]),b(O,q)};U(_e,O=>{u.relay_countries&&u.relay_countries.length>0&&O(Te)})}var L=d(_e,2);{var I=O=>{var q=$r(),se=d(s(q),2),xe=s(se),we=s(xe),Ce=d(we);{var ke=ee=>{var me=et("...");b(ee,me)};U(Ce,ee=>{u.supported_nips.length>5&&ee(ke)})}n(xe),n(se),n(q),X(ee=>F(we,`Supports ${u.supported_nips.length??""} NIPs: ${ee??""} `),[()=>u.supported_nips.slice(0,5).join(", ")]),b(O,q)};U(L,O=>{u.supported_nips&&u.supported_nips.length>0&&O(I)})}var z=d(L,2),re=s(z);{var K=O=>{var q=Vr();b(O,q)};U(re,O=>{u.limitation?.payment_required&&O(K)})}var Y=d(re,2);{var he=O=>{var q=zr();b(O,q)};U(Y,O=>{u.limitation?.auth_required&&O(he)})}var Se=d(Y,2);{var be=O=>{var q=Kr(),se=s(q);n(q),X(()=>F(se,`üìß ${u.contact??""}`)),b(O,q)};U(Se,O=>{u.contact&&O(be)})}n(z),n(j),b(N,j)};U(P,N=>{u&&N(G)})}var $=d(P,2),V=s($),Q=s(V);qe(Q),Q.__change=N=>Le.updateRelay(l.relay.url,{read:N.currentTarget.checked}),Ie(2),n(V);var B=d(V,2),R=s(B);qe(R),R.__change=N=>Le.updateRelay(l.relay.url,{write:N.currentTarget.checked}),Ie(2),n(B),n($),n(v),X(()=>{F(_,l.relay.url),xt(Q,l.relay.read),xt(R,l.relay.write)}),b(m,v),Ke()}Xe(["change"]);var Xr=We('<svg class="w-3 h-3 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Wr=E('<div><div class="flex flex-col md:flex-row md:items-start md:justify-between gap-3"><div class="flex-1"><div class="flex items-start md:items-center gap-3"><button><!></button> <!></div></div> <div class="flex items-center gap-2 ml-8 md:ml-0"><button class="p-1.5 md:p-2 hover:bg-neutral-100 dark:hover:bg-card rounded-lg transition-colors disabled:opacity-50" title="Test connection"><svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></button> <button class="p-1.5 md:p-2 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-lg transition-colors group" title="Remove relay"><svg class="w-4 h-4 text-muted-foreground group-hover:text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div>'),Jr=E('<div class="border-2 border-dashed border-primary-300 dark:border-primary-700 rounded-lg p-4"><div class="space-y-3"><input type="text" placeholder="wss://relay.example.com" class="w-full px-3 py-2 bg-card border border dark:border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"/> <div class="flex items-center gap-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-primary rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">Read</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-primary rounded focus:ring-orange-500"/> <span class="text-sm text-muted-foreground">Write</span></label></div> <div class="flex gap-2"><button class="px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Add Relay</button> <button class="px-4 py-2 bg-neutral-200 dark:bg-background text-muted-foreground rounded-lg hover:bg-neutral-300 dark:hover:bg-card transition-colors">Cancel</button></div></div></div>'),Zr=E('<button class="w-full border-2 border-dashed border rounded-lg p-4 hover:border-primary dark:hover:border-primary transition-colors group"><div class="flex items-center justify-center gap-2 text-muted-foreground group-hover:text-primary dark:group-hover:text-primary"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span class="font-medium">Add Relay</span></div></button>'),Qr=E('<div class="space-y-6"><div><h2 class="text-xl font-semibold text-foreground mb-2">Relay Configuration</h2> <p class="text-sm text-muted-foreground">Configure which Nostr relays your app connects to for reading and publishing events.</p></div> <div class="bg-card border rounded-lg p-4"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-primary flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <div class="flex-1"><h3 class="font-medium text-foreground mb-1">Relay Authentication</h3> <p class="text-sm text-muted-foreground mb-3">Control how to handle relays that require authentication</p> <div class="space-y-2"><label class="flex items-start gap-3 cursor-pointer group"><input type="radio" name="authMode" value="always" class="w-4 h-4 text-primary mt-0.5 focus:ring-2 focus:ring-primary"/> <div class="flex-1"><span class="text-sm font-medium text-foreground group-hover:text-primary transition-colors">Always authenticate</span> <p class="text-xs text-muted-foreground mt-0.5">Automatically authenticate to any relay that requests it</p></div></label> <label class="flex items-start gap-3 cursor-pointer group"><input type="radio" name="authMode" value="ask" class="w-4 h-4 text-primary mt-0.5 focus:ring-2 focus:ring-primary"/> <div class="flex-1"><span class="text-sm font-medium text-foreground group-hover:text-primary transition-colors">Ask each time</span> <p class="text-xs text-muted-foreground mt-0.5">Show a confirmation dialog before authenticating to relays</p></div></label></div></div></div></div> <div class="grid grid-cols-3 gap-2 md:gap-4"><div class="bg-neutral-50 dark:bg-background rounded-lg p-3 md:p-4"><div class="flex items-center gap-1 md:gap-2 text-green-600 dark:text-green-400 mb-1"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg> <span class="text-xs md:text-sm font-medium">Active</span></div> <div class="text-xl md:text-2xl font-bold text-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-background rounded-lg p-3 md:p-4"><div class="flex items-center gap-1 md:gap-2 text-blue-600 dark:text-blue-400 mb-1"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="text-xs md:text-sm font-medium">Read</span></div> <div class="text-xl md:text-2xl font-bold text-foreground"> </div></div> <div class="bg-neutral-50 dark:bg-background rounded-lg p-3 md:p-4"><div class="flex items-center gap-1 md:gap-2 text-primary dark:text-primary mb-1"><svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <span class="text-xs md:text-sm font-medium">Write</span></div> <div class="text-xl md:text-2xl font-bold text-foreground"> </div></div></div> <div class="space-y-2"><!> <!></div> <div class="bg-yellow-50 dark:bg-yellow-950/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"><div class="flex gap-3"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-yellow-800 dark:text-yellow-300"><p class="font-medium mb-1">Important</p> <p>Changes to relay configuration will take effect after refreshing the app.</p></div></div></div></div>');function ea(m,l){ze(l,!0);let u=pe(!1),v=pe(Qe({url:"",read:!0,write:!0})),h=pe(null),f=pe(Qe({}));function p(){if(a(v).url&&!Le.relays.some(I=>I.url===a(v).url)){const I=a(v).url.startsWith("wss://")||a(v).url.startsWith("ws://")?a(v).url:`wss://${a(v).url}`;Le.addRelay({...a(v),enabled:!0,url:I}),y(v,{url:"",read:!0,write:!0},!0),y(u,!1)}}async function i(I){y(h,I,!0),y(f,{...a(f),[I]:"testing"},!0),setTimeout(()=>{const z=Math.random()>.3;y(f,{...a(f),[I]:z?"connected":"disconnected"},!0),y(h,null)},1500)}function g(I){return a(h)===I?"testing":a(f)[I]||"disconnected"}let _=Me(()=>Le.relays);var T=Qr(),C=d(s(T),2),M=s(C),w=d(s(M),2),S=d(s(w),4),A=s(S),P=s(A);qe(P),P.__change=()=>Le.updateRelayAuth({mode:"always"}),Ie(2),n(A);var G=d(A,2),$=s(G);qe($),$.__change=()=>Le.updateRelayAuth({mode:"ask"}),Ie(2),n(G),n(S),n(w),n(M),n(C);var V=d(C,2),Q=s(V),B=d(s(Q),2),R=s(B,!0);n(B),n(Q);var N=d(Q,2),j=d(s(N),2),ve=s(j,!0);n(j),n(N);var ce=d(N,2),oe=d(s(ce),2),te=s(oe,!0);n(oe),n(ce),n(V);var W=d(V,2),fe=s(W);Oe(fe,17,()=>a(_),I=>I.url,(I,z)=>{const re=Me(()=>g(a(z).url));var K=Wr(),Y=s(K),he=s(Y),Se=s(he),be=s(Se);be.__click=()=>Le.toggleRelay(a(z).url);var O=s(be);{var q=ke=>{var ee=Xr();b(ke,ee)};U(O,ke=>{a(z).enabled&&ke(q)})}n(be);var se=d(be,2);qr(se,{get relay(){return a(z)},get status(){return a(re)},get connectionStatus(){return a(f)}}),n(Se),n(he);var xe=d(he,2),we=s(xe);we.__click=()=>i(a(z).url);var Ce=d(we,2);Ce.__click=()=>Le.removeRelay(a(z).url),n(xe),n(Y),n(K),X(()=>{Fe(K,1,`border rounded-lg p-4 transition-all ${a(z).enabled?"bg-card border":"bg-neutral-50 dark:bg-background border opacity-60"}`),Fe(be,1,`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 mt-0.5 md:mt-0 ${a(z).enabled?"bg-primary border-primary":"bg-card border dark:border"}`),we.disabled=a(h)===a(z).url}),b(I,K)});var _e=d(fe,2);{var Te=I=>{var z=Jr(),re=s(z),K=s(re);qe(K),Nt(K,!0);var Y=d(K,2),he=s(Y),Se=s(he);qe(Se),Ie(2),n(he);var be=d(he,2),O=s(be);qe(O),Ie(2),n(be),n(Y);var q=d(Y,2),se=s(q);se.__click=p;var xe=d(se,2);xe.__click=()=>{y(u,!1),y(v,{url:"",read:!0,write:!0},!0)},n(q),n(re),n(z),X(()=>se.disabled=!a(v).url),ft(K,()=>a(v).url,we=>a(v).url=we),Ut(Se,()=>a(v).read,we=>a(v).read=we),Ut(O,()=>a(v).write,we=>a(v).write=we),b(I,z)},L=I=>{var z=Zr();z.__click=()=>y(u,!0),b(I,z)};U(_e,I=>{a(u)?I(Te):I(L,!1)})}n(W),Ie(2),n(T),X((I,z,re)=>{xt(P,Le.relayAuth.mode==="always"),xt($,Le.relayAuth.mode==="ask"),F(R,I),F(ve,z),F(te,re)},[()=>a(_).filter(I=>I.enabled).length,()=>a(_).filter(I=>I.enabled&&I.read).length,()=>a(_).filter(I=>I.enabled&&I.write).length]),b(m,T),Ke()}Xe(["change","click"]);var ta=E('<button><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full flex-shrink-0"></div> <div class="flex flex-col items-start"><span class="font-medium text-foreground"> </span> <span class="text-xs text-muted-foreground"> </span></div></div></button>'),ra=E('<div class="space-y-6"><div><h2 class="text-lg font-semibold text-foreground mb-4"> </h2> <p class="text-sm text-muted-foreground mb-6"> </p></div> <div class="border-b border pb-6"><div class="flex items-center gap-3 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h3 class="text-base font-medium text-foreground"> </h3></div> <p class="text-sm text-muted-foreground mb-4"> </p> <div class="grid grid-cols-2 gap-3"><button><div class="flex items-center justify-center gap-2"><span class="text-lg">üá∫üá∏</span> <span class="font-medium">English</span></div></button> <button><div class="flex items-center justify-center gap-2"><span class="text-lg">üá™üá∏</span> <span class="font-medium">Espa√±ol</span></div></button> <button><div class="flex items-center justify-center gap-2"><span class="text-lg">üáÆüá∑</span> <span class="font-medium">ŸÅÿßÿ±ÿ≥€å</span></div></button> <button><div class="flex items-center justify-center gap-2"><span class="text-lg">üá∞üá≠</span> <span class="font-medium">·ûÅ·üí·ûò·üÇ·ûö</span></div></button> <button><div class="flex items-center justify-center gap-2"><span class="text-lg">üáøüáº</span> <span class="font-medium">Shona</span></div></button></div></div> <div class="border-b border pb-6"><div class="flex items-center gap-3 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg> <h3 class="text-base font-medium text-foreground"> </h3></div> <p class="text-sm text-muted-foreground mb-4"> </p> <div class="grid grid-cols-3 gap-3"><button><div class="flex flex-col items-center gap-2"><span class="text-2xl">‚òÄÔ∏è</span> <span class="text-sm font-medium"> </span></div></button> <button><div class="flex flex-col items-center gap-2"><span class="text-2xl">üåô</span> <span class="text-sm font-medium"> </span></div></button> <button><div class="flex flex-col items-center gap-2"><span class="text-2xl">üíª</span> <span class="text-sm font-medium"> </span></div></button></div></div> <div><div class="flex items-center gap-3 mb-4"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg> <h3 class="text-base font-medium text-foreground">Accent Color</h3></div> <p class="text-sm text-muted-foreground mb-4">Choose your preferred accent color</p> <div class="grid grid-cols-2 gap-3"></div></div></div>');function aa(m,l){ze(l,!0);const u=()=>sr(lr,"$t",v),[v,h]=ir();function f(ke){Le.setTheme(ke)}function p(ke){Le.setThemeColor(ke)}function i(ke){Le.setLanguage(ke)}const g=[{id:"orange",name:"Orange",hex:"#FF6B35",description:"Warm orange"},{id:"red",name:"Red",hex:"#E4104D",description:"Magenta / Raspberry red"},{id:"cyan",name:"Cyan",hex:"#00B7D3",description:"Bright cyan / Turquoise"},{id:"yellow",name:"Yellow",hex:"#FFD900",description:"Vivid yellow"},{id:"lime",name:"Lime",hex:"#97BF0D",description:"Lime green"}];var _=ra(),T=s(_),C=s(T),M=s(C,!0);n(C);var w=d(C,2),S=s(w,!0);n(w),n(T);var A=d(T,2),P=s(A),G=d(s(P),2),$=s(G,!0);n(G),n(P);var V=d(P,2),Q=s(V,!0);n(V);var B=d(V,2),R=s(B);R.__click=()=>i("en");var N=d(R,2);N.__click=()=>i("es");var j=d(N,2);j.__click=()=>i("fa");var ve=d(j,2);ve.__click=()=>i("km");var ce=d(ve,2);ce.__click=()=>i("sn"),n(B),n(A);var oe=d(A,2),te=s(oe),W=d(s(te),2),fe=s(W,!0);n(W),n(te);var _e=d(te,2),Te=s(_e,!0);n(_e);var L=d(_e,2),I=s(L);I.__click=()=>f("light");var z=s(I),re=d(s(z),2),K=s(re,!0);n(re),n(z),n(I);var Y=d(I,2);Y.__click=()=>f("dark");var he=s(Y),Se=d(s(he),2),be=s(Se,!0);n(Se),n(he),n(Y);var O=d(Y,2);O.__click=()=>f("system");var q=s(O),se=d(s(q),2),xe=s(se,!0);n(se),n(q),n(O),n(L),n(oe);var we=d(oe,2),Ce=d(s(we),4);Oe(Ce,21,()=>g,Ve,(ke,ee)=>{var me=ta();me.__click=()=>p(a(ee).id);var ie=s(me),J=s(ie),ge=d(J,2),ae=s(ge),D=s(ae,!0);n(ae);var H=d(ae,2),Z=s(H,!0);n(H),n(ge),n(ie),n(me),X(()=>{Fe(me,1,`px-4 py-3 rounded-lg transition-all ${Le.themeColor===a(ee).id?"bg-primary-50 dark:bg-primary-950/30":"bg-card hover:bg-accent"}`),mr(J,`background-color: ${a(ee).hex??""}`),F(D,a(ee).name),F(Z,a(ee).description)}),b(ke,me)}),n(Ce),n(we),n(_),X((ke,ee,me,ie,J,ge,ae,D,H)=>{F(M,ke),F(S,ee),F($,me),F(Q,ie),Fe(R,1,`px-4 py-3 rounded-lg transition-all ${Le.language==="en"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),Fe(N,1,`px-4 py-3 rounded-lg transition-all ${Le.language==="es"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),Fe(j,1,`px-4 py-3 rounded-lg transition-all ${Le.language==="fa"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),Fe(ve,1,`px-4 py-3 rounded-lg transition-all ${Le.language==="km"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),Fe(ce,1,`px-4 py-3 rounded-lg transition-all ${Le.language==="sn"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),F(fe,J),F(Te,ge),Fe(I,1,`px-4 py-3 rounded-lg transition-all ${Le.theme==="light"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),F(K,ae),Fe(Y,1,`px-4 py-3 rounded-lg transition-all ${Le.theme==="dark"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),F(be,D),Fe(O,1,`px-4 py-3 rounded-lg transition-all ${Le.theme==="system"?"bg-primary-50 dark:bg-primary-950/30 text-primary dark:text-primary":"bg-card text-muted-foreground hover:bg-accent"}`),F(xe,H)},[()=>u()("settings.sections.appearance.title"),()=>u()("settings.sections.appearance.description"),()=>u()("settings.sections.appearance.language"),()=>u()("settings.sections.appearance.languageDescription"),()=>u()("settings.sections.appearance.theme"),()=>u()("settings.sections.appearance.themeDescription"),()=>u()("settings.sections.appearance.themes.light"),()=>u()("settings.sections.appearance.themes.dark"),()=>u()("settings.sections.appearance.themes.system")]),b(m,_),Ke(),h()}Xe(["click"]);var na=E('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>Saving...</span>',1),oa=E("<span>Save Changes</span>"),sa=E('<div class="flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg"><div class="flex items-center space-x-2 text-sm text-orange-800 dark:text-orange-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span>You have unsaved changes</span></div> <div class="flex space-x-2"><button class="px-3 py-1.5 text-sm border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Discard</button> <button class="px-3 py-1.5 text-sm bg-primary hover:bg-accent-dark text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"><!></button></div></div>'),ia=E('<div class="flex items-center justify-center p-8"><svg class="animate-spin h-6 w-6 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),la=E('<span class="text-xs bg-primary-100 dark:bg-primary-900/50 text-primary dark:text-primary-300 px-2 py-0.5 rounded">Primary</span>'),da=E('<button class="text-red-500 hover:text-red-600 p-2" aria-label="Remove server"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>'),ua=E('<div class="flex items-center justify-between p-3 bg-neutral-50 dark:bg-background rounded-lg"><div class="flex items-center space-x-3"><div class="flex flex-col space-y-1"><button class="text-muted-foreground hover:text-muted-foreground dark:hover:text-muted-foreground disabled:opacity-30 disabled:cursor-not-allowed p-0.5" aria-label="Move up"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button class="text-muted-foreground hover:text-muted-foreground dark:hover:text-muted-foreground disabled:opacity-30 disabled:cursor-not-allowed p-0.5" aria-label="Move down"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <div><div class="flex items-center space-x-2"><span class="font-medium"> </span> <!></div> <a target="_blank" rel="noopener noreferrer" class="text-sm text-muted-foreground hover:text-primary dark:hover:text-primary flex items-center space-x-1"><span>Visit server</span> <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></div></div> <!></div>'),ca=E('<div class="space-y-2"></div>'),va=E('<div class="border border rounded-lg p-4"><label for="new-server" class="block text-sm font-medium mb-2">Add Blossom Server</label> <div class="flex space-x-2"><input id="new-server" type="text" placeholder="https://blossom.example.com" class="flex-1 px-3 py-2 bg-card border border dark:border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"/> <button class="px-4 py-2 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors">Add</button> <button class="p-2 text-muted-foreground hover:text-neutral-700 dark:hover:text-muted-foreground"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div>'),fa=E('<button class="flex items-center space-x-2 px-4 py-2 text-primary dark:text-primary hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span>Add Server</span></button>'),pa=E('<div class="flex items-center justify-between p-3 bg-neutral-50 dark:bg-background rounded-lg"><span class="text-sm"> </span> <button class="text-sm text-primary dark:text-primary hover:text-accent-dark dark:hover:text-primary-300">Add</button></div>'),ha=E('<p class="text-sm text-muted-foreground">All suggested servers have been added</p>'),ma=E('<div class="space-y-6"><div><h3 class="text-lg font-semibold mb-2">Blossom Media Servers</h3> <p class="text-sm text-muted-foreground mb-4">Configure your Blossom servers for uploading images and media. The first server is your primary upload destination, and additional servers are used as mirrors for redundancy.</p></div> <!> <div class="space-y-3"><label class="text-sm font-medium">Your Blossom Servers</label> <!></div> <!> <div class="border-t border pt-4"><label class="text-sm font-medium block mb-3">Suggested Servers</label> <p class="text-sm text-muted-foreground mb-3">Popular public Blossom servers you can add to your list</p> <div class="space-y-2"><!> <!></div></div></div>');function ga(m,l){ze(l,!0);const u=["https://blossom.primal.net","https://blossom.nostr.hu","https://blossom.oxtr.dev"];let v=pe(null),h=pe(Qe([])),f=pe(Qe([])),p=pe(""),i=pe(!1),g=pe(!0),_=pe(!1),T=Me(()=>{if(!a(v))return a(h).length>0&&a(f).length>0;const L=a(v).servers;return L.length!==a(f).length?!0:!L.every((I,z)=>I===a(f)[z])});dt(()=>{C()});async function C(){y(g,!0);try{const L=He.activeUser;if(!L){const re=localStorage.getItem("blossomServers");if(re)try{y(h,JSON.parse(re),!0),y(f,[...a(h)],!0)}catch{y(h,[u[0]],!0),y(f,[...a(h)],!0)}else y(h,[u[0]],!0),y(f,[...a(h)],!0);y(g,!1);return}const I={kinds:[xr.BlossomList],authors:[L.pubkey]},z=await He.fetchEvent(I);if(z)y(v,Mt.from(z),!0),y(h,a(v).servers,!0),y(f,[...a(h)],!0),localStorage.setItem("blossomServers",JSON.stringify(a(h)));else{y(v,new Mt(He),!0);const re=localStorage.getItem("blossomServers");if(re)try{y(h,JSON.parse(re),!0)}catch{y(h,[u[0]],!0)}else y(h,[u[0]],!0);y(f,[...a(h)],!0),a(v).servers=a(h)}}catch(L){console.error("Failed to load blossom list:",L),ot.error("Failed to load your Blossom servers");const I=localStorage.getItem("blossomServers");if(I)try{y(h,JSON.parse(I),!0),y(f,[...a(h)],!0)}catch{y(h,[u[0]],!0),y(f,[...a(h)],!0)}else y(h,[u[0]],!0),y(f,[...a(h)],!0)}finally{y(g,!1)}}async function M(){if(!(!a(T)||a(_))){y(_,!0);try{if(!He.activeUser){y(h,[...a(f)],!0),localStorage.setItem("blossomServers",JSON.stringify(a(h))),ot.success("Servers saved locally");return}a(v)||y(v,new Mt(He),!0),a(v).servers=a(f),await a(v).sign(),await a(v).publishReplaceable(),y(h,[...a(f)],!0),localStorage.setItem("blossomServers",JSON.stringify(a(h))),ot.success("Blossom servers saved to Nostr")}catch(L){console.error("Failed to save blossom list:",L),ot.error("Failed to save Blossom servers to Nostr")}finally{y(_,!1)}}}function w(){if(a(p).trim())try{const L=new URL(a(p).trim());if(!L.protocol.startsWith("http")){ot.error("Please enter a valid HTTP or HTTPS URL");return}const I=L.origin+L.pathname.replace(/\/$/,"");if(a(f).includes(I)){ot.error("This server is already in your list");return}y(f,[...a(f),I],!0),y(p,""),y(i,!1)}catch{ot.error("Please enter a valid URL")}}function S(L){if(a(f).length===1){ot.error("You must have at least one Blossom server");return}y(f,a(f).filter(I=>I!==L),!0)}function A(L){if(L===0)return;const I=[...a(f)];[I[L-1],I[L]]=[I[L],I[L-1]],y(f,I,!0)}function P(L){if(L===a(f).length-1)return;const I=[...a(f)];[I[L],I[L+1]]=[I[L+1],I[L]],y(f,I,!0)}function G(){y(f,[...a(h)],!0)}var $=ma(),V=d(s($),2);{var Q=L=>{var I=sa(),z=d(s(I),2),re=s(z);re.__click=G;var K=d(re,2);K.__click=M;var Y=s(K);{var he=be=>{var O=na();Ie(2),b(be,O)},Se=be=>{var O=oa();b(be,O)};U(Y,be=>{a(_)?be(he):be(Se,!1)})}n(K),n(z),n(I),X(()=>{re.disabled=a(_),K.disabled=a(_)}),b(L,I)};U(V,L=>{a(T)&&L(Q)})}var B=d(V,2),R=d(s(B),2);{var N=L=>{var I=ia();b(L,I)},j=L=>{var I=ca();Oe(I,22,()=>a(f),z=>z,(z,re,K)=>{var Y=ua(),he=s(Y),Se=s(he),be=s(Se);be.__click=()=>A(a(K));var O=d(be,2);O.__click=()=>P(a(K)),n(Se);var q=d(Se,2),se=s(q),xe=s(se),we=s(xe,!0);n(xe);var Ce=d(xe,2);{var ke=J=>{var ge=la();b(J,ge)};U(Ce,J=>{a(K)===0&&J(ke)})}n(se);var ee=d(se,2);n(q),n(he);var me=d(he,2);{var ie=J=>{var ge=da();ge.__click=()=>S(re),b(J,ge)};U(me,J=>{a(f).length>1&&J(ie)})}n(Y),X(()=>{be.disabled=a(K)===0,O.disabled=a(K)===a(f).length-1,F(we,re),st(ee,"href",re)}),b(z,Y)}),n(I),b(L,I)};U(R,L=>{a(g)?L(N):L(j,!1)})}n(B);var ve=d(B,2);{var ce=L=>{var I=va(),z=d(s(I),2),re=s(z);qe(re);var K=d(re,2);K.__click=w;var Y=d(K,2);Y.__click=()=>{y(i,!1),y(p,"")},n(z),n(I),or("keypress",re,he=>he.key==="Enter"&&w()),ft(re,()=>a(p),he=>y(p,he)),b(L,I)},oe=L=>{var I=fa();I.__click=()=>y(i,!0),b(L,I)};U(ve,L=>{a(i)?L(ce):L(oe,!1)})}var te=d(ve,2),W=d(s(te),4),fe=s(W);Oe(fe,17,()=>u.filter(L=>!a(f).includes(L)),Ve,(L,I)=>{var z=pa(),re=s(z),K=s(re,!0);n(re);var Y=d(re,2);Y.__click=()=>y(f,[...a(f),a(I)],!0),n(z),X(()=>F(K,a(I))),b(L,z)});var _e=d(fe,2);{var Te=L=>{var I=ha();b(L,I)};U(_e,L=>{u.every(I=>a(f).includes(I))&&L(Te)})}n(W),n(te),n($),b(m,$),Ke()}Xe(["click"]);var je=(m=>(m.NO_USER="NO_USER",m.NO_PRIVATE_KEY="NO_PRIVATE_KEY",m.INVALID_PASSPHRASE="INVALID_PASSPHRASE",m.INVALID_PUBKEY="INVALID_PUBKEY",m.DUPLICATE_TRUSTEE="DUPLICATE_TRUSTEE",m.MAX_TRUSTEES_EXCEEDED="MAX_TRUSTEES_EXCEEDED",m.ENCRYPTION_FAILED="ENCRYPTION_FAILED",m.DECRYPTION_FAILED="DECRYPTION_FAILED",m.KEY_DERIVATION_FAILED="KEY_DERIVATION_FAILED",m.SHAMIR_SPLIT_FAILED="SHAMIR_SPLIT_FAILED",m.SHAMIR_JOIN_FAILED="SHAMIR_JOIN_FAILED",m.EVENT_CREATION_FAILED="EVENT_CREATION_FAILED",m.EVENT_SIGNING_FAILED="EVENT_SIGNING_FAILED",m.EVENT_PUBLISHING_FAILED="EVENT_PUBLISHING_FAILED",m.METADATA_PUBLISHING_FAILED="METADATA_PUBLISHING_FAILED",m.METADATA_FETCH_FAILED="METADATA_FETCH_FAILED",m.SHARD_FETCH_FAILED="SHARD_FETCH_FAILED",m.INVALID_THRESHOLD="INVALID_THRESHOLD",m.INVALID_SHARD_COUNT="INVALID_SHARD_COUNT",m.INSUFFICIENT_SHARDS="INSUFFICIENT_SHARDS",m.UNKNOWN_ERROR="UNKNOWN_ERROR",m))(je||{});class $e extends Error{constructor(l,u,v){super(u),this.code=l,this.cause=v,this.name="BackupError",Error.captureStackTrace&&Error.captureStackTrace(this,$e)}static from(l,u,v){if(l instanceof $e)return l;const h=l instanceof Error?l.message:v;return new $e(u,h,l)}static is(l,u){return l instanceof $e&&l.code===u}getUserMessage(){return{NO_USER:"Please log in to create a backup",NO_PRIVATE_KEY:"Private key not found. Please log in with a private key.",INVALID_PASSPHRASE:"Passphrase does not meet security requirements",INVALID_PUBKEY:"Invalid public key format",DUPLICATE_TRUSTEE:"This person is already in your trustee list",MAX_TRUSTEES_EXCEEDED:"Maximum number of trustees reached",ENCRYPTION_FAILED:"Failed to encrypt data",DECRYPTION_FAILED:"Failed to decrypt data",KEY_DERIVATION_FAILED:"Failed to derive encryption key",SHAMIR_SPLIT_FAILED:"Failed to split secret into shards",SHAMIR_JOIN_FAILED:"Failed to reconstruct secret from shards",EVENT_CREATION_FAILED:"Failed to create event",EVENT_SIGNING_FAILED:"Failed to sign event",EVENT_PUBLISHING_FAILED:"Failed to publish event to relays",METADATA_PUBLISHING_FAILED:"Failed to publish backup metadata",METADATA_FETCH_FAILED:"Failed to fetch backup metadata",SHARD_FETCH_FAILED:"Failed to fetch shard",INVALID_THRESHOLD:"Invalid threshold value",INVALID_SHARD_COUNT:"Invalid shard count",INSUFFICIENT_SHARDS:"Not enough shards to reconstruct secret",UNKNOWN_ERROR:"An unknown error occurred"}[this.code]||this.message}}async function it(m,l,u){try{return await m()}catch(v){throw $e.from(v,l,u)}}var ht={},bt={},Ze={},jt;function ut(){if(jt)return Ze;jt=1,Object.defineProperty(Ze,"__esModule",{value:!0});const m=29;Ze.PRIMITIVE_POLYNOMIAL=m;const l=128;Ze.BIT_PADDING=l;const u=8;Ze.BIT_COUNT=u;const v=2**u;Ze.BIT_SIZE=v;const h=2;Ze.BYTES_PER_CHARACTER=h;const f=6;Ze.MAX_BYTES_PER_CHARACTER=f;const p=v-1;Ze.MAX_SHARES=p;const i="utf8";Ze.UTF8_ENCODING=i;const g="binary";Ze.BIN_ENCODING=g;const _="hex";return Ze.HEX_ENCODING=_,Ze}var _t={},vt={},$t;function Ft(){if($t)return vt;$t=1,Object.defineProperty(vt,"__esModule",{value:!0});const m=ut(),l=new Array(4*m.BIT_SIZE).join("0");vt.zeroes=l;const u=new Array(m.BIT_SIZE).fill(0);vt.logs=u;const v=new Array(m.BIT_SIZE).fill(0);vt.exps=v;for(let h=0,f=1;h<m.BIT_SIZE;++h)v[h]=f,u[f]=h,f=f<<1,f>=m.BIT_SIZE&&(f=f^m.PRIMITIVE_POLYNOMIAL,f=f&m.MAX_SHARES);return vt}var Vt;function xa(){if(Vt)return _t;Vt=1,Object.defineProperty(_t,"__esModule",{value:!0});const m=Ft(),l=ut();function u(v,h){const f=l.MAX_SHARES;let p=0,i=0;for(let g=0;g<h[0].length;++g)if(h[1][g]){p=m.logs[h[1][g]];for(let _=0;_<h[0].length;++_)if(g!==_){if(v===h[0][_]){p=-1;break}const T=m.logs[v^h[0][_]]-m.logs[h[0][g]^h[0][_]];p=(p+T+f)%f}i=i===-1?i:i^m.exps[p]}return i}return _t.lagrange=u,_t}var yt={},zt;function ba(){if(zt)return yt;zt=1,Object.defineProperty(yt,"__esModule",{value:!0});const m=ut();function l(u){const v={id:null,bits:null,data:null};Buffer.isBuffer(u)&&(u=u.toString("hex")),u[0]==="0"&&(u=u.slice(1)),v.bits=parseInt(u.slice(0,1),36);const p=`^([a-kA-K3-9]{1})([a-fA-F0-9]{${(m.BIT_SIZE-1).toString(16).length}})([a-fA-F0-9]+)$`,i=new RegExp(p).exec(u);return i&&i.length&&(v.id=parseInt(i[2],16),v.data=i[3]),v}return yt.parse=l,yt}var at={},Kt;function cr(){if(Kt)return at;Kt=1,Object.defineProperty(at,"__esModule",{value:!0});const m=Ft(),l=ut();function u(g,_){let T=0,C=g;if(_||(_=l.BIT_COUNT),g&&(T=g.length%_),T){const M=-(_-T+g.length);C=(m.zeroes+g).slice(M)}return C}at.pad=u;function v(g,_){const T=2*l.BYTES_PER_CHARACTER;if(_||(_=l.UTF8_ENCODING),typeof g=="string")return C();if(Buffer.isBuffer(g))return M();throw new TypeError("Expecting a string or buffer as input.");function C(){const w=[];if(l.UTF8_ENCODING===_)for(let S=0;S<g.length;++S){const A=Number(String.fromCharCode(g[S])).toString(16);w.unshift(u(A,T))}if(l.BIN_ENCODING===_){g=u(g,4);for(let S=g.length;S>=4;S-=4){const A=g.slice(S-4,S),P=parseInt(A,2).toString(16);w.unshift(P)}}return w.join("")}function M(){const w=[];for(let S=0;S<g.length;++S){const A=g[S].toString(16);w.unshift(u(A,T))}return w.join("")}}at.hex=v;function h(g,_){const T=[];_||(_=16);for(let C=g.length-1;C>=0;--C){let M=null;if(Buffer.isBuffer(g)&&(M=g[C]),typeof g=="string"&&(M=parseInt(g[C],_)),Array.isArray(g)&&(M=g[C],typeof M=="string"&&(M=parseInt(M,_))),M===null)throw new TypeError("Unsupported type for chunk in buffer array.");T.unshift(u(M.toString(2),4))}return T.join("")}at.bin=h;function f(g,_){g=parseInt(g,16);const T=(l.BIT_SIZE-1).toString(16).length,C=Buffer.concat([Buffer.from(l.BIT_COUNT.toString(36).toUpperCase()),Buffer.from(u(g.toString(16),T))]);return Buffer.isBuffer(_)===!1&&(_=Buffer.from(_)),Buffer.concat([C,_])}at.encode=f;function p(g,_){const T=2*l.BYTES_PER_CHARACTER,C=T,M=[];Buffer.isBuffer(g)&&(g=g.toString(_)),g=u(g,T);for(let w=0;w<g.length;w+=C){const S=g.slice(w,w+C),A=parseInt(S,16);M.unshift(A)}return Buffer.from(M)}at.decode=p;function i(g,_,T){const C=[];let M=0;for(Buffer.isBuffer(g)&&(g=g.toString()),_&&(g=u(g,_)),M=g.length;M>l.BIT_COUNT;M-=l.BIT_COUNT){const w=g.slice(M-l.BIT_COUNT,M),S=parseInt(w,T);C.push(S)}return C.push(parseInt(g.slice(0,M),T)),C}return at.split=i,at}var Yt;function _a(){if(Yt)return bt;Yt=1,Object.defineProperty(bt,"__esModule",{value:!0});const m=ut(),l=xa(),u=ba(),v=cr();function h(f){const p=[],i=[],g=[],_=f.length;for(let S=0;S<_;++S){const A=u.parse(f[S]);if(i.indexOf(A.id)===-1){i.push(A.id);const P=v.bin(A.data,16),G=v.split(P,0,2);for(let $=0;$<G.length;++$)g[$]||(g[$]=[]),g[$][i.length-1]=G[$]}}for(let S=0;S<g.length;++S){const A=l.lagrange(0,[i,g[S]]);p.unshift(v.pad(A.toString(2)))}const T=p.join(""),C=T.slice(1+T.indexOf("1")),M=v.hex(C,m.BIN_ENCODING),w=v.decode(M);return Buffer.from(w)}return bt.combine=h,bt}var wt={},kt={},Et={},Gt;function ya(){if(Gt)return Et;Gt=1,Object.defineProperty(Et,"__esModule",{value:!0});const m=ut(),l=Ft();function u(v,h){const f=m.MAX_SHARES,p=h.length-1;let i=0;for(let g=p;g>=0;--g)i=i===0?h[g]:l.exps[(l.logs[v]+l.logs[i])%f]^h[g];return i}return Et.horner=u,Et}var qt;function wa(){if(qt)return kt;qt=1,Object.defineProperty(kt,"__esModule",{value:!0});const m=ya();function l(u,v){const h=v.random,f=[u],p=[],i=v.threshold,g=v.shares;for(let _=1;_<i;++_)f[_]=parseInt(h(1).toString("hex"),16);for(let _=1;_<1+g;++_)p[_-1]={x:_,y:m.horner(_,f)};return p}return kt.points=l,kt}var St={},At={exports:{}},It={exports:{}},Rt={},mt={},Xt;function ka(){if(Xt)return mt;Xt=1,mt.byteLength=i,mt.toByteArray=_,mt.fromByteArray=M;for(var m=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=v.length;h<f;++h)m[h]=v[h],l[v.charCodeAt(h)]=h;l[45]=62,l[95]=63;function p(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=w.indexOf("=");A===-1&&(A=S);var P=A===S?0:4-A%4;return[A,P]}function i(w){var S=p(w),A=S[0],P=S[1];return(A+P)*3/4-P}function g(w,S,A){return(S+A)*3/4-A}function _(w){var S,A=p(w),P=A[0],G=A[1],$=new u(g(w,P,G)),V=0,Q=G>0?P-4:P,B;for(B=0;B<Q;B+=4)S=l[w.charCodeAt(B)]<<18|l[w.charCodeAt(B+1)]<<12|l[w.charCodeAt(B+2)]<<6|l[w.charCodeAt(B+3)],$[V++]=S>>16&255,$[V++]=S>>8&255,$[V++]=S&255;return G===2&&(S=l[w.charCodeAt(B)]<<2|l[w.charCodeAt(B+1)]>>4,$[V++]=S&255),G===1&&(S=l[w.charCodeAt(B)]<<10|l[w.charCodeAt(B+1)]<<4|l[w.charCodeAt(B+2)]>>2,$[V++]=S>>8&255,$[V++]=S&255),$}function T(w){return m[w>>18&63]+m[w>>12&63]+m[w>>6&63]+m[w&63]}function C(w,S,A){for(var P,G=[],$=S;$<A;$+=3)P=(w[$]<<16&16711680)+(w[$+1]<<8&65280)+(w[$+2]&255),G.push(T(P));return G.join("")}function M(w){for(var S,A=w.length,P=A%3,G=[],$=16383,V=0,Q=A-P;V<Q;V+=$)G.push(C(w,V,V+$>Q?Q:V+$));return P===1?(S=w[A-1],G.push(m[S>>2]+m[S<<4&63]+"==")):P===2&&(S=(w[A-2]<<8)+w[A-1],G.push(m[S>>10]+m[S>>4&63]+m[S<<2&63]+"=")),G.join("")}return mt}var Bt={};var Wt;function Ea(){return Wt||(Wt=1,Bt.read=function(m,l,u,v,h){var f,p,i=h*8-v-1,g=(1<<i)-1,_=g>>1,T=-7,C=u?h-1:0,M=u?-1:1,w=m[l+C];for(C+=M,f=w&(1<<-T)-1,w>>=-T,T+=i;T>0;f=f*256+m[l+C],C+=M,T-=8);for(p=f&(1<<-T)-1,f>>=-T,T+=v;T>0;p=p*256+m[l+C],C+=M,T-=8);if(f===0)f=1-_;else{if(f===g)return p?NaN:(w?-1:1)*(1/0);p=p+Math.pow(2,v),f=f-_}return(w?-1:1)*p*Math.pow(2,f-v)},Bt.write=function(m,l,u,v,h,f){var p,i,g,_=f*8-h-1,T=(1<<_)-1,C=T>>1,M=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=v?0:f-1,S=v?1:-1,A=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(i=isNaN(l)?1:0,p=T):(p=Math.floor(Math.log(l)/Math.LN2),l*(g=Math.pow(2,-p))<1&&(p--,g*=2),p+C>=1?l+=M/g:l+=M*Math.pow(2,1-C),l*g>=2&&(p++,g/=2),p+C>=T?(i=0,p=T):p+C>=1?(i=(l*g-1)*Math.pow(2,h),p=p+C):(i=l*Math.pow(2,C-1)*Math.pow(2,h),p=0));h>=8;m[u+w]=i&255,w+=S,i/=256,h-=8);for(p=p<<h|i,_+=h;_>0;m[u+w]=p&255,w+=S,p/=256,_-=8);m[u+w-S]|=A*128}),Bt}var Jt;function Sa(){return Jt||(Jt=1,(function(m){const l=ka(),u=Ea(),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;m.Buffer=i,m.SlowBuffer=$,m.INSPECT_MAX_BYTES=50;const h=2147483647;m.kMaxLength=h,i.TYPED_ARRAY_SUPPORT=f(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function p(r){if(r>h)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,i.prototype),e}function i(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(r)}return g(r,e,t)}i.poolSize=8192;function g(r,e,t){if(typeof r=="string")return M(r,e);if(ArrayBuffer.isView(r))return S(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(de(r,ArrayBuffer)||r&&de(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(r,SharedArrayBuffer)||r&&de(r.buffer,SharedArrayBuffer)))return A(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const o=r.valueOf&&r.valueOf();if(o!=null&&o!==r)return i.from(o,e,t);const c=P(r);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return i.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}i.from=function(r,e,t){return g(r,e,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function _(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function T(r,e,t){return _(r),r<=0?p(r):e!==void 0?typeof t=="string"?p(r).fill(e,t):p(r).fill(e):p(r)}i.alloc=function(r,e,t){return T(r,e,t)};function C(r){return _(r),p(r<0?0:G(r)|0)}i.allocUnsafe=function(r){return C(r)},i.allocUnsafeSlow=function(r){return C(r)};function M(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=V(r,e)|0;let o=p(t);const c=o.write(r,e);return c!==t&&(o=o.slice(0,c)),o}function w(r){const e=r.length<0?0:G(r.length)|0,t=p(e);for(let o=0;o<e;o+=1)t[o]=r[o]&255;return t}function S(r){if(de(r,Uint8Array)){const e=new Uint8Array(r);return A(e.buffer,e.byteOffset,e.byteLength)}return w(r)}function A(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let o;return e===void 0&&t===void 0?o=new Uint8Array(r):t===void 0?o=new Uint8Array(r,e):o=new Uint8Array(r,e,t),Object.setPrototypeOf(o,i.prototype),o}function P(r){if(i.isBuffer(r)){const e=G(r.length)|0,t=p(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ee(r.length)?p(0):w(r);if(r.type==="Buffer"&&Array.isArray(r.data))return w(r.data)}function G(r){if(r>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return r|0}function $(r){return+r!=r&&(r=0),i.alloc(+r)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,t){if(de(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),de(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let o=e.length,c=t.length;for(let x=0,k=Math.min(o,c);x<k;++x)if(e[x]!==t[x]){o=e[x],c=t[x];break}return o<c?-1:c<o?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);let o;if(t===void 0)for(t=0,o=0;o<e.length;++o)t+=e[o].length;const c=i.allocUnsafe(t);let x=0;for(o=0;o<e.length;++o){let k=e[o];if(de(k,Uint8Array))x+k.length>c.length?(i.isBuffer(k)||(k=i.from(k)),k.copy(c,x)):Uint8Array.prototype.set.call(c,k,x);else if(i.isBuffer(k))k.copy(c,x);else throw new TypeError('"list" argument must be an Array of Buffers');x+=k.length}return c};function V(r,e){if(i.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||de(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&t===0)return 0;let c=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return ge(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return H(r).length;default:if(c)return o?-1:ge(r).length;e=(""+e).toLowerCase(),c=!0}}i.byteLength=V;function Q(r,e,t){let o=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return z(this,e,t);case"utf8":case"utf-8":return fe(this,e,t);case"ascii":return L(this,e,t);case"latin1":case"binary":return I(this,e,t);case"base64":return W(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,e,t);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),o=!0}}i.prototype._isBuffer=!0;function B(r,e,t){const o=r[e];r[e]=r[t],r[t]=o}i.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)B(this,t,t+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)B(this,t,t+3),B(this,t+1,t+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)B(this,t,t+7),B(this,t+1,t+6),B(this,t+2,t+5),B(this,t+3,t+4);return this},i.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?fe(this,0,e):Q.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){let e="";const t=m.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},v&&(i.prototype[v]=i.prototype.inspect),i.prototype.compare=function(e,t,o,c,x){if(de(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),o===void 0&&(o=e?e.length:0),c===void 0&&(c=0),x===void 0&&(x=this.length),t<0||o>e.length||c<0||x>this.length)throw new RangeError("out of range index");if(c>=x&&t>=o)return 0;if(c>=x)return-1;if(t>=o)return 1;if(t>>>=0,o>>>=0,c>>>=0,x>>>=0,this===e)return 0;let k=x-c,le=o-t;const Re=Math.min(k,le),Ae=this.slice(c,x),ue=e.slice(t,o);for(let ne=0;ne<Re;++ne)if(Ae[ne]!==ue[ne]){k=Ae[ne],le=ue[ne];break}return k<le?-1:le<k?1:0};function R(r,e,t,o,c){if(r.length===0)return-1;if(typeof t=="string"?(o=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ee(t)&&(t=c?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(c)return-1;t=r.length-1}else if(t<0)if(c)t=0;else return-1;if(typeof e=="string"&&(e=i.from(e,o)),i.isBuffer(e))return e.length===0?-1:N(r,e,t,o,c);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):N(r,[e],t,o,c);throw new TypeError("val must be string, number or Buffer")}function N(r,e,t,o,c){let x=1,k=r.length,le=e.length;if(o!==void 0&&(o=String(o).toLowerCase(),o==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(r.length<2||e.length<2)return-1;x=2,k/=2,le/=2,t/=2}function Re(ue,ne){return x===1?ue[ne]:ue.readUInt16BE(ne*x)}let Ae;if(c){let ue=-1;for(Ae=t;Ae<k;Ae++)if(Re(r,Ae)===Re(e,ue===-1?0:Ae-ue)){if(ue===-1&&(ue=Ae),Ae-ue+1===le)return ue*x}else ue!==-1&&(Ae-=Ae-ue),ue=-1}else for(t+le>k&&(t=k-le),Ae=t;Ae>=0;Ae--){let ue=!0;for(let ne=0;ne<le;ne++)if(Re(r,Ae+ne)!==Re(e,ne)){ue=!1;break}if(ue)return Ae}return-1}i.prototype.includes=function(e,t,o){return this.indexOf(e,t,o)!==-1},i.prototype.indexOf=function(e,t,o){return R(this,e,t,o,!0)},i.prototype.lastIndexOf=function(e,t,o){return R(this,e,t,o,!1)};function j(r,e,t,o){t=Number(t)||0;const c=r.length-t;o?(o=Number(o),o>c&&(o=c)):o=c;const x=e.length;o>x/2&&(o=x/2);let k;for(k=0;k<o;++k){const le=parseInt(e.substr(k*2,2),16);if(Ee(le))return k;r[t+k]=le}return k}function ve(r,e,t,o){return Z(ge(e,r.length-t),r,t,o)}function ce(r,e,t,o){return Z(ae(e),r,t,o)}function oe(r,e,t,o){return Z(H(e),r,t,o)}function te(r,e,t,o){return Z(D(e,r.length-t),r,t,o)}i.prototype.write=function(e,t,o,c){if(t===void 0)c="utf8",o=this.length,t=0;else if(o===void 0&&typeof t=="string")c=t,o=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(o)?(o=o>>>0,c===void 0&&(c="utf8")):(c=o,o=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const x=this.length-t;if((o===void 0||o>x)&&(o=x),e.length>0&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let k=!1;for(;;)switch(c){case"hex":return j(this,e,t,o);case"utf8":case"utf-8":return ve(this,e,t,o);case"ascii":case"latin1":case"binary":return ce(this,e,t,o);case"base64":return oe(this,e,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,e,t,o);default:if(k)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),k=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(r,e,t){return e===0&&t===r.length?l.fromByteArray(r):l.fromByteArray(r.slice(e,t))}function fe(r,e,t){t=Math.min(r.length,t);const o=[];let c=e;for(;c<t;){const x=r[c];let k=null,le=x>239?4:x>223?3:x>191?2:1;if(c+le<=t){let Re,Ae,ue,ne;switch(le){case 1:x<128&&(k=x);break;case 2:Re=r[c+1],(Re&192)===128&&(ne=(x&31)<<6|Re&63,ne>127&&(k=ne));break;case 3:Re=r[c+1],Ae=r[c+2],(Re&192)===128&&(Ae&192)===128&&(ne=(x&15)<<12|(Re&63)<<6|Ae&63,ne>2047&&(ne<55296||ne>57343)&&(k=ne));break;case 4:Re=r[c+1],Ae=r[c+2],ue=r[c+3],(Re&192)===128&&(Ae&192)===128&&(ue&192)===128&&(ne=(x&15)<<18|(Re&63)<<12|(Ae&63)<<6|ue&63,ne>65535&&ne<1114112&&(k=ne))}}k===null?(k=65533,le=1):k>65535&&(k-=65536,o.push(k>>>10&1023|55296),k=56320|k&1023),o.push(k),c+=le}return Te(o)}const _e=4096;function Te(r){const e=r.length;if(e<=_e)return String.fromCharCode.apply(String,r);let t="",o=0;for(;o<e;)t+=String.fromCharCode.apply(String,r.slice(o,o+=_e));return t}function L(r,e,t){let o="";t=Math.min(r.length,t);for(let c=e;c<t;++c)o+=String.fromCharCode(r[c]&127);return o}function I(r,e,t){let o="";t=Math.min(r.length,t);for(let c=e;c<t;++c)o+=String.fromCharCode(r[c]);return o}function z(r,e,t){const o=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>o)&&(t=o);let c="";for(let x=e;x<t;++x)c+=Be[r[x]];return c}function re(r,e,t){const o=r.slice(e,t);let c="";for(let x=0;x<o.length-1;x+=2)c+=String.fromCharCode(o[x]+o[x+1]*256);return c}i.prototype.slice=function(e,t){const o=this.length;e=~~e,t=t===void 0?o:~~t,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),t<e&&(t=e);const c=this.subarray(e,t);return Object.setPrototypeOf(c,i.prototype),c};function K(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,o){e=e>>>0,t=t>>>0,o||K(e,t,this.length);let c=this[e],x=1,k=0;for(;++k<t&&(x*=256);)c+=this[e+k]*x;return c},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,o){e=e>>>0,t=t>>>0,o||K(e,t,this.length);let c=this[e+--t],x=1;for(;t>0&&(x*=256);)c+=this[e+--t]*x;return c},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e=e>>>0,t||K(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||K(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||K(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||K(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||K(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=ye(function(e){e=e>>>0,ee(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&me(e,this.length-8);const c=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,x=this[++e]+this[++e]*2**8+this[++e]*2**16+o*2**24;return BigInt(c)+(BigInt(x)<<BigInt(32))}),i.prototype.readBigUInt64BE=ye(function(e){e=e>>>0,ee(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&me(e,this.length-8);const c=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],x=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+o;return(BigInt(c)<<BigInt(32))+BigInt(x)}),i.prototype.readIntLE=function(e,t,o){e=e>>>0,t=t>>>0,o||K(e,t,this.length);let c=this[e],x=1,k=0;for(;++k<t&&(x*=256);)c+=this[e+k]*x;return x*=128,c>=x&&(c-=Math.pow(2,8*t)),c},i.prototype.readIntBE=function(e,t,o){e=e>>>0,t=t>>>0,o||K(e,t,this.length);let c=t,x=1,k=this[e+--c];for(;c>0&&(x*=256);)k+=this[e+--c]*x;return x*=128,k>=x&&(k-=Math.pow(2,8*t)),k},i.prototype.readInt8=function(e,t){return e=e>>>0,t||K(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){e=e>>>0,t||K(e,2,this.length);const o=this[e]|this[e+1]<<8;return o&32768?o|4294901760:o},i.prototype.readInt16BE=function(e,t){e=e>>>0,t||K(e,2,this.length);const o=this[e+1]|this[e]<<8;return o&32768?o|4294901760:o},i.prototype.readInt32LE=function(e,t){return e=e>>>0,t||K(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e=e>>>0,t||K(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=ye(function(e){e=e>>>0,ee(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&me(e,this.length-8);const c=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(o<<24);return(BigInt(c)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),i.prototype.readBigInt64BE=ye(function(e){e=e>>>0,ee(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&me(e,this.length-8);const c=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(c)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+o)}),i.prototype.readFloatLE=function(e,t){return e=e>>>0,t||K(e,4,this.length),u.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e=e>>>0,t||K(e,4,this.length),u.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||K(e,8,this.length),u.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||K(e,8,this.length),u.read(this,e,!1,52,8)};function Y(r,e,t,o,c,x){if(!i.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>c||e<x)throw new RangeError('"value" argument is out of bounds');if(t+o>r.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,o,c){if(e=+e,t=t>>>0,o=o>>>0,!c){const le=Math.pow(2,8*o)-1;Y(this,e,t,o,le,0)}let x=1,k=0;for(this[t]=e&255;++k<o&&(x*=256);)this[t+k]=e/x&255;return t+o},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,o,c){if(e=+e,t=t>>>0,o=o>>>0,!c){const le=Math.pow(2,8*o)-1;Y(this,e,t,o,le,0)}let x=o-1,k=1;for(this[t+x]=e&255;--x>=0&&(k*=256);)this[t+x]=e/k&255;return t+o},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,1,255,0),this[t]=e&255,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function he(r,e,t,o,c){ke(e,o,c,r,t,7);let x=Number(e&BigInt(4294967295));r[t++]=x,x=x>>8,r[t++]=x,x=x>>8,r[t++]=x,x=x>>8,r[t++]=x;let k=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=k,k=k>>8,r[t++]=k,k=k>>8,r[t++]=k,k=k>>8,r[t++]=k,t}function Se(r,e,t,o,c){ke(e,o,c,r,t,7);let x=Number(e&BigInt(4294967295));r[t+7]=x,x=x>>8,r[t+6]=x,x=x>>8,r[t+5]=x,x=x>>8,r[t+4]=x;let k=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=k,k=k>>8,r[t+2]=k,k=k>>8,r[t+1]=k,k=k>>8,r[t]=k,t+8}i.prototype.writeBigUInt64LE=ye(function(e,t=0){return he(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ye(function(e,t=0){return Se(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,t,o,c){if(e=+e,t=t>>>0,!c){const Re=Math.pow(2,8*o-1);Y(this,e,t,o,Re-1,-Re)}let x=0,k=1,le=0;for(this[t]=e&255;++x<o&&(k*=256);)e<0&&le===0&&this[t+x-1]!==0&&(le=1),this[t+x]=(e/k>>0)-le&255;return t+o},i.prototype.writeIntBE=function(e,t,o,c){if(e=+e,t=t>>>0,!c){const Re=Math.pow(2,8*o-1);Y(this,e,t,o,Re-1,-Re)}let x=o-1,k=1,le=0;for(this[t+x]=e&255;--x>=0&&(k*=256);)e<0&&le===0&&this[t+x+1]!==0&&(le=1),this[t+x]=(e/k>>0)-le&255;return t+o},i.prototype.writeInt8=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},i.prototype.writeInt16LE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeInt32LE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,o){return e=+e,t=t>>>0,o||Y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},i.prototype.writeBigInt64LE=ye(function(e,t=0){return he(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ye(function(e,t=0){return Se(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(r,e,t,o,c,x){if(t+o>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function O(r,e,t,o,c){return e=+e,t=t>>>0,c||be(r,e,t,4),u.write(r,e,t,o,23,4),t+4}i.prototype.writeFloatLE=function(e,t,o){return O(this,e,t,!0,o)},i.prototype.writeFloatBE=function(e,t,o){return O(this,e,t,!1,o)};function q(r,e,t,o,c){return e=+e,t=t>>>0,c||be(r,e,t,8),u.write(r,e,t,o,52,8),t+8}i.prototype.writeDoubleLE=function(e,t,o){return q(this,e,t,!0,o)},i.prototype.writeDoubleBE=function(e,t,o){return q(this,e,t,!1,o)},i.prototype.copy=function(e,t,o,c){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(o||(o=0),!c&&c!==0&&(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<o&&(c=o),c===o||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-o&&(c=e.length-t+o);const x=c-o;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,o,c):Uint8Array.prototype.set.call(e,this.subarray(o,c),t),x},i.prototype.fill=function(e,t,o,c){if(typeof e=="string"){if(typeof t=="string"?(c=t,t=0,o=this.length):typeof o=="string"&&(c=o,o=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!i.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(e.length===1){const k=e.charCodeAt(0);(c==="utf8"&&k<128||c==="latin1")&&(e=k)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;t=t>>>0,o=o===void 0?this.length:o>>>0,e||(e=0);let x;if(typeof e=="number")for(x=t;x<o;++x)this[x]=e;else{const k=i.isBuffer(e)?e:i.from(e,c),le=k.length;if(le===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(x=0;x<o-t;++x)this[x+t]=k[x%le]}return this};const se={};function xe(r,e,t){se[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),xe("ERR_OUT_OF_RANGE",function(r,e,t){let o=`The value of "${r}" is out of range.`,c=t;return Number.isInteger(t)&&Math.abs(t)>2**32?c=we(String(t)):typeof t=="bigint"&&(c=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(c=we(c)),c+="n"),o+=` It must be ${e}. Received ${c}`,o},RangeError);function we(r){let e="",t=r.length;const o=r[0]==="-"?1:0;for(;t>=o+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Ce(r,e,t){ee(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&me(e,r.length-(t+1))}function ke(r,e,t,o,c,x){if(r>t||r<e){const k=typeof e=="bigint"?"n":"";let le;throw e===0||e===BigInt(0)?le=`>= 0${k} and < 2${k} ** ${(x+1)*8}${k}`:le=`>= -(2${k} ** ${(x+1)*8-1}${k}) and < 2 ** ${(x+1)*8-1}${k}`,new se.ERR_OUT_OF_RANGE("value",le,r)}Ce(o,c,x)}function ee(r,e){if(typeof r!="number")throw new se.ERR_INVALID_ARG_TYPE(e,"number",r)}function me(r,e,t){throw Math.floor(r)!==r?(ee(r,t),new se.ERR_OUT_OF_RANGE("offset","an integer",r)):e<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,r)}const ie=/[^+/0-9A-Za-z-_]/g;function J(r){if(r=r.split("=")[0],r=r.trim().replace(ie,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ge(r,e){e=e||1/0;let t;const o=r.length;let c=null;const x=[];for(let k=0;k<o;++k){if(t=r.charCodeAt(k),t>55295&&t<57344){if(!c){if(t>56319){(e-=3)>-1&&x.push(239,191,189);continue}else if(k+1===o){(e-=3)>-1&&x.push(239,191,189);continue}c=t;continue}if(t<56320){(e-=3)>-1&&x.push(239,191,189),c=t;continue}t=(c-55296<<10|t-56320)+65536}else c&&(e-=3)>-1&&x.push(239,191,189);if(c=null,t<128){if((e-=1)<0)break;x.push(t)}else if(t<2048){if((e-=2)<0)break;x.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;x.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;x.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return x}function ae(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function D(r,e){let t,o,c;const x=[];for(let k=0;k<r.length&&!((e-=2)<0);++k)t=r.charCodeAt(k),o=t>>8,c=t%256,x.push(c),x.push(o);return x}function H(r){return l.toByteArray(J(r))}function Z(r,e,t,o){let c;for(c=0;c<o&&!(c+t>=e.length||c>=r.length);++c)e[c+t]=r[c];return c}function de(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ee(r){return r!==r}const Be=(function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const o=t*16;for(let c=0;c<16;++c)e[o+c]=r[t]+r[c]}return e})();function ye(r){return typeof BigInt>"u"?Ue:r}function Ue(){throw new Error("BigInt not supported")}})(Rt)),Rt}var Zt;function Aa(){return Zt||(Zt=1,(function(m,l){var u=Sa(),v=u.Buffer;function h(p,i){for(var g in p)i[g]=p[g]}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?m.exports=u:(h(u,l),l.Buffer=f);function f(p,i,g){return v(p,i,g)}f.prototype=Object.create(v.prototype),h(v,f),f.from=function(p,i,g){if(typeof p=="number")throw new TypeError("Argument must not be a number");return v(p,i,g)},f.alloc=function(p,i,g){if(typeof p!="number")throw new TypeError("Argument must be a number");var _=v(p);return i!==void 0?typeof g=="string"?_.fill(i,g):_.fill(i):_.fill(0),_},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return v(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(p)}})(It,It.exports)),It.exports}var Qt;function Ia(){if(Qt)return At.exports;Qt=1;var m=65536,l=4294967295;function u(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var v=Aa().Buffer,h=globalThis.crypto||globalThis.msCrypto;h&&h.getRandomValues?At.exports=f:At.exports=u;function f(p,i){if(p>l)throw new RangeError("requested too many random bytes");var g=v.allocUnsafe(p);if(p>0)if(p>m)for(var _=0;_<p;_+=m)h.getRandomValues(g.slice(_,_+m));else h.getRandomValues(g);return typeof i=="function"?process.nextTick(function(){i(null,g)}):g}return At.exports}var er;function Ba(){if(er)return St;er=1,Object.defineProperty(St,"__esModule",{value:!0});const m=Ia();function l(u){return m(32+u).slice(32)}return St.random=l,St}var tr;function Ta(){if(tr)return wt;tr=1,Object.defineProperty(wt,"__esModule",{value:!0});const m=wa(),l=Ba(),u=cr(),v=ut(),h=new Array(2*v.MAX_SHARES);function f(p,i){if(!p||p&&p.length===0)throw new TypeError("Secret cannot be empty.");if(typeof p=="string"&&(p=Buffer.from(p)),Buffer.isBuffer(p)===!1)throw new TypeError("Expecting secret to be a buffer.");if(!i||typeof i!="object")throw new TypeError("Expecting options to be an object.");if(typeof i.shares!="number")throw new TypeError("Expecting shares to be a number.");if(!i.shares||i.shares<0||i.shares>v.MAX_SHARES)throw new RangeError(`Shares must be 0 < shares <= ${v.MAX_SHARES}.`);if(typeof i.threshold!="number")throw new TypeError("Expecting threshold to be a number.");if(!i.threshold||i.threshold<0||i.threshold>i.shares)throw new RangeError(`Threshold must be 0 < threshold <= ${i.shares}.`);(!i.random||typeof i.random!="function")&&(i.random=l.random);const g=u.hex(p),_=u.bin(g,16),T=u.split("1"+_,v.BIT_PADDING,2);for(let M=0;M<T.length;++M){const w=m.points(T[M],i);for(let S=0;S<i.shares;++S){h[S]||(h[S]=w[S].x.toString(16));const A=w[S].y.toString(2),P=h[S+v.MAX_SHARES]||"";h[S+v.MAX_SHARES]=u.pad(A)+P}}for(let M=0;M<i.shares;++M){const w=h[M],S=u.hex(h[M+v.MAX_SHARES],v.BIN_ENCODING);h[M]=u.encode(w,S),h[M]=Buffer.from("0"+h[M],"hex")}const C=h.slice(0,i.shares);return h.fill(0),C}return wt.split=f,wt}var rr;function Ma(){if(rr)return ht;rr=1,Object.defineProperty(ht,"__esModule",{value:!0});const m=_a();ht.combine=m.combine;const l=Ta();return ht.split=l.split,ht}var Ca=Ma();const nt={MIN_LENGTH:12,PBKDF2_ITERATIONS:6e5,SALT_LENGTH:16,IV_LENGTH:12,AES_KEY_LENGTH:256,HASH_ALGORITHM:"SHA-256"};function Ra(m){const l=[];return m.length<nt.MIN_LENGTH&&l.push(`Passphrase must be at least ${nt.MIN_LENGTH} characters long`),/[A-Z]/.test(m)||l.push("Passphrase must contain at least one uppercase letter"),/[a-z]/.test(m)||l.push("Passphrase must contain at least one lowercase letter"),/[0-9]/.test(m)||l.push("Passphrase must contain at least one number"),/[^A-Za-z0-9]/.test(m)||l.push("Passphrase must contain at least one symbol"),{valid:l.length===0,errors:l}}async function Na(m,l){return it(async()=>{const u=new TextEncoder,v=await crypto.subtle.importKey("raw",u.encode(m),"PBKDF2",!1,["deriveBits","deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:l,iterations:nt.PBKDF2_ITERATIONS,hash:nt.HASH_ALGORITHM},v,{name:"AES-GCM",length:nt.AES_KEY_LENGTH},!1,["encrypt","decrypt"])},je.KEY_DERIVATION_FAILED,"Failed to derive key from passphrase")}async function La(m,l){return it(async()=>{const u=crypto.getRandomValues(new Uint8Array(nt.SALT_LENGTH)),v=crypto.getRandomValues(new Uint8Array(nt.IV_LENGTH)),h=await Na(l,u),f=new TextEncoder,p=await crypto.subtle.encrypt({name:"AES-GCM",iv:v},h,f.encode(m)),i=nt.SALT_LENGTH,g=nt.IV_LENGTH,_=new Uint8Array(i+g+p.byteLength);return _.set(u,0),_.set(v,i),_.set(new Uint8Array(p),i+g),btoa(String.fromCharCode(..._))},je.ENCRYPTION_FAILED,"Failed to encrypt data")}const Ye={MIN_THRESHOLD:2,MAX_THRESHOLD:5,MIN_TOTAL_SHARDS:3,MAX_TOTAL_SHARDS:10};function Fa(m){const{threshold:l,totalShards:u}=m;if(l<Ye.MIN_THRESHOLD||l>Ye.MAX_THRESHOLD)throw new $e(je.INVALID_THRESHOLD,`Threshold must be between ${Ye.MIN_THRESHOLD} and ${Ye.MAX_THRESHOLD}`);if(u<Ye.MIN_TOTAL_SHARDS||u>Ye.MAX_TOTAL_SHARDS)throw new $e(je.INVALID_SHARD_COUNT,`Total shards must be between ${Ye.MIN_TOTAL_SHARDS} and ${Ye.MAX_TOTAL_SHARDS}`);if(l>u)throw new $e(je.INVALID_THRESHOLD,"Threshold cannot be greater than total shards")}function Da(m,l,u){try{const v=Buffer.from(m,"hex");return Ca.split(v,{shares:u,threshold:l}).map(f=>f.toString("hex"))}catch(v){throw $e.from(v,je.SHAMIR_SPLIT_FAILED,"Failed to split secret into shards")}}async function Pa(m,l,u,v){const h=await La(m,l);return{index:u,encryptedData:h,totalShards:v.totalShards,threshold:v.threshold}}async function Ua(m,l,u){Fa(u);const v=Da(m,u.threshold,u.totalShards),h=[];for(let f=0;f<v.length;f++){const p=await Pa(v[f],l,f+1,u);h.push(p)}return h}const vr={EVENT_KIND:3,SECONDS_PER_DAY:1440*60};async function Ha(){return it(async()=>{const m=Lt.generate(),l=await m.user();return[m,l.pubkey]},je.EVENT_CREATION_FAILED,"Failed to generate disposable key")}function Oa(m){const l=Math.floor(Date.now()/1e3),u=m*vr.SECONDS_PER_DAY;return l+u}function ja(m){return JSON.stringify({encryptedShard:m.encryptedData,index:m.index,threshold:m.threshold,totalShards:m.totalShards})}function $a(m,l,u){const v=new dr(m);return v.kind=vr.EVENT_KIND,v.created_at=u,v.tags=[["p",l]],v}async function Va(m,l,u){return it(async()=>{const v=new ur({pubkey:l});return await m.encrypt(v,u)},je.ENCRYPTION_FAILED,"Failed to encrypt shard payload")}async function za(m,l){return it(async()=>{await m.sign(l)},je.EVENT_SIGNING_FAILED,"Failed to sign shard event")}async function Ka(m){return it(async()=>{await m.publish()},je.EVENT_PUBLISHING_FAILED,"Failed to publish shard event")}async function Ya(m,l){const[u,v]=await Ha(),h=Oa(l.createdAtOffset),f=$a(m,l.recipientPubkey,h),p=ja(l.shard);return f.content=await Va(u,l.recipientPubkey,p),await za(f,u),await Ka(f),{eventId:f.id,recipientPubkey:l.recipientPubkey,relays:l.relays,shardIndex:l.shard.index,publishedAt:h,disposableKey:v}}function Ga(m,l,u){const v="pending_shards",h=localStorage.getItem(v)||"[]",f=JSON.parse(h);f.push({shard:m,recipientPubkey:l,relays:u,storedAt:Date.now()}),localStorage.setItem(v,JSON.stringify(f))}class qa{version=1;createdAt;threshold=0;publishedShards=[];constructor(){this.createdAt=Math.floor(Date.now()/1e3)}withVersion(l){return this.version=l,this}withCreatedAt(l){return this.createdAt=l,this}withThreshold(l){return this.threshold=l,this}withPublishedShards(l){return this.publishedShards=l,this}validate(){if(this.threshold<=0)throw new Error("Threshold must be greater than 0");if(this.publishedShards.length===0)throw new Error("At least one shard must be published");if(this.threshold>this.publishedShards.length)throw new Error("Threshold cannot exceed number of published shards")}build(){return this.validate(),{version:this.version,createdAt:this.createdAt,threshold:this.threshold,totalShards:this.publishedShards.length,trustees:this.publishedShards.map(l=>({pubkey:l.recipientPubkey,shardIndex:l.shardIndex})),shardEvents:this.publishedShards.map(l=>({eventId:l.eventId,recipientPubkey:l.recipientPubkey,relays:l.relays,shardIndex:l.shardIndex,publishedAt:l.publishedAt}))}}toJSON(){return JSON.stringify(this.build())}}const ar={EVENT_KIND:1115,D_TAG:"key-backup"};function Xa(m){const l=new dr(m);return l.kind=ar.EVENT_KIND,l.created_at=Math.floor(Date.now()/1e3),l.tags=[["d",ar.D_TAG]],l}async function Wa(m,l,u){return it(async()=>{const v=new ur({pubkey:l});return await m.encrypt(v,u)},je.ENCRYPTION_FAILED,"Failed to encrypt metadata")}async function Ja(m,l){return it(async()=>{await m.sign(l),await m.publish()},je.METADATA_PUBLISHING_FAILED,"Failed to publish metadata event")}async function Za(m,l,u,v){const h=m.activeUser?.pubkey;if(!h)throw new $e(je.NO_USER,"No active user found");const f=new qa().withThreshold(u).withPublishedShards(l).build(),p=Xa(m),i=new Lt(v);return p.content=await Wa(i,h,JSON.stringify(f)),await Ja(p,i),p.id}function Qa(m){const{searchQuery:l,availablePubkeys:u,limit:v=50}=m;let h=pe(Qe(new Set));const f=Me(()=>{const p=l().trim(),i=u();return p?i.filter(_=>a(h).has(_)).slice(0,v):i.slice(0,v)});return dt(()=>{const p=l().trim();if(console.log("[useProfileSearch] Search query:",p),!p){console.log("[useProfileSearch] Empty query, clearing results"),y(h,new Set,!0);return}if(!He.cacheAdapter?.getProfiles){console.error("[useProfileSearch] No getProfiles method available on cache adapter"),y(h,new Set,!0);return}console.log("[useProfileSearch] Searching profiles with query:",p),He.cacheAdapter.getProfiles({fields:["name","displayName","nip05"],contains:p}).then(i=>{console.log("[useProfileSearch] Search results count:",i?.size||0),y(h,new Set(i?.keys()||[]),!0)}).catch(i=>{console.error("[useProfileSearch] Failed to search profiles:",i),y(h,new Set,!0)})}),{get filteredPubkeys(){return a(f)}}}var en=E('<div class="flex items-center gap-3 p-3 bg-neutral-100 dark:bg-card border border rounded-lg"><!> <button class="p-2 hover:bg-neutral-200 dark:hover:bg-muted rounded-lg transition-colors"><svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),tn=E('<div class="space-y-2"></div>'),rn=E('<div class="text-center py-8 text-muted-foreground text-sm border border rounded-lg"><!></div>'),an=E('<button class="w-full p-3 hover:bg-neutral-100 dark:hover:bg-card transition-colors border-b border last:border-b-0"><!></button>'),nn=E('<div class="border border rounded-lg max-h-64 overflow-y-auto"></div>'),on=E('<div><input type="text" placeholder="Search your follows..." class="w-full px-3 py-2 bg-card border border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"/></div> <!>',1),sn=E('<div class="space-y-4"><div><label class="block text-sm font-medium text-foreground mb-2">Select Trustees</label> <p class="text-xs text-muted-foreground mb-3">Choose trusted contacts who will receive encrypted pieces of your key</p></div> <!> <div class="flex items-center justify-between text-sm mb-2"><span class="text-muted-foreground"> </span></div> <!></div>');function ln(m,l){ze(l,!0);let u=pe(""),v=Me(()=>Array.from(He.$sessions.follows));const h=Me(()=>a(v).filter(P=>!l.trustees.some(G=>G.pubkey===P))),{filteredPubkeys:f}=Qa({searchQuery:()=>a(u),availablePubkeys:()=>a(h),limit:10});function p(P){l.trustees.length>=l.maxTrustees||l.trustees.some(G=>G.pubkey===P)||l.onTrusteesChange([...l.trustees,{pubkey:P,selected:!0}])}function i(P){l.onTrusteesChange(l.trustees.filter(G=>G.pubkey!==P))}var g=sn(),_=d(s(g),2);{var T=P=>{var G=tn();Oe(G,21,()=>l.trustees,Ve,($,V)=>{var Q=en(),B=s(Q);Ht(B,{get pubkey(){return a(V).pubkey},variant:"avatar-name-handle",showHoverCard:!1,class:"flex-1 min-w-0"});var R=d(B,2);R.__click=()=>i(a(V).pubkey),n(Q),b($,Q)}),n(G),b(P,G)};U(_,P=>{l.trustees.length>0&&P(T)})}var C=d(_,2),M=s(C),w=s(M);n(M),n(C);var S=d(C,2);{var A=P=>{var G=on(),$=Pe(G),V=s($);qe(V),n($);var Q=d($,2);{var B=N=>{var j=rn(),ve=s(j);{var ce=te=>{var W=et("No follows found. Follow some people first.");b(te,W)},oe=te=>{var W=et("All follows have been selected");b(te,W)};U(ve,te=>{a(v).length===0?te(ce):te(oe,!1)})}n(j),b(N,j)},R=N=>{var j=nn();Oe(j,21,()=>f,Ve,(ve,ce)=>{var oe=an();oe.__click=()=>p(a(ce));var te=s(oe);Ht(te,{get pubkey(){return a(ce)},variant:"avatar-name-handle",showHoverCard:!1,class:"w-full"}),n(oe),b(ve,oe)}),n(j),b(N,j)};U(Q,N=>{f.length===0?N(B):N(R,!1)})}ft(V,()=>a(u),N=>y(u,N)),b(P,G)};U(S,P=>{l.trustees.length<l.maxTrustees&&P(A)})}n(g),X(()=>F(w,`Selected ${l.trustees.length??""} of ${l.maxTrustees??""}`)),b(m,g),Ke()}Xe(["click"]);var dn=E("<option> </option>"),un=E("<option> </option>"),cn=E('<div class="space-y-6"><div><label class="block text-sm font-medium text-foreground mb-2">Total Key Pieces</label> <p class="text-xs text-muted-foreground mb-3">How many pieces should your key be split into?</p> <select class="w-full px-3 py-2 bg-card border border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div> <div><label class="block text-sm font-medium text-foreground mb-2">Required for Recovery</label> <p class="text-xs text-muted-foreground mb-3">How many pieces are needed to recover your key?</p> <select class="w-full px-3 py-2 bg-card border border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div> <div class="p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg"><div class="flex gap-3"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1 text-sm text-blue-900 dark:text-blue-200"><p class="font-medium mb-1">What This Means</p> <p class="text-xs text-blue-700 dark:text-blue-300"> </p></div></div></div></div>');function vn(m,l){ze(l,!0);let u=Me(()=>Math.min(l.maxShards,Ye.MAX_TOTAL_SHARDS)),v=Me(()=>Math.min(Ye.MAX_THRESHOLD,l.totalShards)),h=Me(()=>Array.from({length:a(v)-Ye.MIN_THRESHOLD+1},(V,Q)=>Q+Ye.MIN_THRESHOLD)),f=Me(()=>Array.from({length:a(u)-Ye.MIN_TOTAL_SHARDS+1},(V,Q)=>Q+Ye.MIN_TOTAL_SHARDS));function p(V){l.onTotalShardsChange(V),l.threshold>V&&l.onThresholdChange(Math.min(l.threshold,V))}var i=cn(),g=s(i),_=d(s(g),4);_.__change=V=>p(parseInt(V.currentTarget.value)),Oe(_,21,()=>a(f),Ve,(V,Q)=>{var B=dn(),R=s(B);n(B);var N={};X(()=>{F(R,`${a(Q)??""} pieces`),N!==(N=a(Q))&&(B.value=(B.__value=a(Q))??"")}),b(V,B)}),n(_);var T;Dt(_),n(g);var C=d(g,2),M=d(s(C),4);M.__change=V=>l.onThresholdChange(parseInt(V.currentTarget.value)),Oe(M,21,()=>a(h),Ve,(V,Q)=>{var B=un(),R=s(B);n(B);var N={};X(()=>{F(R,`${a(Q)??""} pieces`),N!==(N=a(Q))&&(B.value=(B.__value=a(Q))??"")}),b(V,B)}),n(M);var w;Dt(M),n(C);var S=d(C,2),A=s(S),P=d(s(A),2),G=d(s(P),2),$=s(G);n(G),n(P),n(A),n(S),n(i),X(()=>{T!==(T=l.totalShards)&&(_.value=(_.__value=l.totalShards)??"",Pt(_,l.totalShards)),w!==(w=l.threshold)&&(M.value=(M.__value=l.threshold)??"",Pt(M,l.threshold)),F($,`Your key will be split into ${l.totalShards??""} pieces. You'll need any ${l.threshold??""} of them to recover your key.
          Individual pieces are useless without the required number.`)}),b(m,i),Ke()}Xe(["change"]);var fn=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>'),pn=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),hn=E('<p class="text-xs text-red-500 flex items-center gap-1"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> </p>'),mn=E('<div class="mt-2 space-y-1"></div>'),gn=E('<p class="mt-2 text-xs text-green-600 dark:text-green-400 flex items-center gap-1"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </p>'),xn=E('<div><label class="block text-sm font-medium text-foreground mb-2"> </label> <div class="relative"><input/> <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-neutral-700 dark:hover:text-muted-foreground"><!></button></div> <!> <!></div>');function nr(m,l){ze(l,!0);let u=gt(l,"isValid",3,!0),v=gt(l,"touched",3,!1),h=gt(l,"errors",19,()=>[]),f=pe(!1),p=Me(()=>v()&&h().length>0),i=Me(()=>v()&&u()&&l.value.length>0&&l.successMessage);var g=xn(),_=s(g),T=s(_,!0);n(_);var C=d(_,2),M=s(C);qe(M),M.__input=B=>l.onChange(B.currentTarget.value);var w=d(M,2);w.__click=()=>y(f,!a(f));var S=s(w);{var A=B=>{var R=fn();b(B,R)},P=B=>{var R=pn();b(B,R)};U(S,B=>{a(f)?B(A):B(P,!1)})}n(w),n(C);var G=d(C,2);{var $=B=>{var R=mn();Oe(R,21,h,Ve,(N,j)=>{var ve=hn(),ce=d(s(ve));n(ve),X(()=>F(ce,` ${a(j)??""}`)),b(N,ve)}),n(R),b(B,R)};U(G,B=>{a(p)&&B($)})}var V=d(G,2);{var Q=B=>{var R=gn(),N=d(s(R));n(R),X(()=>F(N,` ${l.successMessage??""}`)),b(B,R)};U(V,B=>{a(i)&&B(Q)})}n(g),X(()=>{F(T,l.label),st(M,"type",a(f)?"text":"password"),gr(M,l.value),st(M,"placeholder",l.placeholder),Fe(M,1,`w-full px-3 py-2 pr-10 bg-card border rounded-lg text-sm focus:outline-none focus:ring-2 ${a(p)?"border-red-500 focus:ring-red-500":"border focus:ring-orange-500"}`)}),or("blur",M,function(...B){l.onBlur?.apply(this,B)}),b(m,g),Ke()}Xe(["input","click"]);var bn=E('<div><div class="flex gap-3"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div><p class="font-semibold mb-1"> </p> <p> </p></div></div></div>');function fr(m,l){let u=gt(l,"variant",3,"warning"),v=Me(()=>u()==="danger"?"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-900":"bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-900"),h=Me(()=>u()==="danger"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"),f=Me(()=>u()==="danger"?"text-red-900 dark:text-red-200":"text-amber-900 dark:text-amber-200"),p=Me(()=>u()==="danger"?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300");var i=bn(),g=s(i),_=s(g),T=d(_,2),C=s(T),M=s(C,!0);n(C);var w=d(C,2),S=s(w,!0);n(w),n(T),n(g),n(i),X(()=>{Fe(i,1,`p-4 border rounded-lg ${a(v)??""}`),Fe(_,0,`w-5 h-5 flex-shrink-0 mt-0.5 ${a(h)??""}`),Fe(T,1,`flex-1 text-sm ${a(f)??""}`),F(M,l.title),Fe(w,1,`text-xs ${a(p)??""}`),F(S,l.description)}),b(m,i)}var _n=E('<div class="space-y-4"><!> <!> <!></div>');function yn(m,l){ze(l,!0);let u=pe(Qe({passphrase:!1,confirm:!1})),v=Me(()=>Ra(l.value)),h=Me(()=>l.value===l.confirmValue&&l.value.length>0);dt(()=>{l.onValidChange(a(v).valid&&a(h))});var f=_n(),p=s(f);fr(p,{title:"Passphrase Warning",description:"Your passphrase encrypts your key shards. If you forget it, your backup cannot be recovered. Write it down and store it securely.",variant:"warning"});var i=d(p,2);nr(i,{label:"Passphrase",get value(){return l.value},placeholder:"Enter a strong passphrase",onChange:_=>l.onChange(_),onBlur:()=>y(u,{...a(u),passphrase:!0},!0),get isValid(){return a(v).valid},get touched(){return a(u).passphrase},get errors(){return a(v).errors},successMessage:"Strong passphrase"});var g=d(i,2);{let _=Me(()=>a(h)?[]:["Passphrases do not match"]);nr(g,{label:"Confirm Passphrase",get value(){return l.confirmValue},placeholder:"Confirm your passphrase",onChange:T=>l.onConfirmChange(T),onBlur:()=>y(u,{...a(u),confirm:!0},!0),get isValid(){return a(h)},get touched(){return a(u).confirm},get errors(){return a(_)},successMessage:"Passphrases match"})}n(f),b(m,f),Ke()}var wn=E('<code class="text-xs text-foreground break-all font-mono"> </code>'),kn=E('<div class="text-xs text-muted-foreground font-mono"></div>'),En=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg> Hide Key',1),Sn=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Show Key',1),An=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Copied!',1),In=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy Key',1),Bn=E('<div class="space-y-6"><div class="bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-lg p-4"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="flex-1"><h3 class="text-sm font-semibold text-red-900 dark:text-red-100 mb-1">Critical Security Warning</h3> <p class="text-xs text-red-800 dark:text-red-200">Your private key (nsec) is the only way to access your account. Anyone with access to this key has full control of your identity. Never share it with anyone and store it securely offline.</p></div></div></div> <div class="space-y-4"><div><h3 class="text-sm font-medium text-foreground mb-1">Your Private Key (nsec)</h3> <p class="text-xs text-muted-foreground">You are logged in with a private key signer. Save this key somewhere safe.</p></div> <div class="space-y-3"><div class="relative"><div class="bg-neutral-100 dark:bg-card border border rounded-lg p-4"><!></div></div> <div class="flex gap-2"><button class="flex-1 px-4 py-2 bg-neutral-200 dark:bg-muted text-muted-foreground rounded-lg hover:bg-neutral-300 dark:hover:bg-muted transition-colors text-sm font-medium flex items-center justify-center gap-2"><!></button> <button class="flex-1 px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <p class="text-xs text-muted-foreground text-center">Make sure nobody is watching your screen before revealing your key</p></div></div> <div class="bg-neutral-50 dark:bg-card border border rounded-lg p-4"><h4 class="text-sm font-medium text-foreground mb-2">Security Best Practices</h4> <ul class="space-y-2 text-xs text-muted-foreground"><li class="flex items-start gap-2"><svg class="w-4 h-4 text-primary mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Write down your nsec on paper and store it in a safe place</span></li> <li class="flex items-start gap-2"><svg class="w-4 h-4 text-primary mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Never share your nsec via email, messaging apps, or websites</span></li> <li class="flex items-start gap-2"><svg class="w-4 h-4 text-primary mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Consider using a browser extension signer for better security</span></li> <li class="flex items-start gap-2"><svg class="w-4 h-4 text-primary mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Use the "Create Backup" tab to create encrypted shards with trusted contacts</span></li></ul></div></div>'),Tn=E('<div class="w-16 h-16 bg-green-100 dark:bg-green-950/30 rounded-full flex items-center justify-center mb-4"><svg class="w-8 h-8 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>'),Mn=E('<div class="w-16 h-16 bg-red-100 dark:bg-red-950/30 rounded-full flex items-center justify-center mb-4"><svg class="w-8 h-8 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div>'),Cn=E('<div class="w-16 h-16 bg-blue-100 dark:bg-blue-950/30 rounded-full flex items-center justify-center mb-4 animate-spin"><svg class="w-8 h-8 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></div>'),Rn=E('<p class="text-sm text-muted-foreground"> </p>'),Nn=E('<p class="text-sm text-red-600 dark:text-red-400 mt-2 text-center max-w-md"> </p>'),Ln=E('<button class="mt-6 px-4 py-2 bg-neutral-200 dark:bg-muted text-muted-foreground rounded-lg hover:bg-neutral-300 dark:hover:bg-muted transition-colors">Close</button>'),Fn=E('<div class="flex flex-col items-center justify-center py-12"><!> <h3 class="text-lg font-semibold text-foreground mb-2"> </h3> <!> <!> <!></div>'),Dn=E('<button class="w-full px-4 py-3 bg-primary text-foreground rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center justify-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Create Backup</button>'),Pn=E("<!> <!> <!> <!> <!>",1),Un=E('<div class="space-y-6"><!></div>'),Hn=E('<div class="space-y-6"><div class="flex gap-2 p-1 bg-neutral-100 dark:bg-card rounded-lg"><button>View Key</button> <button>Create Backup</button></div> <!></div>'),On=E('<div class="text-center py-8"><div class="w-16 h-16 bg-neutral-100 dark:bg-card rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-sm font-medium text-foreground mb-2">Not Using Private Key Signer</h3> <p class="text-xs text-muted-foreground max-w-sm mx-auto">You are not logged in with a private key signer. This section is only available for users who logged in with an nsec.</p></div>');function jn(m,l){ze(l,!0);const u=2,v=3,h=5;let f=pe("view"),p=pe(!1),i=pe(!1),g=pe("setup"),_=pe(2),T=pe(3),C=pe(Qe([])),M=pe(""),w=pe(""),S=pe(!1),A=pe(Qe({status:"idle",currentStep:0,totalSteps:0,message:""}));const P=Me(()=>He.signer instanceof Lt),G=Me(()=>!a(P)||!He.signer?null:He.signer.nsec);let $=Me(()=>a(C).length>=a(T)&&a(S));async function V(){if(a(G))try{await navigator.clipboard.writeText(a(G)),y(i,!0),setTimeout(()=>{y(i,!1)},2e3)}catch(W){console.error("Failed to copy:",W)}}function Q(){y(p,!a(p))}function B(){return Array.from(He.pool?.relays.values()||[]).map(W=>W.url).slice(0,h)}function R(){if(!a(P)||!He.signer)throw new $e(je.NO_PRIVATE_KEY,"No private key signer available");const fe=He.signer.privateKey;if(!fe)throw new $e(je.NO_PRIVATE_KEY,"Private key not found in signer");return fe}async function N(){if(!He.$currentUser)throw new $e(je.NO_USER,"No authenticated user found");try{y(g,"progress");const W=R(),fe=a(T)+2;y(A,{status:"creating-shards",currentStep:0,totalSteps:fe,message:"Starting backup creation..."},!0);const _e=await Ua(W,a(M),{threshold:a(_),totalShards:a(T)});y(A,{...a(A),currentStep:2,status:"publishing",message:"Publishing shards..."},!0);const Te=[],L=B(),I=a(C).slice(0,a(T));for(let z=0;z<_e.length;z++){const re=_e[z],K=I[z];y(A,{...a(A),currentStep:2+z,message:`Publishing shard ${z+1} of ${a(T)}...`},!0);const Y=z===0?0:z*v;if(Y>u)Ga(re,K.pubkey,L);else{const he=await Ya(He,{shard:re,recipientPubkey:K.pubkey,createdAtOffset:Y,relays:L});Te.push(he)}}y(A,{...a(A),currentStep:a(T)+1,message:"Publishing metadata..."},!0),await Za(He,Te,a(_),W),y(A,{...a(A),status:"complete",currentStep:fe,message:"Backup created successfully!"},!0)}catch(W){console.error("Backup creation failed:",W);const fe=W instanceof $e?W:new $e(je.UNKNOWN_ERROR,W instanceof Error?W.message:"Unknown error",W);y(A,{...a(A),status:"error",message:fe.getUserMessage(),error:fe.message},!0)}}function j(){y(g,"setup"),y(A,{status:"idle",currentStep:0,totalSteps:0,message:""},!0)}var ve=Ge(),ce=Pe(ve);{var oe=W=>{var fe=Hn(),_e=s(fe),Te=s(_e);Te.__click=()=>y(f,"view");var L=d(Te,2);L.__click=()=>y(f,"backup"),n(_e);var I=d(_e,2);{var z=K=>{var Y=Bn(),he=d(s(Y),2),Se=d(s(he),2),be=s(Se),O=s(be),q=s(O);{var se=D=>{var H=wn(),Z=s(H,!0);n(H),X(()=>F(Z,a(G))),b(D,H)},xe=D=>{var H=kn();H.textContent="‚Ä¢".repeat(63),b(D,H)};U(q,D=>{a(p)?D(se):D(xe,!1)})}n(O),n(be);var we=d(be,2),Ce=s(we);Ce.__click=Q;var ke=s(Ce);{var ee=D=>{var H=En();Ie(),b(D,H)},me=D=>{var H=Sn();Ie(),b(D,H)};U(ke,D=>{a(p)?D(ee):D(me,!1)})}n(Ce);var ie=d(Ce,2);ie.__click=V;var J=s(ie);{var ge=D=>{var H=An();Ie(),b(D,H)},ae=D=>{var H=In();Ie(),b(D,H)};U(J,D=>{a(i)?D(ge):D(ae,!1)})}n(ie),n(we),Ie(2),n(Se),n(he),Ie(2),n(Y),X(()=>ie.disabled=!a(p)),b(K,Y)},re=K=>{var Y=Un(),he=s(Y);{var Se=O=>{var q=Fn(),se=s(q);{var xe=D=>{var H=Tn();b(D,H)},we=D=>{var H=Ge(),Z=Pe(H);{var de=Be=>{var ye=Mn();b(Be,ye)},Ee=Be=>{var ye=Cn();b(Be,ye)};U(Z,Be=>{a(A).status==="error"?Be(de):Be(Ee,!1)},!0)}b(D,H)};U(se,D=>{a(A).status==="complete"?D(xe):D(we,!1)})}var Ce=d(se,2),ke=s(Ce,!0);n(Ce);var ee=d(Ce,2);{var me=D=>{var H=Rn(),Z=s(H);n(H),X(()=>F(Z,`Step ${a(A).currentStep??""} of ${a(A).totalSteps??""}`)),b(D,H)};U(ee,D=>{a(A).status!=="complete"&&a(A).status!=="error"&&D(me)})}var ie=d(ee,2);{var J=D=>{var H=Nn(),Z=s(H,!0);n(H),X(()=>F(Z,a(A).error)),b(D,H)};U(ie,D=>{a(A).status==="error"&&a(A).error&&D(J)})}var ge=d(ie,2);{var ae=D=>{var H=Ln();H.__click=j,b(D,H)};U(ge,D=>{(a(A).status==="complete"||a(A).status==="error")&&D(ae)})}n(q),X(()=>F(ke,a(A).message)),b(O,q)},be=O=>{var q=Pn(),se=Pe(q);fr(se,{title:"Security Warning",description:"Key backup splits your private key into encrypted pieces. Choose trustworthy contacts and a strong passphrase you won't forget.",variant:"danger"});var xe=d(se,2);vn(xe,{get threshold(){return a(_)},get totalShards(){return a(T)},onThresholdChange:ie=>y(_,ie,!0),onTotalShardsChange:ie=>y(T,ie,!0),maxShards:10});var we=d(xe,2);ln(we,{get trustees(){return a(C)},get maxTrustees(){return a(T)},onTrusteesChange:ie=>y(C,ie,!0)});var Ce=d(we,2);{var ke=ie=>{yn(ie,{get value(){return a(M)},get confirmValue(){return a(w)},onChange:J=>y(M,J,!0),onConfirmChange:J=>y(w,J,!0),onValidChange:J=>y(S,J,!0)})};U(Ce,ie=>{a(C).length>=a(T)&&ie(ke)})}var ee=d(Ce,2);{var me=ie=>{var J=Dn();J.__click=N,b(ie,J)};U(ee,ie=>{a($)&&ie(me)})}b(O,q)};U(he,O=>{a(g)==="progress"?O(Se):O(be,!1)})}n(Y),b(K,Y)};U(I,K=>{a(f)==="view"?K(z):K(re,!1)})}n(fe),X(()=>{Fe(Te,1,`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${a(f)==="view"?"bg-white dark:bg-muted text-foreground shadow-sm":"text-muted-foreground hover:text-neutral-900 dark:hover:text-foreground"}`),Fe(L,1,`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${a(f)==="backup"?"bg-white dark:bg-muted text-foreground shadow-sm":"text-muted-foreground hover:text-neutral-900 dark:hover:text-foreground"}`)}),b(W,fe)},te=W=>{var fe=On();b(W,fe)};U(ce,W=>{a(P)&&a(G)?W(oe):W(te,!1)})}b(m,ve),Ke()}Xe(["click"]);var $n=E('<div class="flex flex-col items-center justify-center py-12 gap-3"><div class="w-10 h-10 border-4 border border-t-orange-500 rounded-full animate-spin"></div> <p class="text-sm text-muted-foreground">Loading cache statistics...</p></div>'),Vn=E('<div class="flex flex-col items-center justify-center py-12 gap-3"><p class="text-sm text-red-500"> </p> <button class="px-4 py-2 bg-primary/10 border border-primary/30 rounded-lg text-sm text-primary hover:bg-primary/20 transition-all">Retry</button></div>'),zn=E('<div class="bg-neutral-100 dark:bg-card border border rounded-lg p-3 flex items-center justify-between"><div class="flex items-center gap-3"><span class="font-mono text-sm text-primary font-semibold min-w-[3rem]"> </span> <span class="text-sm text-muted-foreground"> </span></div> <div class="text-sm font-semibold text-foreground"> </div></div>'),Kn=E('<div class="space-y-6"><div><h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Cache Overview</h3> <div class="grid grid-cols-2 gap-3"><div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Total Events</div></div> <div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Profiles</div></div> <div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Event Tags</div></div> <div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Event-Relay Links</div></div></div></div> <div><h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Events by Kind</h3> <div class="space-y-2"></div></div> <div><h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Other Cache Tables</h3> <div class="grid grid-cols-3 gap-3"><div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Decrypted Events</div></div> <div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Unpublished Events</div></div> <div class="bg-neutral-100 dark:bg-card border border rounded-xl p-4 text-center"><div class="text-2xl font-bold text-primary mb-1"> </div> <div class="text-xs text-muted-foreground font-medium">Cache Data</div></div></div></div></div>'),Yn=E('<div class="space-y-6"><div class="flex items-center justify-between"><div><h2 class="text-lg font-semibold text-foreground">Cache Statistics</h2> <p class="text-sm text-muted-foreground mt-1">Local database cache information</p></div> <button class="p-2 hover:bg-neutral-200/50 dark:hover:bg-muted/30 rounded-lg transition-all" title="Refresh"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div> <!></div>');function Gn(m,l){ze(l,!0);let u=pe(null),v=pe(!0),h=pe(null);async function f(){y(v,!0),y(h,null);try{const w=He.cacheAdapter;if(!w)throw new Error("Cache adapter not found");if(!w.getCacheStats)throw new Error("getCacheStats method not available");y(u,await w.getCacheStats(),!0)}catch(w){y(h,w instanceof Error?w.message:"Unknown error occurred",!0),console.error("Failed to load cache stats:",w)}finally{y(v,!1)}}dt(()=>{f()});function p(w){return{0:"Profile Metadata",1:"Short Text Note",3:"Contacts",4:"Encrypted DM",5:"Event Deletion",6:"Repost",7:"Reaction",9735:"Zap",9321:"NIP-61 Nutzap",1e4:"Mute List",10002:"Relay List",3e4:"People List",30008:"Profile Badges",30009:"Badge Definition",37375:"NIP-60 Wallet",7375:"Cashu Token"}[w]||`Kind ${w}`}var i=Yn(),g=s(i),_=d(s(g),2);_.__click=f,n(g);var T=d(g,2);{var C=w=>{var S=$n();b(w,S)},M=w=>{var S=Ge(),A=Pe(S);{var P=$=>{var V=Vn(),Q=s(V),B=s(Q);n(Q);var R=d(Q,2);R.__click=f,n(V),X(()=>F(B,`‚ùå ${a(h)??""}`)),b($,V)},G=$=>{var V=Ge(),Q=Pe(V);{var B=R=>{var N=Kn(),j=s(N),ve=d(s(j),2),ce=s(ve),oe=s(ce),te=s(oe,!0);n(oe),Ie(2),n(ce);var W=d(ce,2),fe=s(W),_e=s(fe,!0);n(fe),Ie(2),n(W);var Te=d(W,2),L=s(Te),I=s(L,!0);n(L),Ie(2),n(Te);var z=d(Te,2),re=s(z),K=s(re,!0);n(re),Ie(2),n(z),n(ve),n(j);var Y=d(j,2),he=d(s(Y),2);Oe(he,21,()=>Object.entries(a(u).eventsByKind).sort((ie,J)=>J[1]-ie[1]),Ve,(ie,J)=>{var ge=Me(()=>hr(a(J),2));let ae=()=>a(ge)[0],D=()=>a(ge)[1];var H=zn(),Z=s(H),de=s(Z),Ee=s(de,!0);n(de);var Be=d(de,2),ye=s(Be,!0);n(Be),n(Z);var Ue=d(Z,2),r=s(Ue,!0);n(Ue),n(H),X((e,t)=>{F(Ee,ae()),F(ye,e),F(r,t)},[()=>p(Number(ae())),()=>D().toLocaleString()]),b(ie,H)}),n(he),n(Y);var Se=d(Y,2),be=d(s(Se),2),O=s(be),q=s(O),se=s(q,!0);n(q),Ie(2),n(O);var xe=d(O,2),we=s(xe),Ce=s(we,!0);n(we),Ie(2),n(xe);var ke=d(xe,2),ee=s(ke),me=s(ee,!0);n(ee),Ie(2),n(ke),n(be),n(Se),n(N),X((ie,J,ge,ae,D,H,Z)=>{F(te,ie),F(_e,J),F(I,ge),F(K,ae),F(se,D),F(Ce,H),F(me,Z)},[()=>a(u).totalEvents.toLocaleString(),()=>a(u).totalProfiles.toLocaleString(),()=>a(u).totalEventTags.toLocaleString(),()=>a(u).eventRelays.toLocaleString(),()=>a(u).totalDecryptedEvents.toLocaleString(),()=>a(u).totalUnpublishedEvents.toLocaleString(),()=>a(u).cacheData.toLocaleString()]),b(R,N)};U(Q,R=>{a(u)&&R(B)},!0)}b($,V)};U(A,$=>{a(h)?$(P):$(G,!1)},!0)}b(w,S)};U(T,w=>{a(v)?w(C):w(M,!1)})}n(i),b(m,i),Ke()}Xe(["click"]);var qn=E('<button type="button"><div class="flex flex-col items-center gap-2"><span class="text-xl">‚ö°</span> <span class="text-sm font-bold"> </span></div></button>'),Xn=E('<div class="flex gap-2"><input type="number" placeholder="Enter custom amount..." class="flex-1 px-4 py-3 bg-neutral-100 dark:bg-muted border-2 border-primary dark:border-primary rounded-xl text-foreground placeholder-neutral-500 dark:placeholder-neutral-400 focus:outline-none font-semibold"/> <button class="px-6 py-3 bg-gradient-to-br from-primary-600 to-primary-700 hover:opacity-90 text-foreground font-semibold rounded-xl transition-all" type="button">Set</button> <button class="px-6 py-3 bg-neutral-100 dark:bg-muted hover:bg-neutral-200 dark:hover:bg-muted text-foreground font-semibold rounded-xl transition-all" type="button">Cancel</button></div>'),Wn=E('<button class="w-full px-4 py-3 bg-neutral-100 dark:bg-muted hover:bg-neutral-200 dark:hover:bg-muted border-2 border-dashed border dark:border rounded-xl text-muted-foreground font-semibold transition-all flex items-center justify-center gap-2" type="button"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Custom Amount</button>'),Jn=E('<div class="space-y-6"><div><h3 class="text-lg font-semibold text-foreground mb-4">Default Zap Amount</h3> <p class="text-sm text-muted-foreground mb-4">Choose the default amount for quick zaps. Long-press the zap button to choose a custom amount.</p> <div class="grid grid-cols-4 gap-3"></div> <div class="mt-4"><!></div></div> <div class="p-4 bg-neutral-100 dark:bg-card border border rounded-xl"><div class="flex items-start gap-3"><div class="mt-0.5"><svg class="w-5 h-5 text-primary dark:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1"><h4 class="text-sm font-semibold text-foreground mb-1">How to Zap</h4> <ul class="text-sm text-muted-foreground space-y-1"><li><strong>Tap:</strong> </li> <li><strong>Long-press:</strong> Choose custom amount from modal</li></ul></div></div></div> <div class="p-4 bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800/30 rounded-xl"><div class="flex items-center gap-2 mb-2"><span class="text-2xl">‚ö°</span> <h4 class="text-sm font-semibold text-primary-900 dark:text-primary-100">Current Default</h4></div> <p class="text-3xl font-bold bg-gradient-to-r from-primary-600 to-primary-700 bg-clip-text text-transparent"> </p></div></div>');function Zn(m,l){ze(l,!0);const u=[10,21,50,100,500,1e3,2100,5e3];let v=pe(""),h=pe(!1);function f(j){return j>=1e3?`${(j/1e3).toFixed(j%1e3===0?0:1)}K`:j.toString()}function p(){const j=Number.parseInt(a(v));!Number.isNaN(j)&&j>0&&(Le.updateZap({defaultAmount:j}),y(v,""),y(h,!1))}function i(j){j.key==="Enter"?p():j.key==="Escape"&&(y(v,""),y(h,!1))}var g=Jn(),_=s(g),T=d(s(_),4);Oe(T,21,()=>u,Ve,(j,ve)=>{var ce=qn();ce.__click=()=>Le.updateZap({defaultAmount:a(ve)});var oe=s(ce),te=d(s(oe),2),W=s(te,!0);n(te),n(oe),n(ce),X(fe=>{Fe(ce,1,`relative overflow-hidden rounded-xl p-4 transition-all duration-200 ${Le.zap.defaultAmount===a(ve)?"bg-gradient-to-br from-primary-600 to-primary-700 dark:bg-primary text-foreground shadow-lg shadow-primary/30 dark:shadow-primary/50 scale-105":"bg-neutral-100 dark:bg-muted hover:bg-neutral-200 dark:hover:bg-muted text-foreground hover:scale-105"}`),F(W,fe)},[()=>f(a(ve))]),b(j,ce)}),n(T);var C=d(T,2),M=s(C);{var w=j=>{var ve=Xn(),ce=s(ve);qe(ce),ce.__keydown=i,Nt(ce,!0);var oe=d(ce,2);oe.__click=p;var te=d(oe,2);te.__click=()=>{y(v,""),y(h,!1)},n(ve),ft(ce,()=>a(v),W=>y(v,W)),b(j,ve)},S=j=>{var ve=Wn();ve.__click=()=>y(h,!0),b(j,ve)};U(M,j=>{a(h)?j(w):j(S,!1)})}n(C),n(_);var A=d(_,2),P=s(A),G=d(s(P),2),$=d(s(G),2),V=s($),Q=d(s(V));n(V),Ie(2),n($),n(G),n(P),n(A);var B=d(A,2),R=d(s(B),2),N=s(R);n(R),n(B),n(g),X(j=>{F(Q,` Send default zap amount (${Le.zap.defaultAmount??""} sats)`),F(N,`${j??""} sats`)},[()=>Le.zap.defaultAmount.toLocaleString()]),b(m,g),Ke()}Xe(["click","keydown"]);var Qn=E('<div class="p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm"> </div>'),eo=E('<div class="flex gap-2"><!> <!></div> <!>',1),to=E('<span class="text-primary-foreground text-sm font-bold">‚úì</span>'),ro=E('<img class="w-full h-full object-cover"/>'),ao=E('<span class="text-2xl">üè¶</span>'),no=E('<div class="text-sm text-muted-foreground mb-1 line-clamp-2"> </div>'),oo=E('<div class="text-xs text-yellow-500 mt-1"> </div>'),so=E("<div> </div>"),io=E('<button><div class="flex items-center pt-0.5"><div><!></div></div> <div class="w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden bg-primary/20 flex items-center justify-center"><!></div> <div class="flex-1 min-w-0"><div class="font-semibold text-foreground mb-1"> </div> <!> <div class="text-xs font-mono text-muted-foreground truncate"> </div> <!> <!></div></button>'),lo=E('<div class="space-y-3"></div>'),uo=E('<div class="flex flex-col items-center justify-center py-12 px-4 text-center bg-muted/20 border border-dashed border-border rounded-lg"><div class="text-5xl mb-4">üîç</div> <p class="text-muted-foreground">Discovering mints from the network...</p> <p class="text-sm text-muted-foreground/60 mt-1">Add custom mints above or wait for discovery</p></div>'),co=E('<div class="flex items-start gap-4 p-4 bg-primary/15 border border-primary/50 rounded-lg"><div class="w-12 h-12 flex-shrink-0 rounded-lg bg-primary/20 flex items-center justify-center"><span class="text-2xl">üè¶</span></div> <div class="flex-1 min-w-0"><div class="font-semibold text-foreground mb-1"> </div> <div class="text-xs font-mono text-muted-foreground truncate"> </div></div> <button class="w-8 h-8 flex-shrink-0 self-center flex items-center justify-center bg-red-500/20 border border-red-500/30 rounded text-red-400 font-bold hover:bg-red-500/30 transition-colors">‚úï</button></div>'),vo=E('<div class="pt-2"><h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3">Custom Mints</h4> <div class="space-y-3"></div></div>'),fo=E('<div class="flex items-center justify-center gap-2 p-3 bg-primary/10 border border-primary/20 rounded-lg text-sm font-semibold"><span class="text-primary">‚úì</span> </div>'),po=E('<!> <div class="flex-1 overflow-y-auto px-6 py-4 space-y-4"><div class="flex gap-3 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-lg"><div class="text-lg flex-shrink-0">‚ÑπÔ∏è</div> <div class="text-sm text-muted-foreground">Mints are custodial services that issue ecash tokens. Select multiple mints to spread risk.</div></div> <div class="flex flex-col gap-3 p-4 bg-muted/30 border border-border rounded-lg"><button class="flex items-center gap-2 text-left font-semibold text-foreground"><span class="flex items-center justify-center w-6 h-6 bg-primary/20 text-primary rounded text-lg font-bold"> </span> Add Custom Mint</button> <!></div> <!> <!></div> <div class="px-6 py-4 border-t border-border space-y-3"><!> <div class="flex gap-3"><!> <!></div></div>',1),ho=E('<div class="p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm"> </div>'),mo=E('<div class="flex gap-2"><!> <!></div> <!>',1),go=E('<span class="text-primary-foreground text-sm font-bold">‚úì</span>'),xo=E('<img class="w-full h-full object-cover"/>'),bo=E('<span class="text-2xl">üè¶</span>'),_o=E('<div class="text-sm text-muted-foreground mb-1 line-clamp-2"> </div>'),yo=E('<div class="text-xs text-yellow-500 mt-1"> </div>'),wo=E("<div> </div>"),ko=E('<button><div class="flex items-center pt-0.5"><div><!></div></div> <div class="w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden bg-primary/20 flex items-center justify-center"><!></div> <div class="flex-1 min-w-0"><div class="font-semibold text-foreground mb-1"> </div> <!> <div class="text-xs font-mono text-muted-foreground truncate"> </div> <!> <!></div></button>'),Eo=E('<div class="space-y-3"></div>'),So=E('<div class="flex flex-col items-center justify-center py-12 px-4 text-center bg-muted/20 border border-dashed border-border rounded-lg"><div class="text-5xl mb-4">üîç</div> <p class="text-muted-foreground">Discovering mints from the network...</p> <p class="text-sm text-muted-foreground/60 mt-1">Add custom mints above or wait for discovery</p></div>'),Ao=E('<div class="flex items-start gap-4 p-4 bg-primary/15 border border-primary/50 rounded-lg"><div class="w-12 h-12 flex-shrink-0 rounded-lg bg-primary/20 flex items-center justify-center"><span class="text-2xl">üè¶</span></div> <div class="flex-1 min-w-0"><div class="font-semibold text-foreground mb-1"> </div> <div class="text-xs font-mono text-muted-foreground truncate"> </div></div> <button class="w-8 h-8 flex-shrink-0 self-center flex items-center justify-center bg-red-500/20 border border-red-500/30 rounded text-red-400 font-bold hover:bg-red-500/30 transition-colors">‚úï</button></div>'),Io=E('<div class="pt-2"><h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3">Custom Mints</h4> <div class="space-y-3"></div></div>'),Bo=E('<div class="flex items-center justify-center gap-2 p-3 bg-primary/10 border border-primary/20 rounded-lg text-sm font-semibold"><span class="text-primary">‚úì</span> </div>'),To=E("<!> <!> <!>",1),Mo=E('<!> <div class="flex-1 overflow-y-auto px-4 space-y-4 pb-4"><div class="flex gap-3 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-lg"><div class="text-lg flex-shrink-0">‚ÑπÔ∏è</div> <div class="text-sm text-muted-foreground">Mints are custodial services that issue ecash tokens. Select multiple mints to spread risk.</div></div> <div class="flex flex-col gap-3 p-4 bg-muted/30 border border-border rounded-lg"><button class="flex items-center gap-2 text-left font-semibold text-foreground"><span class="flex items-center justify-center w-6 h-6 bg-primary/20 text-primary rounded text-lg font-bold"> </span> Add Custom Mint</button> <!></div> <!> <!></div> <!>',1);function Co(m,l){ze(l,!0);let u=gt(l,"open",15,!1);const v=new yr("(min-width: 768px)"),h=br(He,{network:"mainnet",timeout:0});let f=pe(Qe([])),p=pe(Qe(new Set)),i=pe(!1),g=pe(""),_=pe("");dt(()=>{const B=h.subscribe(R=>{y(f,R.mints,!0)});return()=>{B(),h.getState().stop()}});function T(B){try{return new URL(B).hostname}catch{return B}}function C(B){const R=new Set(a(p));R.has(B)?R.delete(B):R.add(B),y(p,R,!0)}function M(){const B=a(g).trim();try{const N=new URL(B);if(N.protocol!=="https:"&&N.protocol!=="http:"){y(_,"Please use https:// or http:// URL");return}}catch{y(_,"Please enter a valid mint URL");return}if(a(p).has(B)){y(_,"This mint has already been selected");return}if(a(f).some(N=>N.url===B)){y(_,"This mint is already in the list below");return}const R=new Set(a(p));R.add(B),y(p,R,!0),y(g,""),y(i,!1),y(_,"")}function w(){y(i,!a(i)),y(g,""),y(_,"")}function S(){a(p).size!==0&&(l.onSelectMints(Array.from(a(p))),u(!1))}function A(){u(!1),l.onClose()}const P=Me(()=>Array.from(a(p)).filter(B=>!a(f).some(R=>R.url===B)));var G=Ge(),$=Pe(G);{var V=B=>{var R=Ge(),N=Pe(R);tt(N,()=>Er,(j,ve)=>{ve(j,{get open(){return u()},onOpenChange:ce=>{ce||A()},children:(ce,oe)=>{var te=Ge(),W=Pe(te);tt(W,()=>wr,(fe,_e)=>{_e(fe,{class:"max-w-2xl max-h-[90vh] flex flex-col p-0",children:(Te,L)=>{var I=po(),z=Pe(I);tt(z,()=>Tr,(ae,D)=>{D(ae,{class:"px-6 py-4 border-b border-border",children:(H,Z)=>{var de=Ge(),Ee=Pe(de);tt(Ee,()=>kr,(Be,ye)=>{ye(Be,{children:(Ue,r)=>{Ie();var e=et("Browse Mints");b(Ue,e)},$$slots:{default:!0}})}),b(H,de)},$$slots:{default:!0}})});var re=d(z,2),K=d(s(re),2),Y=s(K);Y.__click=w;var he=s(Y),Se=s(he,!0);n(he),Ie(),n(Y);var be=d(Y,2);{var O=ae=>{var D=eo(),H=Pe(D),Z=s(H);Ot(Z,{type:"url",placeholder:"https://mint.example.com",class:"flex-1 font-mono text-sm",get value(){return a(g)},set value(ye){y(g,ye,!0)}});var de=d(Z,2);{let ye=Me(()=>!a(g).trim());ct(de,{onclick:M,get disabled(){return a(ye)},children:(Ue,r)=>{Ie();var e=et("Add");b(Ue,e)},$$slots:{default:!0}})}n(H);var Ee=d(H,2);{var Be=ye=>{var Ue=Qn(),r=s(Ue,!0);n(Ue),X(()=>F(r,a(_))),b(ye,Ue)};U(Ee,ye=>{a(_)&&ye(Be)})}b(ae,D)};U(be,ae=>{a(i)&&ae(O)})}n(K);var q=d(K,2);{var se=ae=>{var D=lo();Oe(D,21,()=>a(f),Ve,(H,Z)=>{var de=io();de.__click=()=>C(a(Z).url);var Ee=s(de),Be=s(Ee),ye=s(Be);{var Ue=Ne=>{var De=to();b(Ne,De)};U(ye,Ne=>{a(p).has(a(Z).url)&&Ne(Ue)})}n(Be),n(Ee);var r=d(Ee,2),e=s(r);{var t=Ne=>{var De=ro();X(()=>{st(De,"src",a(Z).icon),st(De,"alt",a(Z).name||a(Z).url)}),b(Ne,De)},o=Ne=>{var De=ao();b(Ne,De)};U(e,Ne=>{a(Z).icon?Ne(t):Ne(o,!1)})}n(r);var c=d(r,2),x=s(c),k=s(x,!0);n(x);var le=d(x,2);{var Re=Ne=>{var De=no(),rt=s(De,!0);n(De),X(()=>F(rt,a(Z).description)),b(Ne,De)};U(le,Ne=>{a(Z).description&&Ne(Re)})}var Ae=d(le,2),ue=s(Ae,!0);n(Ae);var ne=d(Ae,2);{var Je=Ne=>{var De=oo(),rt=s(De);n(De),X(()=>F(rt,`‚≠ê Recommended by ${a(Z).recommendations.length??""} user${a(Z).recommendations.length===1?"":"s"}`)),b(Ne,De)};U(ne,Ne=>{a(Z).recommendations.length>0&&Ne(Je)})}var Tt=d(ne,2);{var lt=Ne=>{var De=so(),rt=s(De,!0);n(De),X(()=>{Fe(De,1,`text-xs mt-1 ${a(Z).isOnline?"text-green-400":"text-red-400"}`),F(rt,a(Z).isOnline?"üü¢ Online":"üî¥ Offline")}),b(Ne,De)};U(Tt,Ne=>{a(Z).isOnline!==void 0&&Ne(lt)})}n(c),n(de),X((Ne,De,rt)=>{Fe(de,1,`w-full flex items-start gap-4 p-4 bg-muted/30 border rounded-lg text-left transition-all hover:bg-muted/50 hover:border-primary/30 ${Ne??""}`),Fe(Be,1,`w-6 h-6 border-2 rounded flex items-center justify-center transition-all ${De??""}`),F(k,rt),F(ue,a(Z).url)},[()=>a(p).has(a(Z).url)?"bg-primary/15 border-primary/50":"border-border",()=>a(p).has(a(Z).url)?"bg-primary border-primary":"border-muted-foreground/30 bg-muted/50",()=>a(Z).name||T(a(Z).url)]),b(H,de)}),n(D),b(ae,D)},xe=ae=>{var D=uo();b(ae,D)};U(q,ae=>{a(f).length>0?ae(se):ae(xe,!1)})}var we=d(q,2);{var Ce=ae=>{var D=vo(),H=d(s(D),2);Oe(H,21,()=>a(P),Ve,(Z,de)=>{var Ee=co(),Be=d(s(Ee),2),ye=s(Be),Ue=s(ye,!0);n(ye);var r=d(ye,2),e=s(r,!0);n(r),n(Be);var t=d(Be,2);t.__click=()=>C(a(de)),n(Ee),X(o=>{F(Ue,o),F(e,a(de))},[()=>T(a(de))]),b(Z,Ee)}),n(H),n(D),b(ae,D)};U(we,ae=>{a(P).length>0&&ae(Ce)})}n(re);var ke=d(re,2),ee=s(ke);{var me=ae=>{var D=fo(),H=d(s(D));n(D),X(()=>F(H,` ${a(p).size??""} mint${a(p).size===1?"":"s"} selected`)),b(ae,D)};U(ee,ae=>{a(p).size>0&&ae(me)})}var ie=d(ee,2),J=s(ie);ct(J,{variant:"outline",onclick:A,class:"flex-1",children:(ae,D)=>{Ie();var H=et("Cancel");b(ae,H)},$$slots:{default:!0}});var ge=d(J,2);{let ae=Me(()=>a(p).size===0);ct(ge,{onclick:S,get disabled(){return a(ae)},class:"flex-1",children:(D,H)=>{Ie();var Z=et("Add Selected Mints");b(D,Z)},$$slots:{default:!0}})}n(ie),n(ke),X(()=>F(Se,a(i)?"‚àí":"+")),b(Te,I)},$$slots:{default:!0}})}),b(ce,te)},$$slots:{default:!0}})}),b(B,R)},Q=B=>{var R=Ge(),N=Pe(R);tt(N,()=>Ir,(j,ve)=>{ve(j,{get open(){return u()},onOpenChange:ce=>{ce||A()},children:(ce,oe)=>{var te=Ge(),W=Pe(te);tt(W,()=>Sr,(fe,_e)=>{_e(fe,{class:"max-h-[90vh] flex flex-col",children:(Te,L)=>{var I=Mo(),z=Pe(I);tt(z,()=>Mr,(ee,me)=>{me(ee,{class:"text-left",children:(ie,J)=>{var ge=Ge(),ae=Pe(ge);tt(ae,()=>Ar,(D,H)=>{H(D,{children:(Z,de)=>{Ie();var Ee=et("Browse Mints");b(Z,Ee)},$$slots:{default:!0}})}),b(ie,ge)},$$slots:{default:!0}})});var re=d(z,2),K=d(s(re),2),Y=s(K);Y.__click=w;var he=s(Y),Se=s(he,!0);n(he),Ie(),n(Y);var be=d(Y,2);{var O=ee=>{var me=mo(),ie=Pe(me),J=s(ie);Ot(J,{type:"url",placeholder:"https://mint.example.com",class:"flex-1 font-mono text-sm",get value(){return a(g)},set value(H){y(g,H,!0)}});var ge=d(J,2);{let H=Me(()=>!a(g).trim());ct(ge,{onclick:M,get disabled(){return a(H)},children:(Z,de)=>{Ie();var Ee=et("Add");b(Z,Ee)},$$slots:{default:!0}})}n(ie);var ae=d(ie,2);{var D=H=>{var Z=ho(),de=s(Z,!0);n(Z),X(()=>F(de,a(_))),b(H,Z)};U(ae,H=>{a(_)&&H(D)})}b(ee,me)};U(be,ee=>{a(i)&&ee(O)})}n(K);var q=d(K,2);{var se=ee=>{var me=Eo();Oe(me,21,()=>a(f),Ve,(ie,J)=>{var ge=ko();ge.__click=()=>C(a(J).url);var ae=s(ge),D=s(ae),H=s(D);{var Z=ue=>{var ne=go();b(ue,ne)};U(H,ue=>{a(p).has(a(J).url)&&ue(Z)})}n(D),n(ae);var de=d(ae,2),Ee=s(de);{var Be=ue=>{var ne=xo();X(()=>{st(ne,"src",a(J).icon),st(ne,"alt",a(J).name||a(J).url)}),b(ue,ne)},ye=ue=>{var ne=bo();b(ue,ne)};U(Ee,ue=>{a(J).icon?ue(Be):ue(ye,!1)})}n(de);var Ue=d(de,2),r=s(Ue),e=s(r,!0);n(r);var t=d(r,2);{var o=ue=>{var ne=_o(),Je=s(ne,!0);n(ne),X(()=>F(Je,a(J).description)),b(ue,ne)};U(t,ue=>{a(J).description&&ue(o)})}var c=d(t,2),x=s(c,!0);n(c);var k=d(c,2);{var le=ue=>{var ne=yo(),Je=s(ne);n(ne),X(()=>F(Je,`‚≠ê Recommended by ${a(J).recommendations.length??""} user${a(J).recommendations.length===1?"":"s"}`)),b(ue,ne)};U(k,ue=>{a(J).recommendations.length>0&&ue(le)})}var Re=d(k,2);{var Ae=ue=>{var ne=wo(),Je=s(ne,!0);n(ne),X(()=>{Fe(ne,1,`text-xs mt-1 ${a(J).isOnline?"text-green-400":"text-red-400"}`),F(Je,a(J).isOnline?"üü¢ Online":"üî¥ Offline")}),b(ue,ne)};U(Re,ue=>{a(J).isOnline!==void 0&&ue(Ae)})}n(Ue),n(ge),X((ue,ne,Je)=>{Fe(ge,1,`w-full flex items-start gap-4 p-4 bg-muted/30 border rounded-lg text-left transition-all ${ue??""}`),Fe(D,1,`w-6 h-6 border-2 rounded flex items-center justify-center transition-all ${ne??""}`),F(e,Je),F(x,a(J).url)},[()=>a(p).has(a(J).url)?"bg-primary/15 border-primary/50":"border-border",()=>a(p).has(a(J).url)?"bg-primary border-primary":"border-muted-foreground/30 bg-muted/50",()=>a(J).name||T(a(J).url)]),b(ie,ge)}),n(me),b(ee,me)},xe=ee=>{var me=So();b(ee,me)};U(q,ee=>{a(f).length>0?ee(se):ee(xe,!1)})}var we=d(q,2);{var Ce=ee=>{var me=Io(),ie=d(s(me),2);Oe(ie,21,()=>a(P),Ve,(J,ge)=>{var ae=Ao(),D=d(s(ae),2),H=s(D),Z=s(H,!0);n(H);var de=d(H,2),Ee=s(de,!0);n(de),n(D);var Be=d(D,2);Be.__click=()=>C(a(ge)),n(ae),X(ye=>{F(Z,ye),F(Ee,a(ge))},[()=>T(a(ge))]),b(J,ae)}),n(ie),n(me),b(ee,me)};U(we,ee=>{a(P).length>0&&ee(Ce)})}n(re);var ke=d(re,2);tt(ke,()=>Br,(ee,me)=>{me(ee,{class:"pt-2",children:(ie,J)=>{var ge=To(),ae=Pe(ge);{var D=de=>{var Ee=Bo(),Be=d(s(Ee));n(Ee),X(()=>F(Be,` ${a(p).size??""} mint${a(p).size===1?"":"s"} selected`)),b(de,Ee)};U(ae,de=>{a(p).size>0&&de(D)})}var H=d(ae,2);{let de=Me(()=>a(p).size===0);ct(H,{onclick:S,get disabled(){return a(de)},class:"w-full",children:(Ee,Be)=>{Ie();var ye=et("Add Selected Mints");b(Ee,ye)},$$slots:{default:!0}})}var Z=d(H,2);ct(Z,{variant:"outline",onclick:A,class:"w-full",children:(de,Ee)=>{Ie();var Be=et("Cancel");b(de,Be)},$$slots:{default:!0}}),b(ie,ge)},$$slots:{default:!0}})}),X(()=>F(Se,a(i)?"‚àí":"+")),b(Te,I)},$$slots:{default:!0}})}),b(ce,te)},$$slots:{default:!0}})}),b(B,R)};U($,B=>{v.current?B(V):B(Q,!1)})}b(m,G),Ke()}Xe(["click"]);var Ro=We('<svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Saving...',1),No=We('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Save',1),Lo=E('<button class="px-6 py-2 bg-primary text-foreground rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2 flex-shrink-0"><!></button>'),Fo=E('<div class="bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-4"><div class="flex gap-3"><svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-sm text-green-800 dark:text-green-300"> </p></div></div>'),Do=E('<div class="bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4"><div class="flex gap-3"><svg class="w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-sm text-red-800 dark:text-red-300"> </p></div></div>'),Po=E('<div class="mt-2 text-sm"><span class="text-primary dark:text-primary font-semibold"> </span></div>'),Uo=E('<div class="border rounded-lg p-4 bg-card border"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-foreground truncate"> </div> <div class="text-xs text-muted-foreground truncate"> </div></div></div> <!></div> <button class="ml-3 p-2 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-lg transition-colors group" title="Remove mint"><svg class="w-5 h-5 text-muted-foreground group-hover:text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),Ho=E('<div class="text-center py-8 text-muted-foreground"><svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg> <p class="text-sm">No mints configured</p></div>'),Oo=E('<div class="border rounded-lg p-4 bg-card border"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-foreground truncate"> </div> <div class="text-xs text-muted-foreground truncate"> </div></div></div></div> <button class="ml-3 p-2 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-lg transition-colors group" title="Remove relay"><svg class="w-5 h-5 text-muted-foreground group-hover:text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),jo=E('<div class="text-center py-8 text-muted-foreground"><svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg> <p class="text-sm">No relays configured</p></div>'),$o=E('<div class="border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-lg p-4"><div class="space-y-3"><input type="text" placeholder="wss://relay.example.com" class="w-full px-3 py-2 bg-card border border dark:border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-foreground"/> <div class="text-xs text-muted-foreground">URL will automatically be prefixed with wss:// if not provided</div> <div class="flex gap-2"><button class="px-4 py-2 bg-blue-600 text-foreground rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Add Relay</button> <button class="px-4 py-2 bg-neutral-200 dark:bg-muted text-muted-foreground rounded-lg hover:bg-neutral-300 dark:hover:bg-muted transition-colors">Cancel</button></div></div></div>'),Vo=E('<button class="w-full border rounded-lg p-3 hover:bg-muted transition-colors group"><div class="flex items-center justify-center gap-2 text-muted-foreground group-hover:text-primary dark:group-hover:text-primary"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span class="font-medium">Add Relay</span></div></button>'),zo=E(`<div class="space-y-6"><div class="flex items-start justify-between gap-4"><div><h2 class="text-xl font-semibold text-foreground mb-2">Wallet Configuration</h2> <p class="text-sm text-muted-foreground">Manage your Cashu mints, wallet relays, and Lightning integration.</p></div> <!></div> <!> <!> <div class="space-y-3"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-foreground">Cashu Mints</h3> <span class="text-sm text-muted-foreground"> </span></div> <div class="space-y-2"><!> <!> <button class="w-full border rounded-lg p-3 hover:bg-muted transition-colors group"><div class="flex items-center justify-center gap-2 text-muted-foreground group-hover:text-primary dark:group-hover:text-primary"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span class="font-medium">Add Mint</span></div></button></div></div> <div class="space-y-3"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-foreground">Wallet Relays</h3> <span class="text-sm text-muted-foreground"> </span></div> <div class="space-y-2"><!> <!> <!></div></div> <div class="border rounded-lg p-4 bg-card"><div class="flex items-center justify-between gap-4"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <div><h3 class="text-lg font-semibold text-foreground">npub.cash Lightning Zaps</h3> <p class="text-sm text-muted-foreground">Automatically redeem Lightning zaps received via npub.cash into your wallet.</p></div></div> <label class="relative inline-flex items-center cursor-pointer flex-shrink-0"><input type="checkbox" class="sr-only peer"/> <div class="w-11 h-6 bg-neutral-300 dark:bg-neutral-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div></label></div></div></div> <!>`,1);function Ko(m,l){ze(l,!0);let u=pe(!1),v=pe(!1),h=pe(""),f=pe(null),p=pe(null),i=pe(!1);const g=Me(()=>He.$wallet);let _=pe(Qe([])),T=pe(Qe([])),C=pe(!1);dt(()=>{!a(C)&&a(g)&&(y(_,a(g).mints.map(r=>typeof r=="string"?r:r.url),!0),y(T,a(g).relays,!0))});const M=Me(()=>a(C)?a(_):a(g)?.mints.map(r=>typeof r=="string"?r:r.url)||[]),w=Me(()=>a(C)?a(T):a(g)?.relays||[]),S=Me(()=>{const r=new Map;return a(M).forEach(e=>{const t=a(g).wallet;t?.mintBalance&&r.set(e,t.mintBalance(e))}),r});function A(){y(f,null),y(p,null)}function P(r){y(p,r,!0),setTimeout(()=>{y(p,null)},3e3)}function G(r){y(f,r instanceof Error?r.message:"Operation failed",!0)}function $(){y(C,!0)}async function V(){A(),y(i,!0);try{await a(g).save({mints:a(_),relays:a(T).length>0?a(T):void 0}),y(C,!1),P("Changes saved successfully!")}catch(r){G(r)}finally{y(i,!1)}}function Q(r){const e=r.trim();if(!e)return!1;try{const t=new URL(e);return(t.protocol==="wss:"||t.protocol==="ws:")&&!!t.hostname}catch{return!1}}function B(r){y(_,a(_).filter(e=>e!==r),!0),$(),A()}function R(){let r=a(h).trim();if(!r.startsWith("wss://")&&!r.startsWith("ws://")&&(r=`wss://${r}`),!Q(r)){y(f,"Invalid relay URL. Must be a valid WebSocket URL (wss:// or ws://).");return}if(a(w).includes(r)){y(f,"This relay is already added.");return}y(T,[...a(T),r],!0),$(),y(h,""),y(u,!1),A()}function N(r){y(T,a(T).filter(e=>e!==r),!0),$(),A()}function j(r){try{return new URL(r).hostname}catch{return r}}function ve(r){try{return new URL(r).hostname}catch{return r}}function ce(r){return new Intl.NumberFormat("en-US").format(r)}function oe(r){const e=r.filter(t=>!a(M).includes(t));e.length>0&&(y(_,[...a(_),...e],!0),$(),A()),y(v,!1)}function te(){Ct.setEnabled(!Ct.enabled)}var W=zo(),fe=Pe(W),_e=s(fe),Te=d(s(_e),2);{var L=r=>{var e=Lo();e.__click=V;var t=s(e);{var o=x=>{var k=Ro();Ie(),b(x,k)},c=x=>{var k=No();Ie(),b(x,k)};U(t,x=>{a(i)?x(o):x(c,!1)})}n(e),X(()=>e.disabled=a(i)),b(r,e)};U(Te,r=>{a(C)&&r(L)})}n(_e);var I=d(_e,2);{var z=r=>{var e=Fo(),t=s(e),o=d(s(t),2),c=s(o,!0);n(o),n(t),n(e),X(()=>F(c,a(p))),b(r,e)};U(I,r=>{a(p)&&r(z)})}var re=d(I,2);{var K=r=>{var e=Do(),t=s(e),o=d(s(t),2),c=s(o,!0);n(o),n(t),n(e),X(()=>F(c,a(f))),b(r,e)};U(re,r=>{a(f)&&r(K)})}var Y=d(re,2),he=s(Y),Se=d(s(he),2),be=s(Se);n(Se),n(he);var O=d(he,2),q=s(O);Oe(q,16,()=>a(M),r=>r,(r,e)=>{var t=Uo(),o=s(t),c=s(o),x=s(c),k=d(s(x),2),le=s(k),Re=s(le,!0);n(le);var Ae=d(le,2),ue=s(Ae,!0);n(Ae),n(k),n(x);var ne=d(x,2);{var Je=lt=>{var Ne=Po(),De=s(Ne),rt=s(De);n(De),n(Ne),X(pr=>F(rt,`${pr??""} sats`),[()=>ce(a(S).get(e)||0)]),b(lt,Ne)};U(ne,lt=>{a(S).has(e)&&lt(Je)})}n(c);var Tt=d(c,2);Tt.__click=()=>B(e),n(o),n(t),X(lt=>{F(Re,lt),F(ue,e)},[()=>j(e)]),b(r,t)});var se=d(q,2);{var xe=r=>{var e=Ho();b(r,e)};U(se,r=>{a(M).length===0&&r(xe)})}var we=d(se,2);we.__click=()=>y(v,!0),n(O),n(Y);var Ce=d(Y,2),ke=s(Ce),ee=d(s(ke),2),me=s(ee);n(ee),n(ke);var ie=d(ke,2),J=s(ie);Oe(J,16,()=>a(w),r=>r,(r,e)=>{var t=Oo(),o=s(t),c=s(o),x=s(c),k=d(s(x),2),le=s(k),Re=s(le,!0);n(le);var Ae=d(le,2),ue=s(Ae,!0);n(Ae),n(k),n(x),n(c);var ne=d(c,2);ne.__click=()=>N(e),n(o),n(t),X(Je=>{F(Re,Je),F(ue,e)},[()=>ve(e)]),b(r,t)});var ge=d(J,2);{var ae=r=>{var e=jo();b(r,e)};U(ge,r=>{a(w).length===0&&r(ae)})}var D=d(ge,2);{var H=r=>{var e=$o(),t=s(e),o=s(t);qe(o),Nt(o,!0);var c=d(o,4),x=s(c);x.__click=R;var k=d(x,2);k.__click=()=>{y(u,!1),y(h,""),y(f,null)},n(c),n(t),n(e),X(le=>x.disabled=le,[()=>!a(h).trim()]),ft(o,()=>a(h),le=>y(h,le)),b(r,e)},Z=r=>{var e=Vo();e.__click=()=>y(u,!0),b(r,e)};U(D,r=>{a(u)?r(H):r(Z,!1)})}n(ie),n(Ce);var de=d(Ce,2),Ee=s(de),Be=d(s(Ee),2),ye=s(Be);qe(ye),ye.__change=te,Ie(2),n(Be),n(Ee),n(de),n(fe);var Ue=d(fe,2);Co(Ue,{onSelectMints:oe,onClose:()=>y(v,!1),get open(){return a(v)},set open(r){y(v,r,!0)}}),X(()=>{F(be,`${a(M).length??""} ${a(M).length===1?"mint":"mints"}`),F(me,`${a(w).length??""} ${a(w).length===1?"relay":"relays"}`),xt(ye,Ct.enabled)}),b(m,W),Ke()}Xe(["click","change"]);var Yo=E('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-600 dark:text-red-400 text-sm"> </div>'),Go=E('<div class="flex items-center justify-center py-8 text-muted-foreground"><svg class="w-5 h-5 animate-spin mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Loading...</div>'),qo=E('<div class="text-center py-8 text-muted-foreground"><svg class="w-12 h-12 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <p class="text-sm">No hashtags followed yet</p> <p class="text-xs mt-1">Add hashtags above to start following topics</p></div>'),Xo=E('<div class="flex items-center justify-between p-3 bg-neutral-100 dark:bg-card border border rounded-lg"><div class="flex items-center gap-2"><span class="text-primary font-medium">#</span> <span class="text-foreground font-medium"> </span></div> <button class="p-1.5 hover:bg-red-500/10 rounded-lg transition-colors group" title="Remove hashtag"><svg class="w-4 h-4 text-muted-foreground group-hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Wo=E('<div class="space-y-2"></div>'),Jo=E('<div class="space-y-6"><div class="text-sm text-muted-foreground"><p>Follow hashtags to see related content in your home feed. Your followed hashtags will appear as filters at the top of your home page.</p></div> <div class="space-y-3"><label class="block"><span class="text-sm font-medium text-muted-foreground mb-2 block">Add Hashtag</span> <div class="flex gap-2"><div class="relative flex-1"><span class="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-lg">#</span> <input type="text" placeholder="bitcoin" class="w-full pl-8 pr-3 py-2 bg-neutral-100 dark:bg-card border border rounded-lg text-foreground placeholder-neutral-500 dark:placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-orange-500"/></div> <button class="px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"> </button></div></label> <!></div> <div class="space-y-3"><h3 class="text-sm font-medium text-muted-foreground">Followed Hashtags</h3> <!></div> <div class="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg"><div class="flex gap-3"><svg class="w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-700 dark:text-blue-300"><p class="font-medium mb-1">How it works</p> <ul class="space-y-1 text-xs"><li>‚Ä¢ Click hashtag pills on your home feed to filter by specific hashtags</li> <li>‚Ä¢ When viewing a specific relay, hashtag filters will search within that relay</li> <li>‚Ä¢ When in "Following" mode, hashtag filters will search within your follows</li> <li>‚Ä¢ Your hashtag interests are stored on Nostr (kind 10015)</li></ul></div></div></div></div>');function Zo(m,l){ze(l,!0);let u=pe(""),v=pe(!1),h=pe(null);async function f(){if(a(u).trim()){y(v,!0),y(h,null);try{const R=a(u).trim().replace(/^#/,"");await pt.addHashtag(R),y(u,"")}catch(R){y(h,R instanceof Error?R.message:"Failed to add hashtag",!0)}finally{y(v,!1)}}}async function p(R){try{await pt.removeHashtag(R)}catch(N){y(h,N instanceof Error?N.message:"Failed to remove hashtag",!0)}}function i(R){R.key==="Enter"&&(R.preventDefault(),f())}var g=Jo(),_=d(s(g),2),T=s(_),C=d(s(T),2),M=s(C),w=d(s(M),2);qe(w),w.__keydown=i,n(M);var S=d(M,2);S.__click=f;var A=s(S,!0);n(S),n(C),n(T);var P=d(T,2);{var G=R=>{var N=Yo(),j=s(N,!0);n(N),X(()=>F(j,a(h))),b(R,N)};U(P,R=>{a(h)&&R(G)})}n(_);var $=d(_,2),V=d(s($),2);{var Q=R=>{var N=Go();b(R,N)},B=R=>{var N=Ge(),j=Pe(N);{var ve=oe=>{var te=qo();b(oe,te)},ce=oe=>{var te=Wo();Oe(te,21,()=>pt.interests,Ve,(W,fe)=>{var _e=Xo(),Te=s(_e),L=d(s(Te),2),I=s(L,!0);n(L),n(Te);var z=d(Te,2);z.__click=()=>p(a(fe)),n(_e),X(()=>F(I,a(fe))),b(W,_e)}),n(te),b(oe,te)};U(j,oe=>{pt.interests.length===0?oe(ve):oe(ce,!1)},!0)}b(R,N)};U(V,R=>{pt.isLoading?R(Q):R(B,!1)})}n($),Ie(2),n(g),X(R=>{w.disabled=a(v),S.disabled=R,F(A,a(v)?"Adding...":"Add")},[()=>a(v)||!a(u).trim()]),ft(w,()=>a(u),R=>y(u,R)),b(m,g),Ke()}Xe(["keydown","click"]);var Qo=E('<div class="pt-6 pb-4 border-b"><div class="flex items-center gap-3"><button class="p-2 hover:bg-neutral-200/50 dark:hover:bg-muted/30 rounded-lg transition-all"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h1 class="text-xl font-semibold text-foreground"> </h1></div></div> <div class="py-6"><!></div>',1),es=E('<span class="text-xs bg-neutral-200 dark:bg-muted px-1.5 py-0.5 rounded"> </span>'),ts=We('<svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>'),rs=E('<button><div class="flex items-center gap-3"><div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></div> <div class="text-left"><div class="text-sm font-medium text-foreground flex items-center gap-2"> <!></div> <div class="text-xs text-muted-foreground"> </div></div></div> <!></button>'),as=E('<div><h2 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3"> </h2> <div class="space-y-2"></div></div>'),ns=E('<div class="pt-6 pb-4"><h1 class="text-xl font-semibold text-foreground"> </h1></div> <div class="py-6 space-y-8"></div>',1),os=E('<div class="w-full min-h-screen bg-background pb-20 md:pb-0"><div class="max-w-lg mx-auto"><!></div></div>');function As(m,l){ze(l,!0);const u=()=>sr(lr,"$t",v),[v,h]=ir();let f=pe(null);const p=[{title:"Content & Personalization",items:[{id:"hashtags",label:"Hashtag Interests",description:"Follow hashtags and filter your feed",iconPath:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14",iconColor:"text-primary",iconBg:"bg-primary/10",component:Zo,available:!0},{id:"theme",label:"Appearance",description:"Customize theme and language",iconPath:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01",iconColor:"text-primary",iconBg:"bg-primary-400/10",component:aa,available:!0}]},{title:"Servers",items:[{id:"relays",label:"Relays",description:"Manage your Nostr relay connections",iconPath:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",iconColor:"text-blue-400",iconBg:"bg-blue-400/10",component:ea,available:!0},{id:"blossom",label:"Media Servers",description:"Configure Blossom media upload servers",iconPath:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",iconColor:"text-primary",iconBg:"bg-primary/10",component:ga,available:!0}]},{title:"Payments",items:[{id:"wallet",label:"Wallet",description:"Manage Cashu mints and wallet relays",iconPath:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",iconColor:"text-primary",iconBg:"bg-primary/10",component:Ko,available:!0},{id:"zap",label:"Zaps",description:"Configure default zap amount and preferences",iconPath:"M13 10V3L4 14h7v7l9-11h-7z",iconColor:"text-yellow-400",iconBg:"bg-yellow-400/10",component:Zn,available:!0}]},{title:"Security & Advanced",items:[{id:"keys",label:"Private Key",description:"View and backup your private key",iconPath:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z",iconColor:"text-red-500",iconBg:"bg-red-500/10",component:jn,available:!0},{id:"debug",label:"Debug",description:"View cache statistics and debug information",iconPath:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z",iconColor:"text-green-400",iconBg:"bg-green-400/10",component:Gn,available:!0}]}],i=Me(()=>p.flatMap(S=>S.items));dt(()=>{const A=new URLSearchParams(window.location.search).get("tab");A&&a(i).some(P=>P.id===A&&P.available)&&y(f,A,!0)});let g=Me(()=>a(i).find(S=>S.id===a(f)));var _=os(),T=s(_),C=s(T);{var M=S=>{var A=Qo(),P=Pe(A),G=s(P),$=s(G);$.__click=()=>y(f,null);var V=d($,2),Q=s(V,!0);n(V),n(G),n(P);var B=d(P,2),R=s(B);tt(R,()=>a(g).component,(N,j)=>{j(N,{})}),n(B),X(()=>F(Q,a(g).label)),b(S,A)},w=S=>{var A=ns(),P=Pe(A),G=s(P),$=s(G,!0);n(G),n(P);var V=d(P,2);Oe(V,21,()=>p,Ve,(Q,B)=>{var R=as(),N=s(R),j=s(N,!0);n(N);var ve=d(N,2);Oe(ve,21,()=>a(B).items,Ve,(ce,oe)=>{var te=rs();te.__click=()=>a(oe).available&&y(f,a(oe).id,!0);var W=s(te),fe=s(W),_e=s(fe),Te=s(_e);n(_e),n(fe);var L=d(fe,2),I=s(L),z=s(I),re=d(z);{var K=O=>{var q=es(),se=s(q,!0);n(q),X(xe=>F(se,xe),[()=>u()("common.soon")]),b(O,q)};U(re,O=>{a(oe).available||O(K)})}n(I);var Y=d(I,2),he=s(Y,!0);n(Y),n(L),n(W);var Se=d(W,2);{var be=O=>{var q=ts();b(O,q)};U(Se,O=>{a(oe).available&&O(be)})}n(te),X(()=>{te.disabled=!a(oe).available,Fe(te,1,`w-full bg-neutral-100 dark:bg-card border rounded-xl p-4 flex items-center justify-between transition-all ${a(oe).available?"hover:bg-neutral-200 dark:hover:bg-muted cursor-pointer":"opacity-50 cursor-not-allowed"}`),Fe(fe,1,`w-10 h-10 rounded-lg flex items-center justify-center ${a(oe).iconBg??""}`),Fe(_e,0,`w-5 h-5 ${a(oe).iconColor??""}`),st(Te,"d",a(oe).iconPath),F(z,`${a(oe).label??""} `),F(he,a(oe).description)}),b(ce,te)}),n(ve),n(R),X(()=>F(j,a(B).title)),b(Q,R)}),n(V),X(Q=>F($,Q),[()=>u()("settings.title")]),b(S,A)};U(C,S=>{a(f)&&a(g)?S(M):S(w,!1)})}n(T),n(_),b(m,_),Ke(),h()}Xe(["click"]);export{As as component};
