import{d as ze,f as m,a as c,i as Ae,s as E,c as Be}from"../chunks/rzUyzf2y.js";import{p as Ee,u as G,g as e,b as H,s as w,c as Ve,d as i,e as s,a as P,r as o,t as y,f as ae}from"../chunks/AsQG98fS.js";import{i as C}from"../chunks/DZKExFZC.js";import{e as le}from"../chunks/Cztbr3Ea.js";import{c as ie}from"../chunks/Dt3q2Svx.js";import{r as Ie,a as V,b as De,c as ne}from"../chunks/CS0aOiUg.js";import{b as He}from"../chunks/DF8Bk5Sh.js";import{n as M}from"../chunks/tv6-RHC_.js";import{g as de}from"../chunks/s53o-P2j.js";import{h as ce}from"../chunks/BVrYKRgp.js";import{c as J}from"../chunks/C-PpeXlo.js";import{m as Se}from"../chunks/C6SIxCTZ.js";import{U as ue}from"../chunks/C-S0GgRw.js";import{C as Ne}from"../chunks/C8nOEIkG.js";import{c as Oe,L as Qe}from"../chunks/iWJgxq80.js";import{g as Re}from"../chunks/JxP1QK8w.js";import{g as Te}from"../chunks/HXYFdwja.js";import{P as qe}from"../chunks/C6xvd7Uj.js";const Ge=b=>{{let g=P(()=>M.$currentUser?Ke:void 0);qe(b,{title:"Follow Packs",subtitle:"Discover curated lists of accounts to follow",get icon(){return Je},get actions(){return e(g)}})}},Je=b=>{var g=We();c(b,g)},Ke=b=>{var g=Xe();g.__click=()=>J.open(),c(b,g)};var We=Ae('<svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>'),Xe=m('<button class="px-4 py-2.5 bg-primary hover:bg-accent-dark text-foreground rounded-lg transition-colors font-medium text-sm flex items-center gap-2 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Follow Pack</button>'),Ye=m('<div class="absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-xl z-10"><div class="py-1"><button>All Packs</button> <button>My Packs</button> <button>From Follows</button> <button>Include Me</button></div></div>'),Ze=m('<div class="relative flex-shrink-0 filter-dropdown"><button class="px-4 py-3 bg-card border border-border rounded-lg text-foreground hover:border-border transition-colors flex items-center gap-2 min-w-[160px] justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> <span class="text-sm font-medium"> </span></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),et=m('<div class="h-32 w-full"><img class="w-full h-full object-cover"/></div>'),tt=m('<p class="text-sm text-muted-foreground mb-4 line-clamp-2"> </p>'),rt=m('<button type="button" class="relative cursor-pointer"><!></button>'),ot=m('<div class="w-8 h-8 rounded-full bg-muted ring-2 ring-neutral-900 flex items-center justify-center"><span class="text-xs text-muted-foreground"> </span></div>'),st=m('<div role="button" tabindex="0" class="block bg-card border border-border rounded-xl overflow-hidden hover:border-border transition-colors group cursor-pointer"><!> <div class="p-5"><div class="mb-4"><h3 class="font-semibold text-foreground group-hover:text-primary transition-colors"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <!> <div class="flex -space-x-2"><!> <!></div></div></div>'),at=m('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),lt=m('<div class="text-center py-12"><svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-muted-foreground">No follow packs found</p></div>'),it=m('<div class="w-full lg:max-w-6xl mx-auto px-4 py-8"><div class="mb-6"><div class="flex gap-3 flex-col sm:flex-row"><div class="relative flex-1"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="search" placeholder="Search follow packs..." class="w-full pl-10 pr-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"/></div> <!></div></div> <div><h2 class="text-xl font-semibold text-foreground mb-4">Popular Packs</h2> <!></div> <!></div>');function $t(b,g){Ee(g,!0);let U=H(""),u=H("all"),_=H(!1);const ve={all:"All Packs",mine:"My Packs",follows:"From Follows","include-me":"Include Me"};function I(t){w(u,t,!0),w(_,!1)}function K(t){t.target.closest(".filter-dropdown")||w(_,!1)}G(()=>{if(e(_))return document.addEventListener("click",K),()=>document.removeEventListener("click",K)});const W=Oe(M,()=>({filters:[{kinds:[39089,39092]}],bufferMs:100}),{initialLimit:12,pageSize:12}),me=P(()=>W.allEvents);let fe=P(()=>{const t=e(me).map(r=>({id:r.id||"",title:r.tagValue("title")||"Untitled Pack",description:r.tagValue("description"),image:r.tagValue("image"),pubkeys:r.tags.filter(a=>a[0]==="p").map(a=>a[1]),encode:()=>r.encode(),kind:r.kind||39089,pubkey:r.pubkey,created_at:r.created_at||0,author:r.author}));return t.length>0?t:Se}),S=P(()=>{let t=e(fe);if(e(u)!=="all"){const r=M.$currentUser?.pubkey,a=M.$currentUser?.follows;if(e(u)==="mine"&&r)t=t.filter(v=>v.pubkey===r);else if(e(u)==="follows"&&a){const v=Array.from(a).map(f=>f.pubkey);t=t.filter(f=>v.includes(f.pubkey))}else e(u)==="include-me"&&r&&(t=t.filter(v=>v.pubkeys.includes(r)))}if(e(U)){const r=e(U).toLowerCase();t=t.filter(a=>a.title.toLowerCase().includes(r)||a.description&&a.description.toLowerCase().includes(r))}return t}),j=H(12);const X=P(()=>e(S).slice(0,e(j))),Y=P(()=>e(j)<e(S).length),pe=P(()=>W.isLoading);function ge(){e(Y)&&w(j,Math.min(e(j)+12,e(S).length),!0)}G(()=>{e(u),e(U),w(j,12)});function Z(t){const r=M.getUser({pubkey:t.pubkey}),a=Re(t,r);de(a)}G(()=>(ce.header=Ge,()=>{ce.clear()}));var N=it(),O=s(N),ee=s(O),Q=s(ee),te=i(s(Q),2);Ie(te),o(Q);var be=i(Q,2);{var _e=t=>{var r=Ze(),a=s(r);a.__click=()=>w(_,!e(_));var v=s(a),f=i(s(v),2),n=s(f,!0);o(f),o(v);var x=i(v,2);o(a);var D=i(a,2);{var T=L=>{var h=Ye(),$=s(h),z=s($);z.__click=()=>I("all");var F=i(z,2);F.__click=()=>I("mine");var A=i(F,2);A.__click=()=>I("follows");var B=i(A,2);B.__click=()=>I("include-me"),o($),o(h),y(()=>{V(z,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="all"?"text-primary font-medium":"text-muted-foreground"}`),V(F,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="mine"?"text-primary font-medium":"text-muted-foreground"}`),V(A,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="follows"?"text-primary font-medium":"text-muted-foreground"}`),V(B,1,`w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors ${e(u)==="include-me"?"text-primary font-medium":"text-muted-foreground"}`)}),c(L,h)};C(D,L=>{e(_)&&L(T)})}o(r),y(()=>{E(n,ve[e(u)]),V(x,0,`w-4 h-4 text-muted-foreground transition-transform ${e(_)?"rotate-180":""}`)}),c(t,r)};C(be,t=>{M.$currentUser&&t(_e)})}o(ee),o(O);var R=i(O,2),xe=i(s(R),2);{var he=t=>{var r=at(),a=ae(r);le(a,21,()=>e(X),f=>f.id,(f,n)=>{var x=st();x.__click=()=>Z(e(n)),x.__keydown=l=>l.key==="Enter"&&Z(e(n));var D=s(x);{var T=l=>{var d=et(),p=s(d);o(d),y(()=>{ne(p,"src",e(n).image),ne(p,"alt",e(n).title)}),c(l,d)};C(D,l=>{e(n).image&&l(T)})}var L=i(D,2),h=s(L),$=s(h),z=s($,!0);o($);var F=i($,2),A=s(F);o(F),o(h);var B=i(h,2);{var ye=l=>{var d=tt(),p=s(d,!0);o(d),y(()=>E(p,e(n).description)),c(l,d)};C(B,l=>{e(n).description&&l(ye)})}var re=i(B,2),oe=s(re);le(oe,18,()=>e(n).pubkeys.slice(0,4),l=>l,(l,d,p)=>{var k=rt();k.__click=q=>{q.stopPropagation(),de(Te(d))};var Le=s(k);ie(Le,()=>ue.Root,(q,$e)=>{$e(q,{get ndk(){return M},get pubkey(){return d},children:(Fe,nt)=>{var se=Be(),Ce=ae(se);ie(Ce,()=>ue.Avatar,(Ue,je)=>{je(Ue,{class:"w-8 h-8 rounded-full ring-2 ring-neutral-900 hover:opacity-80 transition-opacity"})}),c(Fe,se)},$$slots:{default:!0}})}),o(k),y(()=>De(k,`z-index: ${4-e(p)}`)),c(l,k)});var Pe=i(oe,2);{var Me=l=>{var d=ot(),p=s(d),k=s(p);o(p),o(d),y(()=>E(k,`+${e(n).pubkeys.length-4}`)),c(l,d)};C(Pe,l=>{e(n).pubkeys.length>4&&l(Me)})}o(re),o(L),o(x),y(()=>{E(z,e(n).title),E(A,`${e(n).pubkeys.length??""} members`)}),c(f,x)}),o(a);var v=i(a,2);Qe(v,{onIntersect:ge,get hasMore(){return e(Y)},get isLoading(){return e(pe)}}),c(t,r)},ke=t=>{var r=lt();c(t,r)};C(xe,t=>{e(X).length>0?t(he):t(ke,!1)})}o(R);var we=i(R,2);Ne(we,{get open(){return J.show},set open(t){J.show=t}}),o(N),He(te,()=>e(U),t=>w(U,t)),c(b,N),Ve()}ze(["click","keydown"]);export{$t as component};
