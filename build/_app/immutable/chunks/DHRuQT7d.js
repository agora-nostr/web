import{u as p,s as e,b as u,g as l}from"./AsQG98fS.js";const i=new Map,m=1e3*60*60;function g(t){let o=u(null),s=u(!1);return p(()=>{if(!t){e(o,null);return}if(!t.startsWith("ws://")&&!t.startsWith("wss://")){e(o,null);return}const a=i.get(t);if(a&&Date.now()-a.timestamp<m){e(o,a.info,!0);return}(async()=>{e(s,!0);try{const r=t.replace("wss://","https://").replace("ws://","http://"),n=new AbortController,h=setTimeout(()=>n.abort(),5e3),c=await fetch(r,{method:"GET",headers:{Accept:"application/nostr+json"},signal:n.signal,mode:"cors"});if(clearTimeout(h),!c.ok)throw new Error(`HTTP ${c.status}`);const f=await c.json();i.set(t,{info:f,timestamp:Date.now()}),e(o,f,!0)}catch(r){console.error("Failed to fetch relay info for",t,r);const n={};i.set(t,{info:n,timestamp:Date.now()}),e(o,n,!0)}finally{e(s,!1)}})()}),{get info(){return l(o)},get loading(){return l(s)}}}export{g as u};
