import"./DsnmJJEf.js";import{p as ze,c as ve,f as R,e as t,h as Ie,i as g,k as o,j as a,r,g as e,a as X,t as k,l as v,u as Ne,b as Re,s as P,L as W,aP as K,d as Be,M as at,P as st}from"./Bq750rDx.js";import{i as te}from"./BcjopvHb.js";import{e as Ce,i as Oe}from"./Cjcfrngr.js";import{c as z}from"./BRAzWB6r.js";import{s as Fe,a as Je}from"./wxUnewq1.js";import{n as Pe,f as Ve,s as lt}from"./CdRP5_sk.js";import{t as ge}from"./8lBcLtWK.js";import{M as Ae,b as He,c as Qe,d as qe,R as Ge,e as We,f as Xe,g as Ye,h as Ze}from"./Dw4s2o4Z.js";import{D as et,a as tt}from"./C7FVrkeR.js";import{D as rt}from"./DtjL0N-6.js";import{B as he}from"./DMhdcQZj.js";import{p as Me}from"./BL6J_geM.js";import{R as Le}from"./DoEkGPLs.js";import{r as je,a as Ue,c as nt}from"./uSFILAY7.js";import{c as Ke}from"./BTSVJW8r.js";import{T as Se,L as it}from"./BoTf7nuy.js";import{$ as ot}from"./L2joq6-K.js";import{I as Te}from"./BrZTJthz.js";import{D as dt}from"./CHVQ8-IN.js";import{u as vt}from"./BKSKCJuW.js";var ut=g('<div class="invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-card border border-border rounded-lg shadow-xl z-50 w-64 text-xs"><div class="font-semibold text-foreground mb-1"> </div> <div class="text-muted-foreground"> </div> <div class="text-muted-foreground mt-1 break-all"> </div></div>'),ct=g('<div class="flex items-center gap-1.5 px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground group relative"><!> <span class="truncate max-w-[120px]"> </span> <!></div>'),pt=g('<div class="text-xs text-muted-foreground truncate"> </div>'),ft=g('<div class="flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg text-sm text-muted-foreground hover:bg-muted transition-colors"><!> <div class="flex-1 min-w-0"><div class="font-medium text-foreground truncate"> </div> <!></div></div>');function mt($e,l){ze(l,!0);const n=Me(l,"variant",3,"default"),ye=X(()=>l.relay.connectivity.nip11),le=X(()=>e(ye)?.name||new URL(l.relay.url).hostname),pe=X(()=>e(ye)?.description);var A=ve(),S=R(A);{var T=h=>{var m=ct(),I=o(m);Le(I,{get relayUrl(){return l.relay.url},size:"xs"});var N=a(I,2),J=o(N,!0);r(N);var ne=a(N,2);{var re=H=>{var $=ut(),u=o($),oe=o(u,!0);r(u);var B=a(u,2),fe=o(B,!0);r(B);var L=a(B,2),ue=o(L,!0);r(L),r($),k(()=>{v(oe,e(le)),v(fe,e(pe)),v(ue,l.relay.url)}),t(H,$)};te(ne,H=>{e(pe)&&H(re)})}r(m),k(()=>v(J,e(le))),t(h,m)},Y=h=>{var m=ft(),I=o(m);Le(I,{get relayUrl(){return l.relay.url},size:"md"});var N=a(I,2),J=o(N),ne=o(J,!0);r(J);var re=a(J,2);{var H=$=>{var u=pt(),oe=o(u,!0);r(u),k(()=>v(oe,e(pe))),t($,u)};te(re,$=>{e(pe)&&$(H)})}r(N),r(m),k(()=>v(ne,e(le))),t(h,m)};te(S,h=>{n()==="compact"?h(T):h(Y,!1)})}t($e,A),Ie()}var _t=g("<!> <!>",1),bt=g('<label class="flex items-center gap-3 p-3 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors"><input type="radio" name="reportType" class="w-4 h-4"/> <span class="text-sm"> </span></label>'),xt=g('<!> <div class="space-y-4 py-4"><div><label class="text-sm font-medium mb-2 block"> </label> <div class="space-y-2"></div></div> <div><label for="report-additional-info" class="text-sm font-medium mb-2 block"> </label> <!></div> <div class="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg"><p class="text-sm text-yellow-600 dark:text-yellow-400"> </p></div></div> <div class="flex gap-3 justify-end"><!> <!></div>',1),gt=g("<!> <!>",1),ht=g('<label class="flex items-center gap-3 p-3 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors"><input type="radio" name="reportType" class="w-4 h-4"/> <span class="text-sm"> </span></label>'),yt=g('<div class="flex gap-3"><!> <!></div>'),$t=g('<!> <div class="space-y-4 py-4 px-4"><div><label class="text-sm font-medium mb-2 block"> </label> <div class="space-y-2"></div></div> <div><label for="report-additional-info" class="text-sm font-medium mb-2 block"> </label> <!></div> <div class="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg"><p class="text-sm text-yellow-600 dark:text-yellow-400"> </p></div></div> <!>',1);function wt($e,l){ze(l,!0);const n=()=>Je(ot,"$t",ye),[ye,le]=Fe(),pe=[],A=new Ae("(min-width: 768px)");let S=Me(l,"open",7),T=Re(""),Y=Re(""),h=Re(!1);const m=[{value:"nudity",labelKey:"report.types.nudity"},{value:"malware",labelKey:"report.types.malware"},{value:"profanity",labelKey:"report.types.profanity"},{value:"illegal",labelKey:"report.types.illegal"},{value:"spam",labelKey:"report.types.spam"},{value:"impersonation",labelKey:"report.types.impersonation"},{value:"other",labelKey:"report.types.other"}];async function I(){if(!e(T)){ge.error(n()("report.errors.selectType"));return}if(!Pe.activeUser){ge.error(n()("report.errors.notLoggedIn"));return}try{P(h,!0);const u=new Ve(Pe);u.kind=1984,u.tag(l.target,e(T)),e(Y).trim()&&(u.content=e(Y).trim()),await u.publish(),ge.success(n()("report.success")),l.onClose(),P(T,""),P(Y,"")}catch(u){console.error("Failed to submit report:",u),ge.error(n()("report.errors.failed"))}finally{P(h,!1)}}function N(){e(h)||(P(T,""),P(Y,""),l.onClose())}Ne(()=>{S()||N()});var J=ve(),ne=R(J);{var re=$=>{var u=ve(),oe=R(u);z(oe,()=>Ge,(B,fe)=>{fe(B,{get open(){return S()},set open(L){S(L)},children:(L,ue)=>{var ce=ve(),s=R(ce);z(s,()=>He,(y,O)=>{O(y,{class:"max-w-md",children:(ae,me)=>{var E=xt(),se=R(E);z(se,()=>Qe,(b,i)=>{i(b,{children:(d,c)=>{var f=_t(),p=R(f);z(p,()=>qe,(w,M)=>{M(w,{children:(ee,we)=>{W();var ke=K();k(xe=>v(ke,xe),[()=>n()("report.title")]),t(ee,ke)},$$slots:{default:!0}})});var x=a(p,2);z(x,()=>et,(w,M)=>{M(w,{children:(ee,we)=>{W();var ke=K();k(xe=>v(ke,xe),[()=>n()("report.description")]),t(ee,ke)},$$slots:{default:!0}})}),t(d,f)},$$slots:{default:!0}})});var V=a(se,2),Q=o(V),_=o(Q),F=o(_,!0);r(_);var ie=a(_,2);Ce(ie,21,()=>m,Oe,(b,i)=>{var d=bt(),c=o(d);je(c);var f,p=a(c,2),x=o(p,!0);r(p),r(d),k(w=>{c.disabled=e(h),f!==(f=e(i).value)&&(c.value=(c.__value=e(i).value)??""),v(x,w)},[()=>n()(e(i).labelKey)]),Ke(pe,[],c,()=>(e(i).value,e(T)),w=>P(T,w)),t(b,d)}),r(ie),r(Q);var _e=a(Q,2),Z=o(_e),U=o(Z);r(Z);var j=a(Z,2);{let b=X(()=>n()("report.additionalInfoPlaceholder"));Se(j,{id:"report-additional-info",get placeholder(){return e(b)},get disabled(){return e(h)},class:"resize-none",rows:3,get value(){return e(Y)},set value(i){P(Y,i,!0)}})}r(_e);var q=a(_e,2),de=o(q),be=o(de,!0);r(de),r(q),r(V);var G=a(V,2),D=o(G);he(D,{variant:"outline",onclick:N,get disabled(){return e(h)},children:(b,i)=>{W();var d=K();k(c=>v(d,c),[()=>n()("common.cancel")]),t(b,d)},$$slots:{default:!0}});var C=a(D,2);{let b=X(()=>!e(T)||e(h));he(C,{onclick:I,get disabled(){return e(b)},variant:"destructive",children:(i,d)=>{var c=ve(),f=R(c);{var p=w=>{var M=K();k(ee=>v(M,ee),[()=>n()("report.submitting")]),t(w,M)},x=w=>{var M=K();k(ee=>v(M,ee),[()=>n()("report.submit")]),t(w,M)};te(f,w=>{e(h)?w(p):w(x,!1)})}t(i,c)},$$slots:{default:!0}})}r(G),k((b,i,d,c)=>{v(F,b),v(U,`${i??""} ${d??""}`),v(be,c)},[()=>n()("report.selectReason"),()=>n()("report.additionalInfo"),()=>n()("common.optional"),()=>n()("report.warning")]),t(ae,E)},$$slots:{default:!0}})}),t(L,ce)},$$slots:{default:!0}})}),t($,u)},H=$=>{var u=ve(),oe=R(u);z(oe,()=>Ze,(B,fe)=>{fe(B,{get open(){return S()},set open(L){S(L)},children:(L,ue)=>{var ce=ve(),s=R(ce);z(s,()=>We,(y,O)=>{O(y,{children:(ae,me)=>{var E=$t(),se=R(E);z(se,()=>Xe,(D,C)=>{C(D,{class:"text-left",children:(b,i)=>{var d=gt(),c=R(d);z(c,()=>Ye,(p,x)=>{x(p,{children:(w,M)=>{W();var ee=K();k(we=>v(ee,we),[()=>n()("report.title")]),t(w,ee)},$$slots:{default:!0}})});var f=a(c,2);z(f,()=>tt,(p,x)=>{x(p,{children:(w,M)=>{W();var ee=K();k(we=>v(ee,we),[()=>n()("report.description")]),t(w,ee)},$$slots:{default:!0}})}),t(b,d)},$$slots:{default:!0}})});var V=a(se,2),Q=o(V),_=o(Q),F=o(_,!0);r(_);var ie=a(_,2);Ce(ie,21,()=>m,Oe,(D,C)=>{var b=ht(),i=o(b);je(i);var d,c=a(i,2),f=o(c,!0);r(c),r(b),k(p=>{i.disabled=e(h),d!==(d=e(C).value)&&(i.value=(i.__value=e(C).value)??""),v(f,p)},[()=>n()(e(C).labelKey)]),Ke(pe,[],i,()=>(e(C).value,e(T)),p=>P(T,p)),t(D,b)}),r(ie),r(Q);var _e=a(Q,2),Z=o(_e),U=o(Z);r(Z);var j=a(Z,2);{let D=X(()=>n()("report.additionalInfoPlaceholder"));Se(j,{id:"report-additional-info",get placeholder(){return e(D)},get disabled(){return e(h)},class:"resize-none",rows:3,get value(){return e(Y)},set value(C){P(Y,C,!0)}})}r(_e);var q=a(_e,2),de=o(q),be=o(de,!0);r(de),r(q),r(V);var G=a(V,2);z(G,()=>rt,(D,C)=>{C(D,{class:"pt-2",children:(b,i)=>{var d=yt(),c=o(d);he(c,{variant:"outline",onclick:N,get disabled(){return e(h)},class:"flex-1",children:(p,x)=>{W();var w=K();k(M=>v(w,M),[()=>n()("common.cancel")]),t(p,w)},$$slots:{default:!0}});var f=a(c,2);{let p=X(()=>!e(T)||e(h));he(f,{onclick:I,get disabled(){return e(p)},variant:"destructive",class:"flex-1",children:(x,w)=>{var M=ve(),ee=R(M);{var we=xe=>{var De=K();k(Ee=>v(De,Ee),[()=>n()("report.submitting")]),t(xe,De)},ke=xe=>{var De=K();k(Ee=>v(De,Ee),[()=>n()("report.submit")]),t(xe,De)};te(ee,xe=>{e(h)?xe(we):xe(ke,!1)})}t(x,M)},$$slots:{default:!0}})}r(d),t(b,d)},$$slots:{default:!0}})}),k((D,C,b,i)=>{v(F,D),v(U,`${C??""} ${b??""}`),v(be,i)},[()=>n()("report.selectReason"),()=>n()("report.additionalInfo"),()=>n()("common.optional"),()=>n()("report.warning")]),t(ae,E)},$$slots:{default:!0}})}),t(L,ce)},$$slots:{default:!0}})}),t($,u)};te(ne,$=>{A.current?$(re):$(H,!1)})}t($e,J),Ie(),le()}var kt=g('<div class="border-t border-border mt-1 pt-1"><div class="px-4 py-2 text-xs text-muted-foreground"> </div></div>'),Pt=g('<div class="border-t border-border mt-1 pt-1"><div class="px-4 py-2 text-xs text-muted-foreground font-medium"> </div> <div class="px-2 pb-2 space-y-1"></div></div>'),Rt=g('<div class="absolute right-0 mt-1 w-72 bg-popover border border-border rounded-lg shadow-lg z-10 max-h-96 overflow-y-auto"><button class="w-full px-4 py-3 text-left text-sm text-foreground hover:bg-muted transition-colors first:rounded-t-lg flex items-center gap-3" type="button"><!> </button> <button class="w-full px-4 py-3 text-left text-sm text-foreground hover:bg-muted transition-colors flex items-center gap-3" type="button"><!> </button> <div class="border-t border-border my-1"></div> <button class="w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted transition-colors" type="button">Copy author (nprofile)</button> <button class="w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted transition-colors" type="button">Copy ID (nevent)</button> <button class="w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted transition-colors" type="button">View raw event</button> <!></div>'),Dt=g("<!> <!>",1),Ct=g("<!> <!>",1),Mt=g('<!> <div class="flex-1 overflow-auto bg-muted/50 rounded-lg p-4 font-mono text-sm"><pre class="whitespace-pre-wrap break-words"> </pre></div> <!>',1),zt=g("<!> <!>",1),It=g("<!> <!>",1),Et=g('<!> <div class="px-4 flex-1 overflow-auto bg-muted/50 rounded-lg p-4 font-mono text-sm"><pre class="whitespace-pre-wrap break-words"> </pre></div> <!>',1),Ut=g('<div class="relative flex-shrink-0"><button class="p-1 hover:bg-muted rounded-full transition-colors" type="button" aria-label="More options"><svg class="w-5 h-5 text-muted-foreground" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button> <!></div> <!> <!>',1);function dr($e,l){ze(l,!0);const n=()=>Je(ot,"$t",ye),[ye,le]=Fe(),pe=new Ae("(min-width: 768px)");let A=Re(!1),S=Re(!1),T=Re(!1);const Y=Pe.$subscribe(()=>Pe.$currentUser?.pubkey?{filters:[{kinds:[1e4],authors:[Pe.$currentUser.pubkey],limit:1}],bufferMs:100}:void 0),h=X(()=>{const s=Y.events[0];return!s||!l.event.author?!1:s.tags.some(y=>y[0]==="p"&&y[1]===l.event.author.pubkey)});async function m(s,y){try{await navigator.clipboard.writeText(s),ge.success(`Copied ${y}`)}catch(O){console.error("Failed to copy:",O),ge.error(`Failed to copy ${y}`)}P(A,!1)}function I(){const s=l.event.author.nprofile;m(s,"author nprofile")}function N(){const s=l.event.encode();m(s,"event ID")}function J(){P(A,!1),P(S,!0)}async function ne(){if(!(!Pe.$currentUser?.pubkey||!l.event.author))try{let s=Y.events[0];s||(s=new Ve(Pe),s.kind=1e4,s.content="",s.tags=[]);const y=l.event.author.pubkey;if(e(h)?(s.tags=s.tags.filter(O=>!(O[0]==="p"&&O[1]===y)),ge.success("User unmuted")):(s.tags.push(["p",y]),ge.success("User muted")),await s.sign(),await s.publishReplaceable(),s.publishStatus==="error"){const ae=s.publishError?.relayErrors||{},me=Object.entries(ae).map(([E,se])=>`${E}: ${se}`).join(`
`);ge.error(`Failed to publish:
${me||"Unknown error"}`);return}P(A,!1)}catch(s){console.error("Failed to toggle mute:",s),ge.error(`Failed to ${e(h)?"unmute":"mute"} user: ${s instanceof Error?s.message:"Unknown error"}`)}}function re(){P(T,!0),P(A,!1)}Ne(()=>{if(!e(A))return;const s=()=>{P(A,!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)});var H=Ut(),$=R(H),u=o($);u.__click=s=>{s.stopPropagation(),P(A,!e(A))};var oe=a(u,2);{var B=s=>{var y=Rt();y.__click=U=>U.stopPropagation();var O=o(y);O.__click=ne;var ae=o(O);{let U=X(()=>e(h)?"speaker":"speaker-muted");Te(ae,{get name(){return e(U)},size:"md",class:"text-red-500"})}var me=a(ae);r(O);var E=a(O,2);E.__click=re;var se=o(E);Te(se,{name:"alert",size:"md",class:"text-yellow-500"});var V=a(se);r(E);var Q=a(E,4);Q.__click=I;var _=a(Q,2);_.__click=N;var F=a(_,2);F.__click=J;var ie=a(F,2);{var _e=U=>{var j=kt(),q=o(j),de=o(q,!0);r(q),r(j),k(()=>v(de,l.event.relay.url)),t(U,j)},Z=U=>{var j=ve(),q=R(j);{var de=be=>{var G=Pt(),D=o(G),C=o(D);r(D);var b=a(D,2);Ce(b,21,()=>l.event.onRelays,i=>i.url,(i,d)=>{mt(i,{get relay(){return e(d)},variant:"compact"})}),r(b),r(G),k(()=>v(C,`Seen on ${l.event.onRelays.length??""} relay${l.event.onRelays.length===1?"":"s"}`)),t(be,G)};te(q,be=>{l.event.onRelays&&l.event.onRelays.length>0&&be(de)},!0)}t(U,j)};te(ie,U=>{l.event.relay?.url?U(_e):U(Z,!1)})}r(y),k((U,j)=>{v(me,` ${U??""}`),v(V,` ${j??""}`)},[()=>e(h)?n()("userDropdown.unmute"):n()("userDropdown.mute"),()=>n()("noteDropdown.report")]),t(s,y)};te(oe,s=>{e(A)&&s(B)})}r($);var fe=a($,2);{var L=s=>{var y=ve(),O=R(y);z(O,()=>Ge,(ae,me)=>{me(ae,{get open(){return e(S)},set open(E){P(S,E,!0)},children:(E,se)=>{var V=ve(),Q=R(V);z(Q,()=>He,(_,F)=>{F(_,{class:"max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:(ie,_e)=>{var Z=Mt(),U=R(Z);z(U,()=>Qe,(G,D)=>{D(G,{children:(C,b)=>{var i=Dt(),d=R(i);z(d,()=>qe,(f,p)=>{p(f,{children:(x,w)=>{W();var M=K("Raw Event");t(x,M)},$$slots:{default:!0}})});var c=a(d,2);z(c,()=>et,(f,p)=>{p(f,{children:(x,w)=>{W();var M=K("JSON representation of this Nostr event");t(x,M)},$$slots:{default:!0}})}),t(C,i)},$$slots:{default:!0}})});var j=a(U,2),q=o(j),de=o(q,!0);r(q),r(j);var be=a(j,2);z(be,()=>dt,(G,D)=>{D(G,{class:"flex justify-end gap-2",children:(C,b)=>{var i=Ct(),d=R(i);he(d,{variant:"outline",onclick:()=>m(l.event.inspect,"raw event"),children:(f,p)=>{W();var x=K("Copy to Clipboard");t(f,x)},$$slots:{default:!0}});var c=a(d,2);he(c,{onclick:()=>P(S,!1),children:(f,p)=>{W();var x=K("Close");t(f,x)},$$slots:{default:!0}}),t(C,i)},$$slots:{default:!0}})}),k(()=>v(de,l.event.inspect)),t(ie,Z)},$$slots:{default:!0}})}),t(E,V)},$$slots:{default:!0}})}),t(s,y)},ue=s=>{var y=ve(),O=R(y);z(O,()=>Ze,(ae,me)=>{me(ae,{get open(){return e(S)},set open(E){P(S,E,!0)},children:(E,se)=>{var V=ve(),Q=R(V);z(Q,()=>We,(_,F)=>{F(_,{children:(ie,_e)=>{var Z=Et(),U=R(Z);z(U,()=>Xe,(G,D)=>{D(G,{class:"text-left",children:(C,b)=>{var i=zt(),d=R(i);z(d,()=>Ye,(f,p)=>{p(f,{children:(x,w)=>{W();var M=K("Raw Event");t(x,M)},$$slots:{default:!0}})});var c=a(d,2);z(c,()=>tt,(f,p)=>{p(f,{children:(x,w)=>{W();var M=K("JSON representation of this Nostr event");t(x,M)},$$slots:{default:!0}})}),t(C,i)},$$slots:{default:!0}})});var j=a(U,2),q=o(j),de=o(q,!0);r(q),r(j);var be=a(j,2);z(be,()=>rt,(G,D)=>{D(G,{class:"pt-2",children:(C,b)=>{var i=It(),d=R(i);he(d,{variant:"outline",onclick:()=>m(l.event.inspect,"raw event"),children:(f,p)=>{W();var x=K("Copy to Clipboard");t(f,x)},$$slots:{default:!0}});var c=a(d,2);he(c,{onclick:()=>P(S,!1),children:(f,p)=>{W();var x=K("Close");t(f,x)},$$slots:{default:!0}}),t(C,i)},$$slots:{default:!0}})}),k(()=>v(de,l.event.inspect)),t(ie,Z)},$$slots:{default:!0}})}),t(E,V)},$$slots:{default:!0}})}),t(s,y)};te(fe,s=>{pe.current?s(L):s(ue,!1)})}var ce=a(fe,2);wt(ce,{get target(){return l.event},get open(){return e(T)},onClose:()=>P(T,!1)}),t($e,H),Ie(),le()}Be(["click"]);var Lt=g('<div class="absolute left-0 bottom-full mb-2 w-64 bg-card border border-border rounded-lg shadow-xl z-50 p-2 text-xs"><div class="font-semibold text-foreground mb-1">Protected Mode (NIP-70)</div> <div class="text-muted-foreground text-xs">Protected events cannot be republished to other relays without your permission.</div></div>'),Ot=g('<div class="px-2 py-2 mb-2 border-b border-border"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <!> <div class="relative"><button class="text-muted-foreground hover:text-muted-foreground transition-colors" aria-label="Info about protected mode" type="button"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <!></div></div> <button type="button" role="switch" id="protected-switch"><span></span></button></div></div>'),jt=g('<span class="text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded whitespace-nowrap flex-shrink-0">read-only</span>'),Kt=g('<div class="text-xs text-muted-foreground truncate overflow-hidden"> </div>'),St=at('<svg class="w-5 h-5 text-primary flex-shrink-0 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Tt=g('<!> <div class="flex-1 min-w-0 text-left overflow-hidden"><div class="flex items-center gap-2 min-w-0"><div class="text-sm font-medium text-foreground truncate flex-1 min-w-0"> </div> <!></div> <!></div> <!>',1),Nt=g('<div class="group relative flex items-center overflow-hidden"><!> <!></div>'),Bt=g('<div class="p-2"><!> <div class="text-xs text-muted-foreground px-2 py-1.5 font-medium">Select Relays to Publish</div> <!></div>');function vr($e,l){ze(l,!0);let n=Me(l,"isProtected",15,!1),ye=Me(l,"showProtected",3,!0),le=Re(!1);const pe=X(()=>lt.relays.filter(m=>m.enabled));function A(m){n(m),l.onProtectedChange?.(m)}var S=Bt(),T=o(S);{var Y=m=>{var I=Ot(),N=o(I),J=o(N),ne=o(J),re=a(ne,2);{let L=X(()=>n()?"text-primary font-medium":"text-muted-foreground");it(re,{for:"protected-switch",get class(){return`text-sm ${e(L)??""}`},children:(ue,ce)=>{W();var s=K("Protected");t(ue,s)},$$slots:{default:!0}})}var H=a(re,2),$=o(H);$.__click=()=>P(le,!e(le)),$.__mouseover=()=>P(le,!0);var u=a($,2);{var oe=L=>{var ue=Lt();t(L,ue)};te(u,L=>{e(le)&&L(oe)})}r(H),r(J);var B=a(J,2);B.__click=()=>A(!n());var fe=o(B);r(B),r(N),r(I),k(()=>{Ue(ne,0,`w-4 h-4 ${n()?"text-primary":"text-muted-foreground"}`),nt(B,"aria-checked",n()),Ue(B,1,`relative inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 ${n()?"bg-primary":"bg-input"}`),Ue(fe,1,`pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform ${n()?"translate-x-[calc(100%-2px)]":"translate-x-0"}`)}),st("mouseleave",$,()=>P(le,!1)),t(m,I)};te(T,m=>{ye()&&m(Y)})}var h=a(T,4);Ce(h,17,()=>e(pe),m=>m.url,(m,I)=>{const N=X(()=>vt(e(I).url)),J=X(()=>l.selectedRelayUrls.includes(e(I).url)),ne=X(()=>!e(I).write);var re=Nt(),H=o(re);{let u=X(()=>e(J)?"bg-muted/50":""),oe=X(()=>e(ne)?"opacity-60":"");he(H,{variant:"ghost",onclick:()=>l.onToggleRelay(e(I).url),get class(){return`flex-1 justify-start h-auto py-2 min-w-0 pr-16 ${e(u)??""} ${e(oe)??""}`},children:(B,fe)=>{var L=Tt(),ue=R(L);Le(ue,{get relayUrl(){return e(I).url},size:"md",class:"mr-3"});var ce=a(ue,2),s=o(ce),y=o(s),O=o(y,!0);r(y);var ae=a(y,2);{var me=_=>{var F=jt();t(_,F)};te(ae,_=>{e(ne)&&_(me)})}r(s);var E=a(s,2);{var se=_=>{var F=Kt(),ie=o(F,!0);r(F),k(()=>v(ie,e(N).info.description)),t(_,F)};te(E,_=>{e(N).info?.description&&_(se)})}r(ce);var V=a(ce,2);{var Q=_=>{var F=St();t(_,F)};te(V,_=>{e(J)&&_(Q)})}k(_=>v(O,_),[()=>e(N).info?.name||e(I).url.replace("wss://","").replace("ws://","")]),t(B,L)},$$slots:{default:!0}})}var $=a(H,2);he($,{size:"sm",onclick:u=>{u.stopPropagation(),l.onSelectOnly(e(I).url)},title:"Publish to only this relay (deselects all others)",class:"absolute right-2 px-2 py-1 h-auto text-xs md:opacity-0 md:group-hover:opacity-100 transition-opacity md:pointer-events-none md:group-hover:pointer-events-auto",children:(u,oe)=>{W();var B=K("Only");t(u,B)},$$slots:{default:!0}}),r(re),t(m,re)}),r(S),t($e,S),Ie()}Be(["click","mouseover"]);export{dr as E,vr as R,wt as a};
