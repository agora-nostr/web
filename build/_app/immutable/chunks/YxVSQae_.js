import"./DsnmJJEf.js";import{d as P,p as S,c as b,f as _,g as t,a as m,e as u,h as q,i as A,k as D,j as G,r as J,t as K,l as L,M as k}from"./Bq750rDx.js";import{i as p}from"./BcjopvHb.js";import{c as Q,a as R,d as V}from"./uSFILAY7.js";import{p as g}from"./BL6J_geM.js";import{s as W,a as X}from"./wxUnewq1.js";import{n as a}from"./CdRP5_sk.js";import{$ as Y}from"./L2joq6-K.js";import{t as Z}from"./8lBcLtWK.js";var $=k('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"></path></svg>'),tt=k('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>'),ot=A('<button data-testid="follow-button" type="button"><!> </button>');function ct(x,o){S(o,!0);const n=()=>X(Y,"$t",y),[y,F]=W(),M=g(o,"variant",3,"default"),U=g(o,"showIcon",3,!0),w=g(o,"class",3,""),v=m(()=>a.$sessions?.follows??new Set),r=m(()=>t(v).has(o.pubkey)),z=m(()=>a.$currentUser?.pubkey===o.pubkey),C=m(()=>w()?w():M()==="primary"?t(r)?"px-4 py-2 rounded-full font-medium transition-colors bg-muted text-foreground hover:bg-red-500 hover:text-white text-sm":"px-4 py-2 rounded-full font-medium transition-colors bg-accent text-accent-foreground hover:bg-accent/90 text-sm":`text-sm font-medium transition-colors inline-flex items-center gap-1 ${t(r)?"text-muted-foreground hover:text-red-500":"text-primary hover:underline"}`);async function j(l){if(!a.$currentUser)return;const e=t(r);try{t(r)?a.$currentUser.unfollow(o.pubkey,t(v)):a.$currentUser.follow(o.pubkey,t(v)),l.currentTarget?.dispatchEvent(new CustomEvent("followsuccess",{detail:{pubkey:o.pubkey,isFollowing:!e},bubbles:!0}))}catch(f){console.error("Error toggling follow:",f),Z.error(n()("profile.follow_error"))}}var h=b(),B=_(h);{var E=l=>{var e=ot();e.__click=j;var f=D(e);{var I=i=>{var c=b(),H=_(c);{var N=s=>{var d=$();u(s,d)},O=s=>{var d=tt();u(s,d)};p(H,s=>{t(r)?s(N):s(O,!1)})}u(i,c)};p(f,i=>{U()&&i(I)})}var T=G(f);J(e),K((i,c)=>{Q(e,"aria-label",i),R(e,1,V(t(C))),L(T,` ${c??""}`)},[()=>t(r)?n()("profile.unfollow"):n()("profile.follow"),()=>t(r)?n()("profile.unfollow"):n()("profile.follow")]),u(l,e)};p(B,l=>{!t(z)&&a.$currentUser&&l(E)})}u(x,h),q(),F()}P(["click"]);export{ct as F};
